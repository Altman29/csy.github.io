

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="æ‹¾å">
  <meta name="keywords" content="é‡æ„">
  
    <meta name="description" content="ğŸ¤“çœ‹åˆ°shiå±±ä»£ç è¿˜å¤´ç–¼å‘¢ï¼Ÿé‡æ„äº†è§£ä¸€ä¸‹ï¼Ÿ">
<meta property="og:type" content="article">
<meta property="og:title" content="é‡æ„æ³•åˆ™èŠ‚é€‰(ä¸‹)">
<meta property="og:url" content="https://blog.13space.cn/posts/915cdc75/index.html">
<meta property="og:site_name" content="æ‹¾åçš„å°ç ´ç«™">
<meta property="og:description" content="ğŸ¤“çœ‹åˆ°shiå±±ä»£ç è¿˜å¤´ç–¼å‘¢ï¼Ÿé‡æ„äº†è§£ä¸€ä¸‹ï¼Ÿ">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://blog.13space.cn/img/reactor/reactor.jpg">
<meta property="article:published_time" content="2020-07-15T11:16:53.000Z">
<meta property="article:modified_time" content="2024-03-15T09:02:42.192Z">
<meta property="article:author" content="æ‹¾å">
<meta property="article:tag" content="é‡æ„">
<meta property="article:tag" content="æ¶æ„">
<meta property="article:tag" content="è®¾è®¡">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://blog.13space.cn/img/reactor/reactor.jpg">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>é‡æ„æ³•åˆ™èŠ‚é€‰(ä¸‹) - æ‹¾åçš„å°ç ´ç«™</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"blog.13space.cn","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":100,"cursorChar":"*","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  

  

  



  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>æ‹¾å | space</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>é¦–é¡µ</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>æ—¶é—´è½´</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>åˆ†ç±»</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>æ ‡ç­¾</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/remark/">
                <i class="iconfont icon-speakernotes"></i>
                <span>ç•™è¨€æ¿</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                <span>Links</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>å…³äº</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/home_bg.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="é‡æ„æ³•åˆ™èŠ‚é€‰(ä¸‹)"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        æ‹¾å
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2020-07-15 19:16" pubdate>
          July 15, 2020 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          78k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          648 mins
        
      </span>
    

    
    
  </div>


<script src="/js/custom-iconfont.js?v=" ></script>

        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">é‡æ„æ³•åˆ™èŠ‚é€‰(ä¸‹)</h1>
            
            
              <div class="markdown-body">
                
                <blockquote>
<p>é‡æ„ï¼Œå¹¶ä¸æ˜¯é¢å¤–åŠ¨ä½œï¼Œç†åº”ä¼´éšå¼€å‘æµç¨‹ã€‚å¹¶ä¸æ˜¯æ— æ„ä¹‰ï¼Œå¦‚æœåªæ˜¯å †ç§¯åƒåœ¾ä»£ç ï¼Œè¿­ä»£å¤šæ¬¡ä¹‹åï¼Œå¯èƒ½åŸå¼€å‘äººå‘˜ä¹Ÿä¼šå¤±å»æœ¬æ¥çš„æ–¹å‘ã€‚ä½œä¸ºå¼€å‘äººå‘˜ç†åº”é‡è§†è¿™æ ·çš„ä»½å†…ä¹‹äº‹ã€‚æœ€è¿‘é‡è¯»ã€Šé‡æ„-æ”¹å–„æ—¢æœ‰ä»£ç çš„è®¾è®¡ã€‹ã€‚è¿˜æ˜¯è§‰å¾—éœ€è¦è½åˆ°ç¬”ç«¯ï¼Œåƒä¹¦ä¹Ÿæ˜¯ä¸€ç§å­¦ä¹ æ–¹å¼å§ï¼Œè¿™é‡ŒèŠ‚é€‰è®¤ä¸ºå¿…è¦çš„å†…å®¹ï¼Œè¿˜æ˜¯éœ€è¦åå¤é˜…è¯»æ‰èƒ½ç†è§£å…¶çœŸæ„ã€‚å­¦ä¹ é‡æ„ï¼Œæ˜¯ä¸ºäº†å‡å°‘é‡æ„ã€‚</p>
</blockquote>
<hr>
<h1 id="10-ç®€åŒ–æ¡ä»¶é€»è¾‘"><a href="#10-ç®€åŒ–æ¡ä»¶é€»è¾‘" class="headerlink" title="10.ç®€åŒ–æ¡ä»¶é€»è¾‘"></a>10.ç®€åŒ–æ¡ä»¶é€»è¾‘</h1><p>ç¨‹åºçš„å¤§éƒ¨åˆ†å¨åŠ›æ¥è‡ªæ¡ä»¶é€»è¾‘ï¼Œä½†å¾ˆä¸å¹¸ï¼Œç¨‹åºçš„å¤æ‚åº¦ä¹Ÿå¤§å¤šæ¥è‡ªæ¡ä»¶é€»è¾‘ã€‚æˆ‘ç»å¸¸å€ŸåŠ©é‡æ„æŠŠæ¡ä»¶é€»è¾‘å˜å¾—æ›´å®¹æ˜“ç†è§£ã€‚æˆ‘å¸¸ç”¨åˆ†è§£æ¡ä»¶è¡¨è¾¾å¼ï¼ˆ260ï¼‰å¤„ç†å¤æ‚çš„æ¡ä»¶è¡¨è¾¾å¼ï¼Œç”¨åˆå¹¶æ¡ä»¶è¡¨è¾¾å¼ï¼ˆ263ï¼‰å˜æ¸…é€»è¾‘ç»„åˆã€‚æˆ‘ä¼šç”¨ä»¥å«è¯­å¥å–ä»£åµŒå¥—æ¡ä»¶è¡¨è¾¾å¼ï¼ˆ266ï¼‰æ¸…æ™°è¡¨è¾¾â€œåœ¨ä¸»è¦å¤„ç†é€»è¾‘ä¹‹å‰å…ˆåšæ£€æŸ¥â€çš„æ„å›¾ã€‚å¦‚æœæˆ‘å‘ç°ä¸€å¤„ switch é€»è¾‘å¤„ç†äº†å‡ ç§æƒ…å†µï¼Œå¯ä»¥è€ƒè™‘æ‹¿å‡ºä»¥å¤šæ€å–ä»£æ¡ä»¶è¡¨è¾¾å¼ï¼ˆ272ï¼‰é‡æ„æ‰‹æ³•ã€‚</p>
<p>å¾ˆå¤šæ¡ä»¶é€»è¾‘æ˜¯ç”¨äºå¤„ç†ç‰¹æ®Šæƒ…å†µçš„ï¼Œä¾‹å¦‚å¤„ç† null å€¼ã€‚å¦‚æœå¯¹æŸç§ç‰¹æ®Šæƒ…å†µçš„å¤„ç†é€»è¾‘å¤§å¤šç›¸åŒï¼Œé‚£ä¹ˆå¯ä»¥ç”¨å¼•å…¥ç‰¹ä¾‹ï¼ˆ289ï¼‰ï¼ˆå¸¸è¢«ç§°ä½œå¼•å…¥ç©ºå¯¹è±¡ï¼‰æ¶ˆé™¤é‡å¤ä»£ç ã€‚å¦å¤–ï¼Œè™½ç„¶æˆ‘å¾ˆå–œæ¬¢å»é™¤æ¡ä»¶é€»è¾‘ï¼Œä½†å¦‚æœæˆ‘æƒ³æ˜ç¡®åœ°è¡¨è¿°ï¼ˆä»¥åŠæ£€æŸ¥ï¼‰ç¨‹åºçš„çŠ¶æ€ï¼Œå¼•å…¥æ–­è¨€ï¼ˆ302ï¼‰æ˜¯ä¸€ä¸ªä¸é”™çš„è¡¥å……ã€‚</p>
<h2 id="10-1-åˆ†è§£æ¡ä»¶è¡¨è¾¾å¼ï¼ˆDecompose-Conditionalï¼‰"><a href="#10-1-åˆ†è§£æ¡ä»¶è¡¨è¾¾å¼ï¼ˆDecompose-Conditionalï¼‰" class="headerlink" title="10.1 åˆ†è§£æ¡ä»¶è¡¨è¾¾å¼ï¼ˆDecompose Conditionalï¼‰"></a>10.1 åˆ†è§£æ¡ä»¶è¡¨è¾¾å¼ï¼ˆDecompose Conditionalï¼‰</h2><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">if</span> (!aDate.is<span class="hljs-constructor">Before(<span class="hljs-params">plan</span>.<span class="hljs-params">summerStart</span>)</span> &amp;amp;&amp;amp; !aDate.is<span class="hljs-constructor">After(<span class="hljs-params">plan</span>.<span class="hljs-params">summerEnd</span>)</span>)<br> charge = quantity<span class="hljs-operator"> * </span>plan.summerRate;<br><span class="hljs-keyword">else</span><br> charge = quantity<span class="hljs-operator"> * </span>plan.regularRate + plan.regularServiceCharge;<br><br><br><span class="hljs-keyword">if</span> (summer<span class="hljs-literal">()</span>)<br> charge = summer<span class="hljs-constructor">Charge()</span>;<br><span class="hljs-keyword">else</span><br> charge = regular<span class="hljs-constructor">Charge()</span>;<br></code></pre></td></tr></table></figure>

<h3 id="åŠ¨æœº"><a href="#åŠ¨æœº" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>ç¨‹åºä¹‹ä¸­ï¼Œå¤æ‚çš„æ¡ä»¶é€»è¾‘æ˜¯æœ€å¸¸å¯¼è‡´å¤æ‚åº¦ä¸Šå‡çš„åœ°ç‚¹ä¹‹ä¸€ã€‚æˆ‘å¿…é¡»ç¼–å†™ä»£ç æ¥æ£€æŸ¥ä¸åŒçš„æ¡ä»¶åˆ†æ”¯ï¼Œæ ¹æ®ä¸åŒçš„æ¡ä»¶åšä¸åŒçš„äº‹ï¼Œç„¶åï¼Œæˆ‘å¾ˆå¿«å°±ä¼šå¾—åˆ°ä¸€ä¸ªç›¸å½“é•¿çš„å‡½æ•°ã€‚å¤§å‹å‡½æ•°æœ¬èº«å°±ä¼šä½¿ä»£ç çš„å¯è¯»æ€§ä¸‹é™ï¼Œè€Œæ¡ä»¶é€»è¾‘åˆ™ä¼šä½¿ä»£ç æ›´éš¾é˜…è¯»ã€‚åœ¨å¸¦æœ‰å¤æ‚æ¡ä»¶é€»è¾‘çš„å‡½æ•°ä¸­ï¼Œä»£ç ï¼ˆåŒ…æ‹¬æ£€æŸ¥æ¡ä»¶åˆ†æ”¯çš„ä»£ç å’ŒçœŸæ­£å®ç°åŠŸèƒ½çš„ä»£ç ï¼‰ä¼šå‘Šè¯‰æˆ‘å‘ç”Ÿçš„äº‹ï¼Œä½†å¸¸å¸¸è®©æˆ‘å¼„ä¸æ¸…æ¥šä¸ºä»€ä¹ˆä¼šå‘ç”Ÿè¿™æ ·çš„äº‹ï¼Œè¿™å°±è¯´æ˜ä»£ç çš„å¯è¯»æ€§çš„ç¡®å¤§å¤§é™ä½äº†ã€‚</p>
<p>å’Œä»»ä½•å¤§å—å¤´ä»£ç ä¸€æ ·ï¼Œæˆ‘å¯ä»¥å°†å®ƒåˆ†è§£ä¸ºå¤šä¸ªç‹¬ç«‹çš„å‡½æ•°ï¼Œæ ¹æ®æ¯ä¸ªå°å—ä»£ç çš„ç”¨é€”ï¼Œä¸ºåˆ†è§£è€Œå¾—çš„æ–°å‡½æ•°å‘½åï¼Œå¹¶å°†åŸå‡½æ•°ä¸­å¯¹åº”çš„ä»£ç æ”¹ä¸ºè°ƒç”¨æ–°å‡½æ•°ï¼Œä»è€Œæ›´æ¸…æ¥šåœ°è¡¨è¾¾è‡ªå·±çš„æ„å›¾ã€‚å¯¹äºæ¡ä»¶é€»è¾‘ï¼Œå°†æ¯ä¸ªåˆ†æ”¯æ¡ä»¶åˆ†è§£æˆæ–°å‡½æ•°è¿˜å¯ä»¥å¸¦æ¥æ›´å¤šå¥½å¤„ï¼šå¯ä»¥çªå‡ºæ¡ä»¶é€»è¾‘ï¼Œæ›´æ¸…æ¥šåœ°è¡¨æ˜æ¯ä¸ªåˆ†æ”¯çš„ä½œç”¨ï¼Œå¹¶ä¸”çªå‡ºæ¯ä¸ªåˆ†æ”¯çš„åŸå› ã€‚</p>
<p>æœ¬é‡æ„æ‰‹æ³•å…¶å®åªæ˜¯æç‚¼å‡½æ•°ï¼ˆ106ï¼‰çš„ä¸€ä¸ªåº”ç”¨åœºæ™¯ã€‚ä½†æˆ‘è¦ç‰¹åˆ«å¼ºè°ƒè¿™ä¸ªåœºæ™¯ï¼Œå› ä¸ºæˆ‘å‘ç°å®ƒç»å¸¸ä¼šå¸¦æ¥å¾ˆå¤§çš„ä»·å€¼ã€‚</p>
<h3 id="åšæ³•"><a href="#åšæ³•" class="headerlink" title="åšæ³•"></a>åšæ³•</h3><p>å¯¹æ¡ä»¶åˆ¤æ–­å’Œæ¯ä¸ªæ¡ä»¶åˆ†æ”¯åˆ†åˆ«è¿ç”¨æç‚¼å‡½æ•°ï¼ˆ106ï¼‰æ‰‹æ³•ã€‚</p>
<h3 id="èŒƒä¾‹"><a href="#èŒƒä¾‹" class="headerlink" title="èŒƒä¾‹"></a>èŒƒä¾‹</h3><p>å‡è®¾æˆ‘è¦è®¡ç®—è´­ä¹°æŸæ ·å•†å“çš„æ€»ä»·ï¼ˆæ€»ä»·&#x3D;æ•°é‡ Ã— å•ä»·ï¼‰ï¼Œè€Œè¿™ä¸ªå•†å“åœ¨å†¬å­£å’Œå¤å­£çš„å•ä»·æ˜¯ä¸åŒçš„ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">if</span> (!aDate.is<span class="hljs-constructor">Before(<span class="hljs-params">plan</span>.<span class="hljs-params">summerStart</span>)</span> &amp;amp;&amp;amp; !aDate.is<span class="hljs-constructor">After(<span class="hljs-params">plan</span>.<span class="hljs-params">summerEnd</span>)</span>)<br> charge = quantity<span class="hljs-operator"> * </span>plan.summerRate;<br><span class="hljs-keyword">else</span><br> charge = quantity<span class="hljs-operator"> * </span>plan.regularRate + plan.regularServiceCharge;<br></code></pre></td></tr></table></figure>

<p>æˆ‘æŠŠæ¡ä»¶åˆ¤æ–­æç‚¼åˆ°ä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•°ä¸­ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">if</span> (summer<span class="hljs-literal">()</span>)<br> charge = quantity<span class="hljs-operator"> * </span>plan.summerRate;<br><span class="hljs-keyword">else</span><br> charge = quantity<span class="hljs-operator"> * </span>plan.regularRate + plan.regularServiceCharge;<br><br><span class="hljs-keyword">function</span> summer<span class="hljs-literal">()</span> &#123;<br> return !aDate.is<span class="hljs-constructor">Before(<span class="hljs-params">plan</span>.<span class="hljs-params">summerStart</span>)</span> &amp;amp;&amp;amp; !aDate.is<span class="hljs-constructor">After(<span class="hljs-params">plan</span>.<span class="hljs-params">summerEnd</span>)</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç„¶åæç‚¼æ¡ä»¶åˆ¤æ–­ä¸ºçœŸçš„åˆ†æ”¯ï¼š</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">if</span> (summer())<br> charge = summerCharge();<br><span class="hljs-keyword">else</span><br> charge = quantity * plan.regularRate + plan.regularServiceCharge;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title">summer</span>() &#123;<br> <span class="hljs-keyword">return</span> <span class="hljs-type">!aDate.isBefore(plan.summerStart)</span> &amp;amp;&amp;amp; !aDate.isAfter(plan.summerEnd);<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title">summerCharge</span>() &#123;<br> <span class="hljs-keyword">return</span> <span class="hljs-type">quantity</span> * plan.summerRate;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æœ€åæç‚¼æ¡ä»¶åˆ¤æ–­ä¸ºå‡çš„åˆ†æ”¯ï¼š</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">if</span> (summer())<br> charge = summerCharge();<br><span class="hljs-keyword">else</span><br> charge = regularCharge();<br><br><span class="hljs-keyword">function</span> <span class="hljs-title">summer</span>() &#123;<br> <span class="hljs-keyword">return</span> <span class="hljs-type">!aDate.isBefore(plan.summerStart)</span> &amp;amp;&amp;amp; !aDate.isAfter(plan.summerEnd);<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title">summerCharge</span>() &#123;<br> <span class="hljs-keyword">return</span> <span class="hljs-type">quantity</span> * plan.summerRate;<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title">regularCharge</span>() &#123;<br> <span class="hljs-keyword">return</span> <span class="hljs-type">quantity</span> * plan.regularRate + plan.regularServiceCharge;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æç‚¼å®Œæˆåï¼Œæˆ‘å–œæ¬¢ç”¨ä¸‰å…ƒè¿ç®—ç¬¦é‡æ–°å®‰æ’æ¡ä»¶è¯­å¥ã€‚</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ada">  charge = summer() ? summerCharge() : <span class="hljs-type">regularCharge</span>();<br><br><span class="hljs-keyword">function</span> <span class="hljs-title">summer</span>() &#123;<br> <span class="hljs-keyword">return</span> <span class="hljs-type">!aDate.isBefore(plan.summerStart)</span> &amp;amp;&amp;amp; !aDate.isAfter(plan.summerEnd);<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title">summerCharge</span>() &#123;<br> <span class="hljs-keyword">return</span> <span class="hljs-type">quantity</span> * plan.summerRate;<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title">regularCharge</span>() &#123;<br> <span class="hljs-keyword">return</span> <span class="hljs-type">quantity</span> * plan.regularRate + plan.regularServiceCharge;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="10-2-åˆå¹¶æ¡ä»¶è¡¨è¾¾å¼ï¼ˆConsolidate-Conditional-Expressionï¼‰"><a href="#10-2-åˆå¹¶æ¡ä»¶è¡¨è¾¾å¼ï¼ˆConsolidate-Conditional-Expressionï¼‰" class="headerlink" title="10.2 åˆå¹¶æ¡ä»¶è¡¨è¾¾å¼ï¼ˆConsolidate Conditional Expressionï¼‰"></a>10.2 åˆå¹¶æ¡ä»¶è¡¨è¾¾å¼ï¼ˆConsolidate Conditional Expressionï¼‰</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">if</span> (anEmployee.seniority &lt; <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><span class="hljs-keyword">if</span> (anEmployee.monthsDisabled &gt; <span class="hljs-number">12</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><span class="hljs-keyword">if</span> (anEmployee.isPartTime) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><br><br><span class="hljs-keyword">if</span> (isNotEligibleForDisability()) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><br>function isNotEligibleForDisability() &#123;<br> <span class="hljs-keyword">return</span> ((anEmployee.seniority &lt; <span class="hljs-number">2</span>)<br>     || (anEmployee.monthsDisabled &gt; <span class="hljs-number">12</span>)<br>     || (anEmployee.isPartTime));<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="åŠ¨æœº-1"><a href="#åŠ¨æœº-1" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>æœ‰æ—¶æˆ‘ä¼šå‘ç°è¿™æ ·ä¸€ä¸²æ¡ä»¶æ£€æŸ¥ï¼šæ£€æŸ¥æ¡ä»¶å„ä¸ç›¸åŒï¼Œæœ€ç»ˆè¡Œä¸ºå´ä¸€è‡´ã€‚å¦‚æœå‘ç°è¿™ç§æƒ…å†µï¼Œå°±åº”è¯¥ä½¿ç”¨â€œé€»è¾‘æˆ–â€å’Œâ€œé€»è¾‘ä¸â€å°†å®ƒä»¬åˆå¹¶ä¸ºä¸€ä¸ªæ¡ä»¶è¡¨è¾¾å¼ã€‚</p>
<p>ä¹‹æ‰€ä»¥è¦åˆå¹¶æ¡ä»¶ä»£ç ï¼Œæœ‰ä¸¤ä¸ªé‡è¦åŸå› ã€‚é¦–å…ˆï¼Œåˆå¹¶åçš„æ¡ä»¶ä»£ç ä¼šè¡¨è¿°â€œå®é™…ä¸Šåªæœ‰ä¸€æ¬¡æ¡ä»¶æ£€æŸ¥ï¼Œåªä¸è¿‡æœ‰å¤šä¸ªå¹¶åˆ—æ¡ä»¶éœ€è¦æ£€æŸ¥è€Œå·²â€ï¼Œä»è€Œä½¿è¿™ä¸€æ¬¡æ£€æŸ¥çš„ç”¨æ„æ›´æ¸…æ™°ã€‚å½“ç„¶ï¼Œåˆå¹¶å‰å’Œåˆå¹¶åçš„ä»£ç æœ‰ç€ç›¸åŒçš„æ•ˆæœï¼Œä½†åŸå…ˆä»£ç ä¼ è¾¾å‡ºçš„ä¿¡æ¯å´æ˜¯â€œè¿™é‡Œæœ‰ä¸€äº›å„è‡ªç‹¬ç«‹çš„æ¡ä»¶æµ‹è¯•ï¼Œå®ƒä»¬åªæ˜¯æ°å¥½åŒæ—¶å‘ç”Ÿâ€ã€‚å…¶æ¬¡ï¼Œè¿™é¡¹é‡æ„å¾€å¾€å¯ä»¥ä¸ºä½¿ç”¨æç‚¼å‡½æ•°ï¼ˆ106ï¼‰åšå¥½å‡†å¤‡ã€‚å°†æ£€æŸ¥æ¡ä»¶æç‚¼æˆä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•°å¯¹äºå˜æ¸…ä»£ç æ„ä¹‰éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒæŠŠæè¿°â€œåšä»€ä¹ˆâ€çš„è¯­å¥æ¢æˆäº†â€œä¸ºä»€ä¹ˆè¿™æ ·åšâ€ã€‚</p>
<p>æ¡ä»¶è¯­å¥çš„åˆå¹¶ç†ç”±ä¹ŸåŒæ—¶æŒ‡å‡ºäº†ä¸è¦åˆå¹¶çš„ç†ç”±ï¼šå¦‚æœæˆ‘è®¤ä¸ºè¿™äº›æ£€æŸ¥çš„ç¡®å½¼æ­¤ç‹¬ç«‹ï¼Œçš„ç¡®ä¸åº”è¯¥è¢«è§†ä¸ºåŒä¸€æ¬¡æ£€æŸ¥ï¼Œæˆ‘å°±ä¸ä¼šä½¿ç”¨æœ¬é¡¹é‡æ„ã€‚</p>
<h3 id="åšæ³•-1"><a href="#åšæ³•-1" class="headerlink" title="åšæ³•"></a>åšæ³•</h3><p>ç¡®å®šè¿™äº›æ¡ä»¶è¡¨è¾¾å¼éƒ½æ²¡æœ‰å‰¯ä½œç”¨ã€‚</p>
<p>å¦‚æœæŸä¸ªæ¡ä»¶è¡¨è¾¾å¼æœ‰å‰¯ä½œç”¨ï¼Œå¯ä»¥å…ˆç”¨å°†æŸ¥è¯¢å‡½æ•°å’Œä¿®æ”¹å‡½æ•°åˆ†ç¦»ï¼ˆ306ï¼‰å¤„ç†ã€‚</p>
<p>ä½¿ç”¨é€‚å½“çš„é€»è¾‘è¿ç®—ç¬¦ï¼Œå°†ä¸¤ä¸ªç›¸å…³æ¡ä»¶è¡¨è¾¾å¼åˆå¹¶ä¸ºä¸€ä¸ªã€‚</p>
<p>é¡ºåºæ‰§è¡Œçš„æ¡ä»¶è¡¨è¾¾å¼ç”¨é€»è¾‘æˆ–æ¥åˆå¹¶ï¼ŒåµŒå¥—çš„ if è¯­å¥ç”¨é€»è¾‘ä¸æ¥åˆå¹¶ã€‚</p>
<p>æµ‹è¯•ã€‚</p>
<p>é‡å¤å‰é¢çš„åˆå¹¶è¿‡ç¨‹ï¼Œç›´åˆ°æ‰€æœ‰ç›¸å…³çš„æ¡ä»¶è¡¨è¾¾å¼éƒ½åˆå¹¶åˆ°ä¸€èµ·ã€‚</p>
<p>å¯ä»¥è€ƒè™‘å¯¹åˆå¹¶åçš„æ¡ä»¶è¡¨è¾¾å¼å®æ–½æç‚¼å‡½æ•°ï¼ˆ106ï¼‰ã€‚</p>
<h3 id="èŒƒä¾‹-1"><a href="#èŒƒä¾‹-1" class="headerlink" title="èŒƒä¾‹"></a>èŒƒä¾‹</h3><p>åœ¨èµ°è¯»ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘çœ‹åˆ°äº†ä¸‹é¢çš„ä»£ç ç‰‡æ®µï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">function disabilityAmount(anEmployee) &#123;<br> <span class="hljs-keyword">if</span> (anEmployee.seniority &lt; <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br> <span class="hljs-keyword">if</span> (anEmployee.monthsDisabled &gt; <span class="hljs-number">12</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br> <span class="hljs-keyword">if</span> (anEmployee.isPartTime) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br> <span class="hljs-comment">// compute the disability amount</span><br></code></pre></td></tr></table></figure>

<p>è¿™é‡Œæœ‰ä¸€è¿ä¸²çš„æ¡ä»¶æ£€æŸ¥ï¼Œéƒ½æŒ‡å‘åŒæ ·çš„ç»“æœã€‚æ—¢ç„¶ç»“æœæ˜¯ç›¸åŒçš„ï¼Œå°±åº”è¯¥æŠŠè¿™äº›æ¡ä»¶æ£€æŸ¥åˆå¹¶æˆä¸€æ¡è¡¨è¾¾å¼ã€‚å¯¹äºè¿™æ ·é¡ºåºæ‰§è¡Œçš„æ¡ä»¶æ£€æŸ¥ï¼Œå¯ä»¥ç”¨é€»è¾‘æˆ–è¿ç®—ç¬¦æ¥åˆå¹¶ã€‚</p>
<figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs wren"><span class="hljs-variable">function</span> <span class="hljs-title function_">disabilityAmount</span>(<span class="hljs-params">anEmployee</span>) &#123;<br> <span class="hljs-keyword">if</span> ((<span class="hljs-variable">anEmployee</span>.<span class="hljs-property">seniority</span> <span class="hljs-operator">&lt;</span> <span class="hljs-number">2</span>)<br>   <span class="hljs-operator">||</span> (<span class="hljs-variable">anEmployee</span>.<span class="hljs-property">monthsDisabled</span> <span class="hljs-operator">&gt;</span> <span class="hljs-number">12</span>)) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br> <span class="hljs-keyword">if</span> (<span class="hljs-variable">anEmployee</span>.<span class="hljs-property">isPartTime</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br> <span class="hljs-comment">// compute the disability amount</span><br></code></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼Œç„¶åæŠŠä¸‹ä¸€ä¸ªæ¡ä»¶æ£€æŸ¥ä¹Ÿåˆå¹¶è¿›æ¥ï¼š</p>
<figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs wren"><span class="hljs-variable">function</span> <span class="hljs-title function_">disabilityAmount</span>(<span class="hljs-params">anEmployee</span>) &#123;<br> <span class="hljs-keyword">if</span> ((<span class="hljs-variable">anEmployee</span>.<span class="hljs-property">seniority</span> <span class="hljs-operator">&lt;</span> <span class="hljs-number">2</span>)<br>   <span class="hljs-operator">||</span> (<span class="hljs-variable">anEmployee</span>.<span class="hljs-property">monthsDisabled</span> <span class="hljs-operator">&gt;</span> <span class="hljs-number">12</span>)<br>   <span class="hljs-operator">||</span> (<span class="hljs-variable">anEmployee</span>.<span class="hljs-property">isPartTime</span>)) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br> <span class="hljs-comment">// compute the disability amount</span><br></code></pre></td></tr></table></figure>

<p>åˆå¹¶å®Œæˆåï¼Œå†å¯¹è¿™å¥æ¡ä»¶è¡¨è¾¾å¼ä½¿ç”¨æç‚¼å‡½æ•°ï¼ˆ106ï¼‰ã€‚</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">disabilityAmount</span>(anEmployee) &#123;<br> if (<span class="hljs-keyword">is</span>NotEligableForDisability()) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br> // compute the disability amount<br><br><span class="hljs-keyword">function</span> <span class="hljs-title">isNotEligableForDisability</span>() &#123;<br> <span class="hljs-keyword">return</span> <span class="hljs-type">((anEmployee.seniority</span> &lt; <span class="hljs-number">2</span>)<br>     || (anEmployee.monthsDisabled &gt; <span class="hljs-number">12</span>)<br>     || (anEmployee.isPartTime));<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="èŒƒä¾‹ï¼šä½¿ç”¨é€»è¾‘ä¸"><a href="#èŒƒä¾‹ï¼šä½¿ç”¨é€»è¾‘ä¸" class="headerlink" title="èŒƒä¾‹ï¼šä½¿ç”¨é€»è¾‘ä¸"></a>èŒƒä¾‹ï¼šä½¿ç”¨é€»è¾‘ä¸</h3><p>ä¸Šé¢çš„ä¾‹å­å±•ç¤ºäº†ç”¨é€»è¾‘æˆ–åˆå¹¶æ¡ä»¶è¡¨è¾¾å¼çš„åšæ³•ã€‚ä¸è¿‡ï¼Œæˆ‘æœ‰å¯èƒ½é‡åˆ°éœ€è¦é€»è¾‘ä¸çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼ŒåµŒå¥— if è¯­å¥çš„æƒ…å†µï¼š</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">if</span> (anEmployee.onVacation)<br> <span class="hljs-attribute">if</span> (anEmployee.seniority &gt; <span class="hljs-number">10</span>)<br>  <span class="hljs-attribute">return</span> <span class="hljs-number">1</span>;<br><span class="hljs-attribute">return</span> <span class="hljs-number">0</span>.<span class="hljs-number">5</span>;<br></code></pre></td></tr></table></figure>

<p>å¯ä»¥ç”¨é€»è¾‘ä¸è¿ç®—ç¬¦å°†å…¶åˆå¹¶ã€‚</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">if</span> ((anEmployee.onVacation)<br>  &amp;amp;&amp;amp; (anEmployee.seniority &gt; <span class="hljs-number">10</span>)) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0.5</span>;<br></code></pre></td></tr></table></figure>

<p>å¦‚æœåŸæ¥çš„æ¡ä»¶é€»è¾‘æ··æ‚äº†è¿™ä¸¤ç§æƒ…å†µï¼Œæˆ‘ä¹Ÿä¼šæ ¹æ®éœ€è¦ç»„åˆä½¿ç”¨é€»è¾‘ä¸å’Œé€»è¾‘æˆ–è¿ç®—ç¬¦ã€‚åœ¨è¿™ç§æ—¶å€™ï¼Œä»£ç å¾ˆå¯èƒ½å˜å¾—æ··ä¹±ï¼Œæ‰€ä»¥æˆ‘ä¼šé¢‘ç¹ä½¿ç”¨æç‚¼å‡½æ•°ï¼ˆ106ï¼‰ï¼ŒæŠŠä»£ç å˜å¾—å¯è¯»ã€‚</p>
<h2 id="10-3-ä»¥å«è¯­å¥å–ä»£åµŒå¥—æ¡ä»¶è¡¨è¾¾å¼ï¼ˆReplace-Nested-Conditional-with-Guard-Clausesï¼‰"><a href="#10-3-ä»¥å«è¯­å¥å–ä»£åµŒå¥—æ¡ä»¶è¡¨è¾¾å¼ï¼ˆReplace-Nested-Conditional-with-Guard-Clausesï¼‰" class="headerlink" title="10.3 ä»¥å«è¯­å¥å–ä»£åµŒå¥—æ¡ä»¶è¡¨è¾¾å¼ï¼ˆReplace Nested Conditional with Guard Clausesï¼‰"></a>10.3 ä»¥å«è¯­å¥å–ä»£åµŒå¥—æ¡ä»¶è¡¨è¾¾å¼ï¼ˆReplace Nested Conditional with Guard Clausesï¼‰</h2><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">function</span> <span class="hljs-function"><span class="hljs-title">getPayAmount</span>() &#123;</span><br><span class="hljs-function">  <span class="hljs-variable">let</span> <span class="hljs-variable"><span class="hljs-class">result</span></span>;</span><br><span class="hljs-function">  <span class="hljs-variable"><span class="hljs-keyword">if</span></span> (<span class="hljs-variable">isDead</span>) <span class="hljs-variable"><span class="hljs-class">result</span></span> = <span class="hljs-title">deadAmount</span>();</span><br><span class="hljs-function">  <span class="hljs-variable"><span class="hljs-keyword">else</span></span> &#123;</span><br><span class="hljs-function">    <span class="hljs-variable"><span class="hljs-keyword">if</span></span> (<span class="hljs-variable">isSeparated</span>) <span class="hljs-variable"><span class="hljs-class">result</span></span> = <span class="hljs-title">separatedAmount</span>();</span><br><span class="hljs-function">    <span class="hljs-variable"><span class="hljs-keyword">else</span></span> &#123;</span><br><span class="hljs-function">      <span class="hljs-variable"><span class="hljs-keyword">if</span></span> (<span class="hljs-variable">isRetired</span>) <span class="hljs-variable"><span class="hljs-class">result</span></span> = <span class="hljs-title">retiredAmount</span>();</span><br><span class="hljs-function">      <span class="hljs-variable"><span class="hljs-keyword">else</span></span> <span class="hljs-variable"><span class="hljs-class">result</span></span> = <span class="hljs-title">normalPayAmount</span>();</span><br><span class="hljs-function">    &#125;</span><br><span class="hljs-function">  &#125;</span><br><span class="hljs-function">  <span class="hljs-variable">return</span> <span class="hljs-variable"><span class="hljs-class">result</span></span>;</span><br><span class="hljs-function">&#125;</span><br><span class="hljs-function"></span><br><span class="hljs-function"><span class="hljs-variable">function</span> <span class="hljs-title">getPayAmount</span>() &#123;</span><br><span class="hljs-function">  <span class="hljs-variable"><span class="hljs-keyword">if</span></span> (<span class="hljs-variable">isDead</span>) <span class="hljs-variable">return</span> <span class="hljs-title">deadAmount</span>();</span><br><span class="hljs-function">  <span class="hljs-variable"><span class="hljs-keyword">if</span></span> (<span class="hljs-variable">isSeparated</span>) <span class="hljs-variable">return</span> <span class="hljs-title">separatedAmount</span>();</span><br><span class="hljs-function">  <span class="hljs-variable"><span class="hljs-keyword">if</span></span> (<span class="hljs-variable">isRetired</span>) <span class="hljs-variable">return</span> <span class="hljs-title">retiredAmount</span>();</span><br><span class="hljs-function">  <span class="hljs-variable">return</span> <span class="hljs-title">normalPayAmount</span>();</span><br><span class="hljs-function">&#125;</span><br></code></pre></td></tr></table></figure>

<h3 id="åŠ¨æœº-2"><a href="#åŠ¨æœº-2" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>æ ¹æ®æˆ‘çš„ç»éªŒï¼Œæ¡ä»¶è¡¨è¾¾å¼é€šå¸¸æœ‰ä¸¤ç§é£æ ¼ã€‚ç¬¬ä¸€ç§é£æ ¼æ˜¯ï¼šä¸¤ä¸ªæ¡ä»¶åˆ†æ”¯éƒ½å±äºæ­£å¸¸è¡Œä¸ºã€‚ç¬¬äºŒç§é£æ ¼åˆ™æ˜¯ï¼šåªæœ‰ä¸€ä¸ªæ¡ä»¶åˆ†æ”¯æ˜¯æ­£å¸¸è¡Œä¸ºï¼Œå¦ä¸€ä¸ªåˆ†æ”¯åˆ™æ˜¯å¼‚å¸¸çš„æƒ…å†µã€‚</p>
<p>è¿™ä¸¤ç±»æ¡ä»¶è¡¨è¾¾å¼æœ‰ä¸åŒçš„ç”¨é€”ï¼Œè¿™ä¸€ç‚¹åº”è¯¥é€šè¿‡ä»£ç è¡¨ç°å‡ºæ¥ã€‚å¦‚æœä¸¤æ¡åˆ†æ”¯éƒ½æ˜¯æ­£å¸¸è¡Œä¸ºï¼Œå°±åº”è¯¥ä½¿ç”¨å½¢å¦‚ ifâ€¦elseâ€¦çš„æ¡ä»¶è¡¨è¾¾å¼ï¼›å¦‚æœæŸä¸ªæ¡ä»¶æå…¶ç½•è§ï¼Œå°±åº”è¯¥å•ç‹¬æ£€æŸ¥è¯¥æ¡ä»¶ï¼Œå¹¶åœ¨è¯¥æ¡ä»¶ä¸ºçœŸæ—¶ç«‹åˆ»ä»å‡½æ•°ä¸­è¿”å›ã€‚è¿™æ ·çš„å•ç‹¬æ£€æŸ¥å¸¸å¸¸è¢«ç§°ä¸ºâ€œå«è¯­å¥â€ï¼ˆguard clausesï¼‰ã€‚</p>
<p>ä»¥å«è¯­å¥å–ä»£åµŒå¥—æ¡ä»¶è¡¨è¾¾å¼çš„ç²¾é«“å°±æ˜¯ï¼šç»™æŸä¸€æ¡åˆ†æ”¯ä»¥ç‰¹åˆ«çš„é‡è§†ã€‚å¦‚æœä½¿ç”¨ if-then-else ç»“æ„ï¼Œä½ å¯¹ if åˆ†æ”¯å’Œ else åˆ†æ”¯çš„é‡è§†æ˜¯åŒç­‰çš„ã€‚è¿™æ ·çš„ä»£ç ç»“æ„ä¼ é€’ç»™é˜…è¯»è€…çš„æ¶ˆæ¯å°±æ˜¯ï¼šå„ä¸ªåˆ†æ”¯æœ‰åŒæ ·çš„é‡è¦æ€§ã€‚å«è¯­å¥å°±ä¸åŒäº†ï¼Œå®ƒå‘Šè¯‰é˜…è¯»è€…ï¼šâ€œè¿™ç§æƒ…å†µä¸æ˜¯æœ¬å‡½æ•°çš„æ ¸å¿ƒé€»è¾‘æ‰€å…³å¿ƒçš„ï¼Œå¦‚æœå®ƒçœŸå‘ç”Ÿäº†ï¼Œè¯·åšä¸€äº›å¿…è¦çš„æ•´ç†å·¥ä½œï¼Œç„¶åé€€å‡ºã€‚â€</p>
<p>â€œæ¯ä¸ªå‡½æ•°åªèƒ½æœ‰ä¸€ä¸ªå…¥å£å’Œä¸€ä¸ªå‡ºå£â€çš„è§‚å¿µï¼Œæ ¹æ·±è’‚å›ºäºæŸäº›ç¨‹åºå‘˜çš„è„‘æµ·é‡Œã€‚æˆ‘å‘ç°ï¼Œå½“æˆ‘å¤„ç†ä»–ä»¬ç¼–å†™çš„ä»£ç æ—¶ï¼Œç»å¸¸éœ€è¦ä½¿ç”¨ä»¥å«è¯­å¥å–ä»£åµŒå¥—æ¡ä»¶è¡¨è¾¾å¼ã€‚ç°ä»Šçš„ç¼–ç¨‹è¯­è¨€éƒ½ä¼šå¼ºåˆ¶ä¿è¯æ¯ä¸ªå‡½æ•°åªæœ‰ä¸€ä¸ªå…¥å£ï¼Œè‡³äºâ€œå•ä¸€å‡ºå£â€è§„åˆ™ï¼Œå…¶å®ä¸æ˜¯é‚£ä¹ˆæœ‰ç”¨ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œä¿æŒä»£ç æ¸…æ™°æ‰æ˜¯æœ€å…³é”®çš„ï¼šå¦‚æœå•ä¸€å‡ºå£èƒ½ä½¿è¿™ä¸ªå‡½æ•°æ›´æ¸…æ¥šæ˜“è¯»ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨å•ä¸€å‡ºå£ï¼›å¦åˆ™å°±ä¸å¿…è¿™ä¹ˆåšã€‚</p>
<h3 id="åšæ³•-2"><a href="#åšæ³•-2" class="headerlink" title="åšæ³•"></a>åšæ³•</h3><p>é€‰ä¸­æœ€å¤–å±‚éœ€è¦è¢«æ›¿æ¢çš„æ¡ä»¶é€»è¾‘ï¼Œå°†å…¶æ›¿æ¢ä¸ºå«è¯­å¥ã€‚</p>
<p>æµ‹è¯•ã€‚</p>
<p>æœ‰éœ€è¦çš„è¯ï¼Œé‡å¤ä¸Šè¿°æ­¥éª¤ã€‚</p>
<p>å¦‚æœæ‰€æœ‰å«è¯­å¥éƒ½å¼•å‘åŒæ ·çš„ç»“æœï¼Œå¯ä»¥ä½¿ç”¨åˆå¹¶æ¡ä»¶è¡¨è¾¾å¼ï¼ˆ263ï¼‰åˆå¹¶ä¹‹ã€‚</p>
<h3 id="èŒƒä¾‹-2"><a href="#èŒƒä¾‹-2" class="headerlink" title="èŒƒä¾‹"></a>èŒƒä¾‹</h3><p>ä¸‹é¢çš„ä»£ç ç”¨äºè®¡ç®—è¦æ”¯ä»˜ç»™å‘˜å·¥ï¼ˆemployeeï¼‰çš„å·¥èµ„ã€‚åªæœ‰è¿˜åœ¨å…¬å¸ä¸Šç­çš„å‘˜å·¥æ‰éœ€è¦æ”¯ä»˜å·¥èµ„ï¼Œæ‰€ä»¥è¿™ä¸ªå‡½æ•°éœ€è¦æ£€æŸ¥ä¸¤ç§â€œå‘˜å·¥å·²ç»ä¸åœ¨å…¬å¸ä¸Šç­â€çš„æƒ…å†µã€‚</p>
<figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs nim">function payAmount(employee) &#123;<br> <span class="hljs-keyword">let</span> <span class="hljs-built_in">result</span>;<br> <span class="hljs-keyword">if</span>(employee.isSeparated) &#123;<br>  <span class="hljs-built_in">result</span> = &#123;amount: <span class="hljs-number">0</span>, reasonCode:<span class="hljs-string">&quot;SEP&quot;</span>&#125;;<br> &#125;<br> <span class="hljs-keyword">else</span> &#123;<br>  <span class="hljs-keyword">if</span> (employee.isRetired) &#123;<br>   <span class="hljs-built_in">result</span> = &#123;amount: <span class="hljs-number">0</span>, reasonCode: <span class="hljs-string">&quot;RET&quot;</span>&#125;;<br>  &#125;<br>  <span class="hljs-keyword">else</span> &#123;<br>   // logic to compute amount<br>   lorem.ipsum(dolor.sitAmet);<span class="hljs-number">1</span><br>   consectetur(adipiscing).elit();<br>   sed.<span class="hljs-keyword">do</span>.eiusmod = tempor.incididunt.ut(labore) &amp;amp;&amp;amp; dolore(magna.aliqua);<br>   ut.enim.ad(minim.veniam);<br>   <span class="hljs-built_in">result</span> = someFinalComputation();<br>  &#125;<br> &#125;<br> <span class="hljs-keyword">return</span> <span class="hljs-built_in">result</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>åµŒå¥—çš„æ¡ä»¶é€»è¾‘è®©æˆ‘ä»¬çœ‹ä¸æ¸…ä»£ç çœŸå®çš„å«ä¹‰ã€‚åªæœ‰å½“å‰ä¸¤ä¸ªæ¡ä»¶è¡¨è¾¾å¼éƒ½ä¸ä¸ºçœŸçš„æ—¶å€™ï¼Œè¿™æ®µä»£ç æ‰çœŸæ­£å¼€å§‹å®ƒçš„ä¸»è¦å·¥ä½œã€‚æ‰€ä»¥ï¼Œå«è¯­å¥èƒ½è®©ä»£ç æ›´æ¸…æ™°åœ°é˜è¿°è‡ªå·±çš„æ„å›¾ã€‚</p>
<p>ä¸€å¦‚æ—¢å¾€åœ°ï¼Œæˆ‘å–œæ¬¢å°æ­¥å‰è¿›ï¼Œæ‰€ä»¥æˆ‘å…ˆå¤„ç†æœ€é¡¶ä¸Šçš„æ¡ä»¶é€»è¾‘ã€‚</p>
<figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs nim">function payAmount(employee) &#123;<br> <span class="hljs-keyword">let</span> <span class="hljs-built_in">result</span>;<br> <span class="hljs-keyword">if</span> (employee.isSeparated) <span class="hljs-keyword">return</span> &#123;amount: <span class="hljs-number">0</span>, reasonCode: <span class="hljs-string">&quot;SEP&quot;</span>&#125;;<br> <span class="hljs-keyword">if</span> (employee.isRetired) &#123;<br>  <span class="hljs-built_in">result</span> = &#123;amount: <span class="hljs-number">0</span>, reasonCode: <span class="hljs-string">&quot;RET&quot;</span>&#125;;<br> &#125;<br> <span class="hljs-keyword">else</span> &#123;<br>  // logic to compute amount<br>  lorem.ipsum(dolor.sitAmet);<br>  consectetur(adipiscing).elit();<br>  sed.<span class="hljs-keyword">do</span>.eiusmod = tempor.incididunt.ut(labore) &amp;amp;&amp;amp; dolore(magna.aliqua);<br>  ut.enim.ad(minim.veniam);<br>  <span class="hljs-built_in">result</span> = someFinalComputation();<br> &#125;<br> <span class="hljs-keyword">return</span> <span class="hljs-built_in">result</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>åšå®Œè¿™æ­¥ä¿®æ”¹ï¼Œæˆ‘æ‰§è¡Œæµ‹è¯•ï¼Œç„¶åç»§ç»­ä¸‹ä¸€æ­¥ã€‚</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">function payAmount(employee) &#123;<br> let result;<br> <span class="hljs-keyword">if</span> (employee.isSeparated) <span class="hljs-keyword">return</span> &#123;amount: <span class="hljs-number">0</span>, reasonCode: <span class="hljs-string">&quot;SEP&quot;</span>&#125;;<br> <span class="hljs-keyword">if</span> (employee.isRetired)   <span class="hljs-keyword">return</span> &#123;amount: <span class="hljs-number">0</span>, reasonCode: <span class="hljs-string">&quot;RET&quot;</span>&#125;;<br> <span class="hljs-comment">// logic to compute amount</span><br> lorem.ipsum(dolor.sitAmet);<br> consectetur(adipiscing).elit();<br> sed.<span class="hljs-keyword">do</span>.eiusmod = tempor.incididunt.ut(labore) &amp;amp;&amp;amp; dolore(magna.aliqua);<br> ut.enim.ad(minim.veniam);<br> result = someFinalComputation();<br> <span class="hljs-keyword">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æ­¤æ—¶ï¼Œresult å˜é‡å·²ç»æ²¡æœ‰ç”¨å¤„äº†ï¼Œæ‰€ä»¥æˆ‘æŠŠå®ƒåˆ æ‰ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">function payAmount(employee) &#123;<br> let result;<br> <span class="hljs-keyword">if</span> (employee.isSeparated) <span class="hljs-keyword">return</span> &#123;amount: <span class="hljs-number">0</span>, reasonCode: <span class="hljs-string">&quot;SEP&quot;</span>&#125;;<br> <span class="hljs-keyword">if</span> (employee.isRetired)   <span class="hljs-keyword">return</span> &#123;amount: <span class="hljs-number">0</span>, reasonCode: <span class="hljs-string">&quot;RET&quot;</span>&#125;;<br> <span class="hljs-comment">// logic to compute amount</span><br> lorem.ipsum(dolor.sitAmet);<br> consectetur(adipiscing).elit();<br> sed.<span class="hljs-keyword">do</span>.eiusmod = tempor.incididunt.ut(labore) &amp;amp;&amp;amp; dolore(magna.aliqua);<br> ut.enim.ad(minim.veniam);<br> <span class="hljs-keyword">return</span> someFinalComputation();<br>&#125;<br></code></pre></td></tr></table></figure>

<p>èƒ½å‡å°‘ä¸€ä¸ªå¯å˜å˜é‡æ€»æ˜¯å¥½çš„ã€‚</p>
<h3 id="èŒƒä¾‹ï¼šå°†æ¡ä»¶åè½¬"><a href="#èŒƒä¾‹ï¼šå°†æ¡ä»¶åè½¬" class="headerlink" title="èŒƒä¾‹ï¼šå°†æ¡ä»¶åè½¬"></a>èŒƒä¾‹ï¼šå°†æ¡ä»¶åè½¬</h3><p>å®¡é˜…æœ¬ä¹¦ç¬¬ 1 ç‰ˆçš„åˆç¨¿æ—¶ï¼ŒJoshua Kerievsky æŒ‡å‡ºï¼šæˆ‘ä»¬å¸¸å¸¸å¯ä»¥å°†æ¡ä»¶è¡¨è¾¾å¼åè½¬ï¼Œä»è€Œå®ç°ä»¥å«è¯­å¥å–ä»£åµŒå¥—æ¡ä»¶è¡¨è¾¾å¼ã€‚ä¸ºäº†æ‹¯æ•‘æˆ‘å¯æ€œçš„æƒ³è±¡åŠ›ï¼Œä»–è¿˜å¥½å¿ƒå¸®æˆ‘æƒ³äº†ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">adjustedCapital</span>(anInstrument) &#123;<br> let result = 0;<br> if (anInstrument.capital &gt; 0) &#123;<br>  if (anInstrument.interestRate &gt; 0 &amp;amp;&amp;amp; anInstrument.duration &gt; 0) &#123;<br>   result = (anInstrument.income / anInstrument.duration) * anInstrument.adjustmentFactor;<br>  &#125;<br> &#125;<br> <span class="hljs-keyword">return</span> <span class="hljs-type">result</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>åŒæ ·åœ°ï¼Œæˆ‘é€ä¸€è¿›è¡Œæ›¿æ¢ã€‚ä¸è¿‡è¿™æ¬¡åœ¨æ’å…¥å«è¯­å¥æ—¶ï¼Œæˆ‘éœ€è¦å°†ç›¸åº”çš„æ¡ä»¶åè½¬è¿‡æ¥ï¼š</p>
<figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs nim">function adjustedCapital(anInstrument) &#123;<br> <span class="hljs-keyword">let</span> <span class="hljs-built_in">result</span> = <span class="hljs-number">0</span>;<br> <span class="hljs-keyword">if</span> (anInstrument.capital &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">result</span>;<br> <span class="hljs-keyword">if</span> (anInstrument.interestRate &gt; <span class="hljs-number">0</span> &amp;amp;&amp;amp; anInstrument.duration &gt; <span class="hljs-number">0</span>) &#123;<br>  <span class="hljs-built_in">result</span> = (anInstrument.income / anInstrument.duration) * anInstrument.adjustmentFactor;<br> &#125;<br> <span class="hljs-keyword">return</span> <span class="hljs-built_in">result</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ä¸‹ä¸€ä¸ªæ¡ä»¶ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œæ‰€ä»¥æˆ‘åˆ†ä¸¤æ­¥è¿›è¡Œåè½¬ã€‚é¦–å…ˆåŠ å…¥ä¸€ä¸ªé€»è¾‘éæ“ä½œï¼š</p>
<figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nim">function adjustedCapital(anInstrument) &#123;<br> <span class="hljs-keyword">let</span> <span class="hljs-built_in">result</span> = <span class="hljs-number">0</span>;<br> <span class="hljs-keyword">if</span> (anInstrument.capital &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">result</span>;<br> <span class="hljs-keyword">if</span> (!(anInstrument.interestRate &gt; <span class="hljs-number">0</span> &amp;amp;&amp;amp; anInstrument.duration &gt; <span class="hljs-number">0</span>)) <span class="hljs-keyword">return</span> <span class="hljs-built_in">result</span>;<br> <span class="hljs-built_in">result</span> = (anInstrument.income / anInstrument.duration) * anInstrument.adjustmentFactor;<br> <span class="hljs-keyword">return</span> <span class="hljs-built_in">result</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ä½†æ˜¯åœ¨è¿™æ ·çš„æ¡ä»¶è¡¨è¾¾å¼ä¸­ç•™ä¸‹ä¸€ä¸ªé€»è¾‘éï¼Œä¼šæŠŠæˆ‘çš„è„‘è¢‹æ‹§æˆä¸€å›¢ä¹±éº»ï¼Œæ‰€ä»¥æˆ‘æŠŠå®ƒç®€åŒ–æˆä¸‹é¢è¿™æ ·ï¼š</p>
<figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nim">  function adjustedCapital(anInstrument) &#123;<br> <span class="hljs-keyword">let</span> <span class="hljs-built_in">result</span> = <span class="hljs-number">0</span>;<br> <span class="hljs-keyword">if</span> (anInstrument.capital &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">result</span>;<br> <span class="hljs-keyword">if</span> (anInstrument.interestRate &lt;= <span class="hljs-number">0</span> || anInstrument.duration &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">result</span>;<br> <span class="hljs-built_in">result</span> = (anInstrument.income / anInstrument.duration) * anInstrument.adjustmentFactor;<br> <span class="hljs-keyword">return</span> <span class="hljs-built_in">result</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¿™ä¸¤è¡Œé€»è¾‘è¯­å¥å¼•å‘çš„ç»“æœä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘å¯ä»¥ç”¨åˆå¹¶æ¡ä»¶è¡¨è¾¾å¼ï¼ˆ263ï¼‰å°†å…¶åˆå¹¶ã€‚</p>
<figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs nim">function adjustedCapital(anInstrument) &#123;<br> <span class="hljs-keyword">let</span> <span class="hljs-built_in">result</span> = <span class="hljs-number">0</span>;<br> <span class="hljs-keyword">if</span> (   anInstrument.capital      &lt;= <span class="hljs-number">0</span><br>   || anInstrument.interestRate &lt;= <span class="hljs-number">0</span><br>   || anInstrument.duration     &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">result</span>;<br> <span class="hljs-built_in">result</span> = (anInstrument.income / anInstrument.duration) * anInstrument.adjustmentFactor;<br> <span class="hljs-keyword">return</span> <span class="hljs-built_in">result</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æ­¤æ—¶ result å˜é‡åšäº†ä¸¤ä»¶äº‹ï¼šä¸€å¼€å§‹æˆ‘æŠŠå®ƒè®¾ä¸º 0ï¼Œä»£è¡¨å«è¯­å¥è¢«è§¦å‘æ—¶çš„è¿”å›å€¼ï¼›ç„¶ååˆç”¨æœ€ç»ˆè®¡ç®—çš„ç»“æœç»™å®ƒèµ‹å€¼ã€‚æˆ‘å¯ä»¥å½»åº•ç§»é™¤è¿™ä¸ªå˜é‡ï¼Œé¿å…ç”¨ä¸€ä¸ªå˜é‡æ‰¿æ‹…ä¸¤é‡è´£ä»»ï¼Œè€Œä¸”åˆå‡å°‘äº†ä¸€ä¸ªå¯å˜å˜é‡ã€‚</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">adjustedCapital</span>(anInstrument) &#123;<br> if (   anInstrument.capital     &lt;= 0<br>   || anInstrument.interestRate &lt;= 0<br>   || anInstrument.duration   &lt;= 0) <span class="hljs-keyword">return</span> <span class="hljs-type">0</span>;<br> <span class="hljs-keyword">return</span> (anInstrument.income / anInstrument.duration) * anInstrument.adjustmentFactor;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>1 â€œlorem.ipsumâ€¦â€¦â€æ˜¯ä¸€ç¯‡å¸¸è§äºæ’ç‰ˆè®¾è®¡é¢†åŸŸçš„æ–‡ç« ï¼Œå…¶å†…å®¹ä¸ºä¸å…·å¯è¯»æ€§çš„å­—ç¬¦ç»„åˆï¼Œç›®çš„æ˜¯ä½¿é˜…è¯»è€…åªä¸“æ³¨äºè§‚å¯Ÿæ®µè½çš„å­—å‹å’Œç‰ˆå‹ã€‚â€”â€”è¯‘è€…æ³¨</p>
<h2 id="10-4-ä»¥å¤šæ€å–ä»£æ¡ä»¶è¡¨è¾¾å¼ï¼ˆReplace-Conditional-with-Polymorphismï¼‰"><a href="#10-4-ä»¥å¤šæ€å–ä»£æ¡ä»¶è¡¨è¾¾å¼ï¼ˆReplace-Conditional-with-Polymorphismï¼‰" class="headerlink" title="10.4 ä»¥å¤šæ€å–ä»£æ¡ä»¶è¡¨è¾¾å¼ï¼ˆReplace Conditional with Polymorphismï¼‰"></a>10.4 ä»¥å¤šæ€å–ä»£æ¡ä»¶è¡¨è¾¾å¼ï¼ˆReplace Conditional with Polymorphismï¼‰</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">switch (bird.type) &#123;<br> case <span class="hljs-string">&#x27;EuropeanSwallow&#x27;</span>:<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;average&quot;</span>;<br> case <span class="hljs-string">&#x27;AfricanSwallow&#x27;</span>:<br>  <span class="hljs-keyword">return</span> (bird.numberOfCoconuts &gt; <span class="hljs-number">2</span>) ? <span class="hljs-string">&quot;tired&quot;</span> : <span class="hljs-string">&quot;average&quot;</span>;<br> case <span class="hljs-string">&#x27;NorwegianBlueParrot&#x27;</span>:<br>  <span class="hljs-keyword">return</span> (bird.voltage &gt; <span class="hljs-number">100</span>) ? <span class="hljs-string">&quot;scorched&quot;</span> : <span class="hljs-string">&quot;beautiful&quot;</span>;<br> default:<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;unknown&quot;</span>;<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">EuropeanSwallow</span> &#123;<br> <span class="hljs-keyword">get</span> plumage() &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;average&quot;</span>;<br> &#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AfricanSwallow</span> &#123;<br> <span class="hljs-keyword">get</span> plumage() &#123;<br>   <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.numberOfCoconuts &gt; <span class="hljs-number">2</span>) ? <span class="hljs-string">&quot;tired&quot;</span> : <span class="hljs-string">&quot;average&quot;</span>;<br> &#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">NorwegianBlueParrot</span> &#123;<br> <span class="hljs-keyword">get</span> plumage() &#123;<br>   <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.voltage &gt; <span class="hljs-number">100</span>) ? <span class="hljs-string">&quot;scorched&quot;</span> : <span class="hljs-string">&quot;beautiful&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="åŠ¨æœº-3"><a href="#åŠ¨æœº-3" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>å¤æ‚çš„æ¡ä»¶é€»è¾‘æ˜¯ç¼–ç¨‹ä¸­æœ€éš¾ç†è§£çš„ä¸œè¥¿ä¹‹ä¸€ï¼Œå› æ­¤æˆ‘ä¸€ç›´åœ¨å¯»æ±‚ç»™æ¡ä»¶é€»è¾‘æ·»åŠ ç»“æ„ã€‚å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘å‘ç°å¯ä»¥å°†æ¡ä»¶é€»è¾‘æ‹†åˆ†åˆ°ä¸åŒçš„åœºæ™¯ï¼ˆæˆ–è€…å«é«˜é˜¶ç”¨ä¾‹ï¼‰ï¼Œä»è€Œæ‹†è§£å¤æ‚çš„æ¡ä»¶é€»è¾‘ã€‚è¿™ç§æ‹†åˆ†æœ‰æ—¶ç”¨æ¡ä»¶é€»è¾‘æœ¬èº«çš„ç»“æ„å°±è¶³ä»¥è¡¨è¾¾ï¼Œä½†ä½¿ç”¨ç±»å’Œå¤šæ€èƒ½æŠŠé€»è¾‘çš„æ‹†åˆ†è¡¨è¿°å¾—æ›´æ¸…æ™°ã€‚</p>
<p>ä¸€ä¸ªå¸¸è§çš„åœºæ™¯æ˜¯ï¼šæˆ‘å¯ä»¥æ„é€ ä¸€ç»„ç±»å‹ï¼Œæ¯ä¸ªç±»å‹å¤„ç†å„è‡ªçš„ä¸€ç§æ¡ä»¶é€»è¾‘ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä¼šæ³¨æ„åˆ°ï¼Œå›¾ä¹¦ã€éŸ³ä¹ã€é£Ÿå“çš„å¤„ç†æ–¹å¼ä¸åŒï¼Œè¿™æ˜¯å› ä¸ºå®ƒä»¬åˆ†å±ä¸åŒç±»å‹çš„å•†å“ã€‚æœ€æ˜æ˜¾çš„å¾å…†å°±æ˜¯æœ‰å¥½å‡ ä¸ªå‡½æ•°éƒ½æœ‰åŸºäºç±»å‹ä»£ç çš„ switch è¯­å¥ã€‚è‹¥æœçœŸå¦‚æ­¤ï¼Œæˆ‘å°±å¯ä»¥é’ˆå¯¹ switch è¯­å¥ä¸­çš„æ¯ç§åˆ†æ”¯é€»è¾‘åˆ›å»ºä¸€ä¸ªç±»ï¼Œç”¨å¤šæ€æ¥æ‰¿è½½å„ä¸ªç±»å‹ç‰¹æœ‰çš„è¡Œä¸ºï¼Œä»è€Œå»é™¤é‡å¤çš„åˆ†æ”¯é€»è¾‘ã€‚</p>
<p>å¦ä¸€ç§æƒ…å†µæ˜¯ï¼šæœ‰ä¸€ä¸ªåŸºç¡€é€»è¾‘ï¼Œåœ¨å…¶ä¸Šåˆæœ‰ä¸€äº›å˜ä½“ã€‚åŸºç¡€é€»è¾‘å¯èƒ½æ˜¯æœ€å¸¸ç”¨çš„ï¼Œä¹Ÿå¯èƒ½æ˜¯æœ€ç®€å•çš„ã€‚æˆ‘å¯ä»¥æŠŠåŸºç¡€é€»è¾‘æ”¾è¿›è¶…ç±»ï¼Œè¿™æ ·æˆ‘å¯ä»¥é¦–å…ˆç†è§£è¿™éƒ¨åˆ†é€»è¾‘ï¼Œæš‚æ—¶ä¸ç®¡å„ç§å˜ä½“ï¼Œç„¶åæˆ‘å¯ä»¥æŠŠæ¯ç§å˜ä½“é€»è¾‘å•ç‹¬æ”¾è¿›ä¸€ä¸ªå­ç±»ï¼Œå…¶ä¸­çš„ä»£ç ç€é‡å¼ºè°ƒä¸åŸºç¡€é€»è¾‘çš„å·®å¼‚ã€‚</p>
<p>å¤šæ€æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„å…³é”®ç‰¹æ€§ä¹‹ä¸€ã€‚è·Ÿå…¶ä»–ä¸€åˆ‡æœ‰ç”¨çš„ç‰¹æ€§ä¸€æ ·ï¼Œå®ƒä¹Ÿå¾ˆå®¹æ˜“è¢«æ»¥ç”¨ã€‚æˆ‘æ›¾ç»é‡åˆ°æœ‰äººäº‰è®ºè¯´æ‰€æœ‰æ¡ä»¶é€»è¾‘éƒ½åº”è¯¥ç”¨å¤šæ€å–ä»£ã€‚æˆ‘ä¸èµåŒè¿™ç§è§‚ç‚¹ã€‚æˆ‘çš„å¤§éƒ¨åˆ†æ¡ä»¶é€»è¾‘åªç”¨åˆ°äº†åŸºæœ¬çš„æ¡ä»¶è¯­å¥â€”â€”if&#x2F;else å’Œ switch&#x2F;caseï¼Œå¹¶ä¸éœ€è¦åŠ³å¸ˆåŠ¨ä¼—åœ°å¼•å…¥å¤šæ€ã€‚ä½†å¦‚æœå‘ç°å¦‚å‰æ‰€è¿°çš„å¤æ‚æ¡ä»¶é€»è¾‘ï¼Œå¤šæ€æ˜¯æ”¹å–„è¿™ç§æƒ…å†µçš„æœ‰åŠ›å·¥å…·ã€‚</p>
<h3 id="åšæ³•-3"><a href="#åšæ³•-3" class="headerlink" title="åšæ³•"></a>åšæ³•</h3><p>å¦‚æœç°æœ‰çš„ç±»å°šä¸å…·å¤‡å¤šæ€è¡Œä¸ºï¼Œå°±ç”¨å·¥å‚å‡½æ•°åˆ›å»ºä¹‹ï¼Œä»¤å·¥å‚å‡½æ•°è¿”å›æ°å½“çš„å¯¹è±¡å®ä¾‹ã€‚</p>
<p>åœ¨è°ƒç”¨æ–¹ä»£ç ä¸­ä½¿ç”¨å·¥å‚å‡½æ•°è·å¾—å¯¹è±¡å®ä¾‹ã€‚</p>
<p>å°†å¸¦æœ‰æ¡ä»¶é€»è¾‘çš„å‡½æ•°ç§»åˆ°è¶…ç±»ä¸­ã€‚</p>
<p>å¦‚æœæ¡ä»¶é€»è¾‘è¿˜æœªæç‚¼è‡³ç‹¬ç«‹çš„å‡½æ•°ï¼Œé¦–å…ˆå¯¹å…¶ä½¿ç”¨æç‚¼å‡½æ•°ï¼ˆ106ï¼‰ã€‚</p>
<p>ä»»é€‰ä¸€ä¸ªå­ç±»ï¼Œåœ¨å…¶ä¸­å»ºç«‹ä¸€ä¸ªå‡½æ•°ï¼Œä½¿ä¹‹è¦†å†™è¶…ç±»ä¸­å®¹çº³æ¡ä»¶è¡¨è¾¾å¼çš„é‚£ä¸ªå‡½æ•°ã€‚å°†ä¸è¯¥å­ç±»ç›¸å…³çš„æ¡ä»¶è¡¨è¾¾å¼åˆ†æ”¯å¤åˆ¶åˆ°æ–°å‡½æ•°ä¸­ï¼Œå¹¶å¯¹å®ƒè¿›è¡Œé€‚å½“è°ƒæ•´ã€‚</p>
<p>é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œå¤„ç†å…¶ä»–æ¡ä»¶åˆ†æ”¯ã€‚</p>
<p>åœ¨è¶…ç±»å‡½æ•°ä¸­ä¿ç•™é»˜è®¤æƒ…å†µçš„é€»è¾‘ã€‚æˆ–è€…ï¼Œå¦‚æœè¶…ç±»åº”è¯¥æ˜¯æŠ½è±¡çš„ï¼Œå°±æŠŠè¯¥å‡½æ•°å£°æ˜ä¸º abstractï¼Œæˆ–åœ¨å…¶ä¸­ç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œè¡¨æ˜è®¡ç®—è´£ä»»éƒ½åœ¨å­ç±»ä¸­ã€‚</p>
<h3 id="èŒƒä¾‹-3"><a href="#èŒƒä¾‹-3" class="headerlink" title="èŒƒä¾‹"></a>èŒƒä¾‹</h3><p>æˆ‘çš„æœ‹å‹æœ‰ä¸€ç¾¤é¸Ÿå„¿ï¼Œä»–æƒ³çŸ¥é“è¿™äº›é¸Ÿé£å¾—æœ‰å¤šå¿«ï¼Œä»¥åŠå®ƒä»¬çš„ç¾½æ¯›æ˜¯ä»€ä¹ˆæ ·çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å†™äº†ä¸€å°æ®µç¨‹åºæ¥åˆ¤æ–­è¿™äº›ä¿¡æ¯ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">plumages</span>(<span class="hljs-params">birds</span>) &#123;<br> <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(birds.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">b</span> =&gt;</span> [b.<span class="hljs-property">name</span>, <span class="hljs-title function_">plumage</span>(b)]));<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">speeds</span>(<span class="hljs-params">birds</span>) &#123;<br> <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(birds.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">b</span> =&gt;</span> [b.<span class="hljs-property">name</span>, <span class="hljs-title function_">airSpeedVelocity</span>(b)]));<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">plumage</span>(<span class="hljs-params">bird</span>) &#123;<br> <span class="hljs-keyword">switch</span> (bird.<span class="hljs-property">type</span>) &#123;<br> <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;EuropeanSwallow&#x27;</span>:<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;average&quot;</span>;<br> <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;AfricanSwallow&#x27;</span>:<br>  <span class="hljs-keyword">return</span> (bird.<span class="hljs-property">numberOfCoconuts</span> &gt; <span class="hljs-number">2</span>) ? <span class="hljs-string">&quot;tired&quot;</span> : <span class="hljs-string">&quot;average&quot;</span>;<br> <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;NorwegianBlueParrot&#x27;</span>:<br>  <span class="hljs-keyword">return</span> (bird.<span class="hljs-property">voltage</span> &gt; <span class="hljs-number">100</span>) ? <span class="hljs-string">&quot;scorched&quot;</span> : <span class="hljs-string">&quot;beautiful&quot;</span>;<br> <span class="hljs-attr">default</span>:<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;unknown&quot;</span>;<br> &#125;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">airSpeedVelocity</span>(<span class="hljs-params">bird</span>) &#123;<br> <span class="hljs-keyword">switch</span> (bird.<span class="hljs-property">type</span>) &#123;<br> <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;EuropeanSwallow&#x27;</span>:<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">35</span>;<br> <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;AfricanSwallow&#x27;</span>:<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">40</span> - <span class="hljs-number">2</span> * bird.<span class="hljs-property">numberOfCoconuts</span>;<br> <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;NorwegianBlueParrot&#x27;</span>:<br>  <span class="hljs-keyword">return</span> (bird.<span class="hljs-property">isNailed</span>) ? <span class="hljs-number">0</span> : <span class="hljs-number">10</span> + bird.<span class="hljs-property">voltage</span> / <span class="hljs-number">10</span>;<br> <span class="hljs-attr">default</span>:<br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br> &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æœ‰ä¸¤ä¸ªä¸åŒçš„æ“ä½œï¼Œå…¶è¡Œä¸ºéƒ½éšç€â€œé¸Ÿçš„ç±»å‹â€å‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤å¯ä»¥åˆ›å»ºå‡ºå¯¹åº”çš„ç±»ï¼Œç”¨å¤šæ€æ¥å¤„ç†å„ç±»å‹ç‰¹æœ‰çš„è¡Œä¸ºã€‚</p>
<p>æˆ‘å…ˆå¯¹ airSpeedVelocity å’Œ plumage ä¸¤ä¸ªå‡½æ•°ä½¿ç”¨å‡½æ•°ç»„åˆæˆç±»ï¼ˆ144ï¼‰ã€‚</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">function plumage(bird) &#123;<br> <span class="hljs-keyword">return</span> new Bird(bird).plumage;<br>&#125;<br><br>function airSpeedVelocity(bird) &#123;<br> <span class="hljs-keyword">return</span> new Bird(bird).airSpeedVelocity;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> &#123;<br> <span class="hljs-keyword">constructor</span>(birdObject) &#123;<br>  Object.assign(<span class="hljs-keyword">this</span>, birdObject);<br> &#125;<br> <span class="hljs-keyword">get</span> plumage() &#123;<br>  switch (<span class="hljs-keyword">this</span>.type) &#123;<br>  case <span class="hljs-string">&#x27;EuropeanSwallow&#x27;</span>:<br>   <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;average&quot;</span>;<br>  case <span class="hljs-string">&#x27;AfricanSwallow&#x27;</span>:<br>   <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.numberOfCoconuts &gt; <span class="hljs-number">2</span>) ? <span class="hljs-string">&quot;tired&quot;</span> : <span class="hljs-string">&quot;average&quot;</span>;<br>  case <span class="hljs-string">&#x27;NorwegianBlueParrot&#x27;</span>:<br>   <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.voltage &gt; <span class="hljs-number">100</span>) ? <span class="hljs-string">&quot;scorched&quot;</span> : <span class="hljs-string">&quot;beautiful&quot;</span>;<br>  default:<br>   <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;unknown&quot;</span>;<br>  &#125;<br> &#125;<br> <span class="hljs-keyword">get</span> airSpeedVelocity() &#123;<br>  switch (<span class="hljs-keyword">this</span>.type) &#123;<br>  case <span class="hljs-string">&#x27;EuropeanSwallow&#x27;</span>:<br>   <span class="hljs-keyword">return</span> <span class="hljs-number">35</span>;<br>  case <span class="hljs-string">&#x27;AfricanSwallow&#x27;</span>:<br>   <span class="hljs-keyword">return</span> <span class="hljs-number">40</span> - <span class="hljs-number">2</span> * <span class="hljs-keyword">this</span>.numberOfCoconuts;<br>  case <span class="hljs-string">&#x27;NorwegianBlueParrot&#x27;</span>:<br>   <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.isNailed) ? <span class="hljs-number">0</span> : <span class="hljs-number">10</span> + <span class="hljs-keyword">this</span>.voltage / <span class="hljs-number">10</span>;<br>  default:<br>   <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>  &#125;<br> &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç„¶åé’ˆå¯¹æ¯ç§é¸Ÿåˆ›å»ºä¸€ä¸ªå­ç±»ï¼Œç”¨ä¸€ä¸ªå·¥å‚å‡½æ•°æ¥å®ä¾‹åŒ–åˆé€‚çš„å­ç±»å¯¹è±¡ã€‚</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs scala">function plumage(bird) &#123;<br>  <span class="hljs-keyword">return</span> createBird(bird).plumage;<br>&#125;<br><br>function airSpeedVelocity(bird) &#123;<br>  <span class="hljs-keyword">return</span> createBird(bird).airSpeedVelocity;<br>&#125;<br><br>function createBird(bird) &#123;<br>  switch (bird.<span class="hljs-keyword">type</span>) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;EuropeanSwallow&quot;</span>:<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-type">EuropeanSwallow</span>(bird);<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;AfricanSwallow&quot;</span>:<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-type">AfricanSwallow</span>(bird);<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;NorweigianBlueParrot&quot;</span>:<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-type">NorwegianBlueParrot</span>(bird);<br>    <span class="hljs-keyword">default</span>:<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-type">Bird</span>(bird);<br>  &#125;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EuropeanSwallow</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Bird</span> </span>&#123;&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AfricanSwallow</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Bird</span> </span>&#123;&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NorwegianBlueParrot</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Bird</span> </span>&#123;&#125;<br></code></pre></td></tr></table></figure>

<p>ç°åœ¨æˆ‘å·²ç»æœ‰äº†éœ€è¦çš„ç±»ç»“æ„ï¼Œå¯ä»¥å¤„ç†ä¸¤ä¸ªæ¡ä»¶é€»è¾‘äº†ã€‚å…ˆä» plumage å‡½æ•°å¼€å§‹ï¼Œæˆ‘ä» switch è¯­å¥ä¸­é€‰ä¸€ä¸ªåˆ†æ”¯ï¼Œåœ¨é€‚å½“çš„å­ç±»ä¸­è¦†å†™è¿™ä¸ªé€»è¾‘ã€‚</p>
<p><strong>class EuropeanSwallowâ€¦</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">get</span> <span class="hljs-title">plumage</span>()</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;average&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>class Birdâ€¦</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">get</span> <span class="hljs-title">plumage</span>()</span> &#123;<br> <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">this</span>.type) &#123;<br> <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;EuropeanSwallow&#x27;</span>:<br>  <span class="hljs-keyword">throw</span> <span class="hljs-string">&quot;oops&quot;</span>;<br> <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;AfricanSwallow&#x27;</span>:<br>  <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.numberOfCoconuts &gt; <span class="hljs-number">2</span>) ? <span class="hljs-string">&quot;tired&quot;</span> : <span class="hljs-string">&quot;average&quot;</span>;<br> <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;NorwegianBlueParrot&#x27;</span>:<br>  <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.voltage &gt; <span class="hljs-number">100</span>) ? <span class="hljs-string">&quot;scorched&quot;</span> : <span class="hljs-string">&quot;beautiful&quot;</span>;<br> <span class="hljs-literal">default</span>:<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;unknown&quot;</span>;<br> &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>åœ¨è¶…ç±»ä¸­ï¼Œæˆ‘æŠŠå¯¹åº”çš„é€»è¾‘åˆ†æ”¯æ”¹ä¸ºæŠ›å‡ºå¼‚å¸¸ï¼Œå› ä¸ºæˆ‘æ€»æ˜¯åæ‰§åœ°æ‹…å¿ƒå‡ºé”™ã€‚</p>
<p>æ­¤æ—¶æˆ‘å°±å¯ä»¥ç¼–è¯‘å¹¶æµ‹è¯•ã€‚å¦‚æœä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œæˆ‘å¯ä»¥æ¥ç€å¤„ç†ä¸‹ä¸€ä¸ªåˆ†æ”¯ã€‚</p>
<p><strong>class AfricanSwallowâ€¦</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">get</span> <span class="hljs-title">plumage</span>()</span> &#123;<br>   <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.numberOfCoconuts &gt; <span class="hljs-number">2</span>) ? <span class="hljs-string">&quot;tired&quot;</span> : <span class="hljs-string">&quot;average&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç„¶åæ˜¯æŒªå¨è“é¹¦é¹‰ï¼ˆNorwegian Blueï¼‰çš„åˆ†æ”¯ã€‚</p>
<p><strong>class NorwegianBlueParrotâ€¦</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">get</span> <span class="hljs-title">plumage</span>()</span> &#123;<br>   <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.voltage &gt;<span class="hljs-number">100</span>) ? <span class="hljs-string">&quot;scorched&quot;</span> : <span class="hljs-string">&quot;beautiful&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¶…ç±»å‡½æ•°ä¿ç•™ä¸‹æ¥å¤„ç†é»˜è®¤æƒ…å†µã€‚</p>
<p><strong>class Birdâ€¦</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">get</span> <span class="hljs-title">plumage</span>()</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;unknown&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>airSpeedVelocity ä¹Ÿå¦‚æ³•ç‚®åˆ¶ã€‚å®Œæˆä»¥åï¼Œä»£ç å¤§è‡´å¦‚ä¸‹ï¼ˆæˆ‘è¿˜å¯¹é¡¶å±‚çš„ airSpeedVelocity å’Œ plumage å‡½æ•°åšäº†å†…è”å¤„ç†ï¼‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">plumages</span>(<span class="hljs-params">birds</span>) &#123;<br> <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(birds<br>         .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">b</span> =&gt;</span> <span class="hljs-title function_">createBird</span>(b))<br>         .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">bird</span> =&gt;</span> [bird.<span class="hljs-property">name</span>, bird.<span class="hljs-property">plumage</span>]));<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">speeds</span>(<span class="hljs-params">birds</span>) &#123;<br> <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(birds<br>         .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">b</span> =&gt;</span> <span class="hljs-title function_">createBird</span>(b))<br>         .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">bird</span> =&gt;</span> [bird.<span class="hljs-property">name</span>, bird.<span class="hljs-property">airSpeedVelocity</span>]));<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">createBird</span>(<span class="hljs-params">bird</span>) &#123;<br> <span class="hljs-keyword">switch</span> (bird.<span class="hljs-property">type</span>) &#123;<br> <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;EuropeanSwallow&#x27;</span>:<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">EuropeanSwallow</span>(bird);<br> <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;AfricanSwallow&#x27;</span>:<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AfricanSwallow</span>(bird);<br> <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;NorwegianBlueParrot&#x27;</span>:<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NorwegianBlueParrot</span>(bird);<br> <span class="hljs-attr">default</span>:<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bird</span>(bird);<br> &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> &#123;<br> <span class="hljs-title function_">constructor</span>(<span class="hljs-params">birdObject</span>) &#123;<br>  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-variable language_">this</span>, birdObject);<br> &#125;<br> <span class="hljs-keyword">get</span> <span class="hljs-title function_">plumage</span>() &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;unknown&quot;</span>;<br> &#125;<br> <span class="hljs-keyword">get</span> <span class="hljs-title function_">airSpeedVelocity</span>() &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br> &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">EuropeanSwallow</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Bird</span> &#123;<br> <span class="hljs-keyword">get</span> <span class="hljs-title function_">plumage</span>() &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;average&quot;</span>;<br> &#125;<br> <span class="hljs-keyword">get</span> <span class="hljs-title function_">airSpeedVelocity</span>() &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">35</span>;<br> &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AfricanSwallow</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Bird</span> &#123;<br> <span class="hljs-keyword">get</span> <span class="hljs-title function_">plumage</span>() &#123;<br>  <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">numberOfCoconuts</span> &gt; <span class="hljs-number">2</span>) ? <span class="hljs-string">&quot;tired&quot;</span> : <span class="hljs-string">&quot;average&quot;</span>;<br> &#125;<br> <span class="hljs-keyword">get</span> <span class="hljs-title function_">airSpeedVelocity</span>() &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">40</span> - <span class="hljs-number">2</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">numberOfCoconuts</span>;<br> &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">NorwegianBlueParrot</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Bird</span> &#123;<br> <span class="hljs-keyword">get</span> <span class="hljs-title function_">plumage</span>() &#123;<br>  <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">voltage</span> &gt; <span class="hljs-number">100</span>) ? <span class="hljs-string">&quot;scorched&quot;</span> : <span class="hljs-string">&quot;beautiful&quot;</span>;<br> &#125;<br> <span class="hljs-keyword">get</span> <span class="hljs-title function_">airSpeedVelocity</span>() &#123;<br>  <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isNailed</span>) ? <span class="hljs-number">0</span> : <span class="hljs-number">10</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">voltage</span> / <span class="hljs-number">10</span>;<br> &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>çœ‹ç€æœ€ç»ˆçš„ä»£ç ï¼Œå¯ä»¥çœ‹å‡º Bird è¶…ç±»å¹¶ä¸æ˜¯å¿…éœ€çš„ã€‚åœ¨ JavaScript ä¸­ï¼Œå¤šæ€ä¸ä¸€å®šéœ€è¦ç±»å‹å±‚çº§ï¼Œåªè¦å¯¹è±¡å®ç°äº†é€‚å½“çš„å‡½æ•°å°±è¡Œã€‚ä½†åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘æ„¿æ„ä¿ç•™è¿™ä¸ªä¸å¿…è¦çš„è¶…ç±»ï¼Œå› ä¸ºå®ƒèƒ½å¸®åŠ©é˜é‡Šå„ä¸ªå­ç±»ä¸é—®é¢˜åŸŸä¹‹é—´çš„å…³ç³»ã€‚</p>
<h3 id="èŒƒä¾‹ï¼šç”¨å¤šæ€å¤„ç†å˜ä½“é€»è¾‘"><a href="#èŒƒä¾‹ï¼šç”¨å¤šæ€å¤„ç†å˜ä½“é€»è¾‘" class="headerlink" title="èŒƒä¾‹ï¼šç”¨å¤šæ€å¤„ç†å˜ä½“é€»è¾‘"></a>èŒƒä¾‹ï¼šç”¨å¤šæ€å¤„ç†å˜ä½“é€»è¾‘</h3><p>åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œâ€œé¸Ÿâ€çš„ç±»å‹ä½“ç³»æ˜¯ä¸€ä¸ªæ¸…æ™°çš„æ³›åŒ–ä½“ç³»ï¼šè¶…ç±»æ˜¯æŠ½è±¡çš„â€œé¸Ÿâ€ï¼Œå­ç±»æ˜¯å„ç§å…·ä½“çš„é¸Ÿã€‚è¿™æ˜¯æ•™ç§‘ä¹¦ï¼ˆåŒ…æ‹¬æˆ‘å†™çš„ä¹¦ï¼‰ä¸­ç»å¸¸è®¨è®ºçš„ç»§æ‰¿å’Œå¤šæ€ï¼Œä½†å¹¶ä¸æ˜¯å®è·µä¸­ä½¿ç”¨ç»§æ‰¿çš„å”¯ä¸€æ–¹å¼ã€‚å®é™…ä¸Šï¼Œè¿™ç§æ–¹å¼å¾ˆå¯èƒ½ä¸æ˜¯æœ€å¸¸ç”¨æˆ–æœ€å¥½çš„æ–¹å¼ã€‚å¦ä¸€ç§ä½¿ç”¨ç»§æ‰¿çš„æƒ…å†µæ˜¯ï¼šæˆ‘æƒ³è¡¨è¾¾æŸä¸ªå¯¹è±¡ä¸å¦ä¸€ä¸ªå¯¹è±¡å¤§ä½“ç±»ä¼¼ï¼Œä½†åˆæœ‰ä¸€äº›ä¸åŒä¹‹å¤„ã€‚</p>
<p>ä¸‹é¢æœ‰ä¸€ä¸ªè¿™æ ·çš„ä¾‹å­ï¼šæœ‰ä¸€å®¶è¯„çº§æœºæ„ï¼Œè¦å¯¹è¿œæ´‹èˆªèˆ¹çš„èˆªè¡Œè¿›è¡ŒæŠ•èµ„è¯„çº§ã€‚è¿™å®¶è¯„çº§æœºæ„ä¼šç»™å‡ºâ€œAâ€æˆ–è€…â€œBâ€ä¸¤ç§è¯„çº§ï¼Œå–å†³äºå¤šç§é£é™©å’Œç›ˆåˆ©æ½œåŠ›çš„å› ç´ ã€‚åœ¨è¯„ä¼°é£é™©æ—¶ï¼Œæ—¢è¦è€ƒè™‘èˆªç¨‹æœ¬èº«çš„ç‰¹å¾ï¼Œä¹Ÿè¦è€ƒè™‘èˆ¹é•¿è¿‡å¾€èˆªè¡Œçš„å†å²ã€‚</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">function</span> <span class="hljs-title function_">rating</span>(<span class="hljs-params">voyage, history</span>) &#123;<br> const vpf = voyageProfitFactor(voyage, history);<br> const vr = voyageRisk(voyage);<br> const chr = captainHistoryRisk(voyage, history);<br> <span class="hljs-keyword">if</span> (vpf * <span class="hljs-number">3</span> &gt; (vr + chr * <span class="hljs-number">2</span>)) <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;A&quot;</span>;<br> <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;B&quot;</span>;<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">voyageRisk</span>(<span class="hljs-params">voyage</span>) &#123;<br> let result = <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">if</span> (voyage.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">4</span>) result += <span class="hljs-number">2</span>;<br> <span class="hljs-keyword">if</span> (voyage.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">8</span>) result += voyage.<span class="hljs-built_in">length</span> - <span class="hljs-number">8</span>;<br> <span class="hljs-keyword">if</span> ([<span class="hljs-string">&quot;china&quot;</span>, <span class="hljs-string">&quot;east-indies&quot;</span>].<span class="hljs-built_in">includes</span>(voyage.zone)) result += <span class="hljs-number">4</span>;<br> <span class="hljs-keyword">return</span> Math.<span class="hljs-built_in">max</span>(result, <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">captainHistoryRisk</span>(<span class="hljs-params">voyage, history</span>) &#123;<br> let result = <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">if</span> (history.<span class="hljs-built_in">length</span> &lt; <span class="hljs-number">5</span>) result += <span class="hljs-number">4</span>;<br> result += history.<span class="hljs-built_in">filter</span>(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> v.profit &lt; <span class="hljs-number">0</span>).<span class="hljs-built_in">length</span>;<br> <span class="hljs-keyword">if</span> (voyage.zone === <span class="hljs-string">&quot;china&quot;</span> &amp;amp;&amp;amp; hasChina(history)) result -= <span class="hljs-number">2</span>;<br> <span class="hljs-keyword">return</span> Math.<span class="hljs-built_in">max</span>(result, <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">hasChina</span>(<span class="hljs-params">history</span>) &#123;<br> <span class="hljs-keyword">return</span> history.some(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> <span class="hljs-string">&quot;china&quot;</span> === v.zone);<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">voyageProfitFactor</span>(<span class="hljs-params">voyage, history</span>) &#123;<br> let result = <span class="hljs-number">2</span>;<br> <span class="hljs-keyword">if</span> (voyage.zone === <span class="hljs-string">&quot;china&quot;</span>) result += <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">if</span> (voyage.zone === <span class="hljs-string">&quot;east-indies&quot;</span>) result += <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">if</span> (voyage.zone === <span class="hljs-string">&quot;china&quot;</span> &amp;amp;&amp;amp; hasChina(history)) &#123;<br>  result += <span class="hljs-number">3</span>;<br>  <span class="hljs-keyword">if</span> (history.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">10</span>) result += <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (voyage.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">12</span>) result += <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (voyage.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">18</span>) result -= <span class="hljs-number">1</span>;<br> &#125;<br> <span class="hljs-keyword">else</span> &#123;<br>  <span class="hljs-keyword">if</span> (history.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">8</span>) result += <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (voyage.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">14</span>) result -= <span class="hljs-number">1</span>;<br> &#125;<br> <span class="hljs-keyword">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>voyageRisk å’Œ captainHistoryRisk ä¸¤ä¸ªå‡½æ•°è´Ÿè´£æ‰“å‡ºé£é™©åˆ†æ•°ï¼ŒvoyageProfitFactor è´Ÿè´£æ‰“å‡ºç›ˆåˆ©æ½œåŠ›åˆ†æ•°ï¼Œrating å‡½æ•°å°† 3 ä¸ªåˆ†æ•°ç»„åˆåˆ°ä¸€èµ·ï¼Œç»™å‡ºä¸€æ¬¡èˆªè¡Œçš„ç»¼åˆè¯„çº§ã€‚</p>
<p>è°ƒç”¨æ–¹çš„ä»£ç å¤§æ¦‚æ˜¯è¿™æ ·ï¼š</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">const voyage</span> = &#123; zone: <span class="hljs-string">&quot;west-indies&quot;</span>, length: 10 &#125;;<br><span class="hljs-attribute">const history</span> = [<br>  &#123; zone: <span class="hljs-string">&quot;east-indies&quot;</span>, profit: 5 &#125;,<br>  &#123; zone: <span class="hljs-string">&quot;west-indies&quot;</span>, profit: 15 &#125;,<br>  &#123; zone: <span class="hljs-string">&quot;china&quot;</span>, profit: -2 &#125;,<br>  &#123; zone: <span class="hljs-string">&quot;west-africa&quot;</span>, profit: 7 &#125;,<br>];<br><br><span class="hljs-attribute">const myRating</span> = rating(voyage, history);<br></code></pre></td></tr></table></figure>

<p>ä»£ç ä¸­æœ‰ä¸¤å¤„åŒæ ·çš„æ¡ä»¶é€»è¾‘ï¼Œéƒ½åœ¨è¯¢é—®â€œæ˜¯å¦æœ‰åˆ°ä¸­å›½çš„èˆªç¨‹â€ä»¥åŠâ€œèˆ¹é•¿æ˜¯å¦æ›¾å»è¿‡ä¸­å›½â€ã€‚</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">function</span> <span class="hljs-title function_">rating</span>(<span class="hljs-params">voyage, history</span>) &#123;<br> const vpf = voyageProfitFactor(voyage, history);<br> const vr = voyageRisk(voyage);<br> const chr = captainHistoryRisk(voyage, history);<br> <span class="hljs-keyword">if</span> (vpf * <span class="hljs-number">3</span> &gt; (vr + chr * <span class="hljs-number">2</span>)) <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;A&quot;</span>;<br> <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;B&quot;</span>;<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">voyageRisk</span>(<span class="hljs-params">voyage</span>) &#123;<br> let result = <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">if</span> (voyage.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">4</span>) result += <span class="hljs-number">2</span>;<br> <span class="hljs-keyword">if</span> (voyage.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">8</span>) result += voyage.<span class="hljs-built_in">length</span> - <span class="hljs-number">8</span>;<br> <span class="hljs-keyword">if</span> ([<span class="hljs-string">&quot;china&quot;</span>, <span class="hljs-string">&quot;east-indies&quot;</span>].<span class="hljs-built_in">includes</span>(voyage.zone)) result += <span class="hljs-number">4</span>;<br> <span class="hljs-keyword">return</span> Math.<span class="hljs-built_in">max</span>(result, <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">captainHistoryRisk</span>(<span class="hljs-params">voyage, history</span>) &#123;<br> let result = <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">if</span> (history.<span class="hljs-built_in">length</span> &lt; <span class="hljs-number">5</span>) result += <span class="hljs-number">4</span>;<br> result += history.<span class="hljs-built_in">filter</span>(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> v.profit &lt; <span class="hljs-number">0</span>).<span class="hljs-built_in">length</span>;<br> <span class="hljs-keyword">if</span> (voyage.zone === <span class="hljs-string">&quot;china&quot;</span> &amp;amp;&amp;amp; hasChina(history)) result -= <span class="hljs-number">2</span>;<br> <span class="hljs-keyword">return</span> Math.<span class="hljs-built_in">max</span>(result, <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">hasChina</span>(<span class="hljs-params">history</span>) &#123;<br> <span class="hljs-keyword">return</span> history.some(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> <span class="hljs-string">&quot;china&quot;</span> === v.zone);<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">voyageProfitFactor</span>(<span class="hljs-params">voyage, history</span>) &#123;<br> let result = <span class="hljs-number">2</span>;<br> <span class="hljs-keyword">if</span> (voyage.zone === <span class="hljs-string">&quot;china&quot;</span>) result += <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">if</span> (voyage.zone === <span class="hljs-string">&quot;east-indies&quot;</span>) result += <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">if</span> (voyage.zone === <span class="hljs-string">&quot;china&quot;</span> &amp;amp;&amp;amp; hasChina(history)) &#123;<br>  result += <span class="hljs-number">3</span>;<br>  <span class="hljs-keyword">if</span> (history.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">10</span>) result += <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (voyage.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">12</span>) result += <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (voyage.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">18</span>) result -= <span class="hljs-number">1</span>;<br> &#125;<br> <span class="hljs-keyword">else</span> &#123;<br>  <span class="hljs-keyword">if</span> (history.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">8</span>) result += <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (voyage.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">14</span>) result -= <span class="hljs-number">1</span>;<br> &#125;<br> <span class="hljs-keyword">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æˆ‘ä¼šç”¨ç»§æ‰¿å’Œå¤šæ€å°†å¤„ç†â€œä¸­å›½å› ç´ â€çš„é€»è¾‘ä»åŸºç¡€é€»è¾‘ä¸­åˆ†ç¦»å‡ºæ¥ã€‚å¦‚æœè¿˜è¦å¼•å…¥æ›´å¤šçš„ç‰¹æ®Šé€»è¾‘ï¼Œè¿™ä¸ªé‡æ„å°±å¾ˆæœ‰ç”¨â€”â€”è¿™äº›é‡å¤çš„â€œä¸­å›½å› ç´ â€ä¼šæ··æ·†è§†å¬ï¼Œè®©åŸºç¡€é€»è¾‘éš¾ä»¥ç†è§£ã€‚</p>
<p>èµ·åˆä»£ç é‡Œåªæœ‰ä¸€å †å‡½æ•°ï¼Œå¦‚æœè¦å¼•å…¥å¤šæ€çš„è¯ï¼Œæˆ‘éœ€è¦å…ˆå»ºç«‹ä¸€ä¸ªç±»ç»“æ„ï¼Œå› æ­¤æˆ‘é¦–å…ˆä½¿ç”¨å‡½æ•°ç»„åˆæˆç±»ï¼ˆ144ï¼‰ã€‚è¿™ä¸€æ­¥é‡æ„çš„ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">function rating(voyage, history) &#123;<br> <span class="hljs-keyword">return</span> new Rating(voyage, history).value;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Rating</span> &#123;<br> <span class="hljs-keyword">constructor</span>(voyage, history) &#123;<br>  <span class="hljs-keyword">this</span>.voyage = voyage;<br>  <span class="hljs-keyword">this</span>.history = history;<br> &#125;<br> <span class="hljs-keyword">get</span> value() &#123;<br>  <span class="hljs-keyword">const</span> vpf = <span class="hljs-keyword">this</span>.voyageProfitFactor;<br>  <span class="hljs-keyword">const</span> vr = <span class="hljs-keyword">this</span>.voyageRisk;<br>  <span class="hljs-keyword">const</span> chr = <span class="hljs-keyword">this</span>.captainHistoryRisk;<br>  <span class="hljs-keyword">if</span> (vpf * <span class="hljs-number">3</span> &gt; (vr + chr * <span class="hljs-number">2</span>)) <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;A&quot;</span>;<br>  <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;B&quot;</span>;<br> &#125;<br> <span class="hljs-keyword">get</span> voyageRisk() &#123;<br>  let result = <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.length &gt; <span class="hljs-number">4</span>) result += <span class="hljs-number">2</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.length &gt; <span class="hljs-number">8</span>) result += <span class="hljs-keyword">this</span>.voyage.length - <span class="hljs-number">8</span>;<br>  <span class="hljs-keyword">if</span> ([<span class="hljs-string">&quot;china&quot;</span>, <span class="hljs-string">&quot;east-indies&quot;</span>].includes(<span class="hljs-keyword">this</span>.voyage.zone)) result += <span class="hljs-number">4</span>;<br>  <span class="hljs-keyword">return</span> Math.max(result, <span class="hljs-number">0</span>);<br> &#125;<br> <span class="hljs-keyword">get</span> captainHistoryRisk() &#123;<br>  let result = <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.history.length &lt; <span class="hljs-number">5</span>) result += <span class="hljs-number">4</span>;<br>  result += <span class="hljs-keyword">this</span>.history.filter(v =&gt; v.profit &lt; <span class="hljs-number">0</span>).length;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.zone === <span class="hljs-string">&quot;china&quot;</span> &amp;amp;&amp;amp; <span class="hljs-keyword">this</span>.hasChinaHistory) result -= <span class="hljs-number">2</span>;<br>  <span class="hljs-keyword">return</span> Math.max(result, <span class="hljs-number">0</span>);<br> &#125;<br> <span class="hljs-keyword">get</span> voyageProfitFactor() &#123;<br>  let result = <span class="hljs-number">2</span>;<br><br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.zone === <span class="hljs-string">&quot;china&quot;</span>) result += <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.zone === <span class="hljs-string">&quot;east-indies&quot;</span>) result += <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.zone === <span class="hljs-string">&quot;china&quot;</span> &amp;amp;&amp;amp; <span class="hljs-keyword">this</span>.hasChinaHistory) &#123;<br>   result += <span class="hljs-number">3</span>;<br>   <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.history.length &gt; <span class="hljs-number">10</span>) result += <span class="hljs-number">1</span>;<br>   <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.length &gt; <span class="hljs-number">12</span>) result += <span class="hljs-number">1</span>;<br>   <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.length &gt; <span class="hljs-number">18</span>) result -= <span class="hljs-number">1</span>;<br>  &#125;<br>  <span class="hljs-keyword">else</span> &#123;<br>   <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.history.length &gt; <span class="hljs-number">8</span>) result += <span class="hljs-number">1</span>;<br>   <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.length &gt; <span class="hljs-number">14</span>) result -= <span class="hljs-number">1</span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> result;<br> &#125;<br> <span class="hljs-keyword">get</span> hasChinaHistory() &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.history.some(v =&gt; <span class="hljs-string">&quot;china&quot;</span> === v.zone);<br> &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>äºæ˜¯æˆ‘å°±æœ‰äº†ä¸€ä¸ªç±»ï¼Œç”¨æ¥å®‰æ”¾åŸºç¡€é€»è¾‘ã€‚ç°åœ¨æˆ‘éœ€è¦å¦å»ºä¸€ä¸ªç©ºçš„å­ç±»ï¼Œç”¨æ¥å®‰æ”¾ä¸è¶…ç±»ä¸åŒçš„è¡Œä¸ºã€‚</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ExperiencedChinaRating</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Rating</span> </span>&#123;&#125;<br></code></pre></td></tr></table></figure>

<p>ç„¶åï¼Œå»ºç«‹ä¸€ä¸ªå·¥å‚å‡½æ•°ï¼Œç”¨äºåœ¨éœ€è¦æ—¶è¿”å›å˜ä½“ç±»ã€‚</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> create<span class="hljs-constructor">Rating(<span class="hljs-params">voyage</span>, <span class="hljs-params">history</span>)</span> &#123;<br> <span class="hljs-keyword">if</span> (voyage.zone<span class="hljs-operator"> === </span><span class="hljs-string">&quot;china&quot;</span> &amp;amp;&amp;amp; history.some(v =&gt; <span class="hljs-string">&quot;china&quot;</span><span class="hljs-operator"> === </span>v.zone))<br>  return <span class="hljs-keyword">new</span> <span class="hljs-constructor">ExperiencedChinaRating(<span class="hljs-params">voyage</span>, <span class="hljs-params">history</span>)</span>;<br> <span class="hljs-keyword">else</span> return <span class="hljs-keyword">new</span> <span class="hljs-constructor">Rating(<span class="hljs-params">voyage</span>, <span class="hljs-params">history</span>)</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æˆ‘éœ€è¦ä¿®æ”¹æ‰€æœ‰è°ƒç”¨æ–¹ä»£ç ï¼Œè®©å®ƒä»¬ä½¿ç”¨è¯¥å·¥å‚å‡½æ•°ï¼Œè€Œä¸è¦ç›´æ¥è°ƒç”¨æ„é€ å‡½æ•°ã€‚è¿˜å¥½ç°åœ¨è°ƒç”¨æ„é€ å‡½æ•°çš„åªæœ‰ rating å‡½æ•°ä¸€å¤„ã€‚</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">rating</span>(voyage, history) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-type">createRating(voyage,</span> history).value;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æœ‰ä¸¤å¤„è¡Œä¸ºéœ€è¦ç§»å…¥å­ç±»ä¸­ã€‚æˆ‘å…ˆå¤„ç† captainHistoryRisk ä¸­çš„é€»è¾‘ã€‚</p>
<p><strong>class Ratingâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">get</span> captainHistoryRisk() &#123;<br> let result = <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.history.length &lt; <span class="hljs-number">5</span>) result += <span class="hljs-number">4</span>;<br> result += <span class="hljs-keyword">this</span>.history.filter(v =&gt; v.profit &lt; <span class="hljs-number">0</span>).length;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.zone === <span class="hljs-string">&quot;china&quot;</span> &amp;amp;&amp;amp; <span class="hljs-keyword">this</span>.hasChinaHistory) result -= <span class="hljs-number">2</span>;<br> <span class="hljs-keyword">return</span> Math.max(result, <span class="hljs-number">0</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>åœ¨å­ç±»ä¸­è¦†å†™è¿™ä¸ªå‡½æ•°ã€‚</p>
<p>class ExperiencedChinaRating</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">get</span> <span class="hljs-title function_">captainHistoryRisk</span>() &#123;<br>  <span class="hljs-keyword">const</span> result = <span class="hljs-variable language_">super</span>.<span class="hljs-property">captainHistoryRisk</span> - <span class="hljs-number">2</span>;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(result, <span class="hljs-number">0</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>class Ratingâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">get</span> captainHistoryRisk() &#123;<br> let result = <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.history.length &lt; <span class="hljs-number">5</span>) result += <span class="hljs-number">4</span>;<br> result += <span class="hljs-keyword">this</span>.history.filter(v =&gt; v.profit &lt; <span class="hljs-number">0</span>).length;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.zone === <span class="hljs-string">&quot;china&quot;</span> &amp;amp;&amp;amp; <span class="hljs-keyword">this</span>.hasChinaHistory) result -= <span class="hljs-number">2</span>;<br> <span class="hljs-keyword">return</span> Math.max(result, <span class="hljs-number">0</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>åˆ†ç¦» voyageProfitFactor å‡½æ•°ä¸­çš„å˜ä½“è¡Œä¸ºè¦æ›´éº»çƒ¦ä¸€äº›ã€‚æˆ‘ä¸èƒ½ç›´æ¥ä»è¶…ç±»ä¸­åˆ æ‰å˜ä½“è¡Œä¸ºï¼Œå› ä¸ºåœ¨è¶…ç±»ä¸­è¿˜æœ‰å¦ä¸€æ¡æ‰§è¡Œè·¯å¾„ã€‚æˆ‘åˆä¸æƒ³æŠŠæ•´ä¸ªè¶…ç±»ä¸­çš„å‡½æ•°å¤åˆ¶åˆ°å­ç±»ä¸­ã€‚</p>
<p><strong>class Ratingâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">get</span> voyageProfitFactor() &#123;<br> let result = <span class="hljs-number">2</span>;<br><br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.zone === <span class="hljs-string">&quot;china&quot;</span>) result += <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.zone === <span class="hljs-string">&quot;east-indies&quot;</span>) result += <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.zone === <span class="hljs-string">&quot;china&quot;</span> &amp;amp;&amp;amp; <span class="hljs-keyword">this</span>.hasChinaHistory) &#123;<br>  result += <span class="hljs-number">3</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.history.length &gt; <span class="hljs-number">10</span>) result += <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.length &gt; <span class="hljs-number">12</span>) result += <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.length &gt; <span class="hljs-number">18</span>) result -= <span class="hljs-number">1</span>;<br> &#125;<br> <span class="hljs-keyword">else</span> &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.history.length &gt; <span class="hljs-number">8</span>) result += <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.length &gt; <span class="hljs-number">14</span>) result -= <span class="hljs-number">1</span>;<br> &#125;<br> <span class="hljs-keyword">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æ‰€ä»¥æˆ‘å…ˆç”¨æç‚¼å‡½æ•°ï¼ˆ106ï¼‰å°†æ•´ä¸ªæ¡ä»¶é€»è¾‘å—æç‚¼å‡ºæ¥ã€‚</p>
<p><strong>class Ratingâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">get</span> voyageProfitFactor() &#123;<br> let result = <span class="hljs-number">2</span>;<br><br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.zone === <span class="hljs-string">&quot;china&quot;</span>) result += <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.zone === <span class="hljs-string">&quot;east-indies&quot;</span>) result += <span class="hljs-number">1</span>;<br> result += <span class="hljs-keyword">this</span>.voyageAndHistoryLengthFactor;<br> <span class="hljs-keyword">return</span> result;<br>&#125;<br><span class="hljs-keyword">get</span> voyageAndHistoryLengthFactor() &#123;<br> let result = <span class="hljs-number">0</span>;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.zone === <span class="hljs-string">&quot;china&quot;</span> &amp;amp;&amp;amp; <span class="hljs-keyword">this</span>.hasChinaHistory) &#123;<br>  result += <span class="hljs-number">3</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.history.length &gt; <span class="hljs-number">10</span>) result += <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.length &gt; <span class="hljs-number">12</span>) result += <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.length &gt; <span class="hljs-number">18</span>) result -= <span class="hljs-number">1</span>;<br> &#125;<br> <span class="hljs-keyword">else</span> &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.history.length &gt; <span class="hljs-number">8</span>) result += <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.length &gt; <span class="hljs-number">14</span>) result -= <span class="hljs-number">1</span>;<br> &#125;<br> <span class="hljs-keyword">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>å‡½æ•°åä¸­å‡ºç°â€œAndâ€å­—æ ·æ˜¯ä¸€ä¸ªå¾ˆä¸å¥½çš„å‘³é“ï¼Œä¸è¿‡æˆ‘ä¼šæš‚æ—¶å®¹å¿å®ƒï¼Œå…ˆèšç„¦å­ç±»åŒ–æ“ä½œã€‚</p>
<p><strong>class Ratingâ€¦</strong></p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs applescript"><span class="hljs-keyword">get</span> voyageAndHistoryLengthFactor() &#123;<br> let <span class="hljs-literal">result</span> = <span class="hljs-number">0</span>;<br> <span class="hljs-keyword">if</span> (this.history.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">8</span>) <span class="hljs-literal">result</span> += <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">if</span> (this.voyage.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">14</span>) <span class="hljs-literal">result</span> -= <span class="hljs-number">1</span>;<br><span class="hljs-built_in"> return</span> <span class="hljs-literal">result</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>class ExperiencedChinaRatingâ€¦</strong></p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs applescript"><span class="hljs-keyword">get</span> voyageAndHistoryLengthFactor() &#123;<br> let <span class="hljs-literal">result</span> = <span class="hljs-number">0</span>;<br> <span class="hljs-literal">result</span> += <span class="hljs-number">3</span>;<br> <span class="hljs-keyword">if</span> (this.history.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">10</span>) <span class="hljs-literal">result</span> += <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">if</span> (this.voyage.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">12</span>) <span class="hljs-literal">result</span> += <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">if</span> (this.voyage.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">18</span>) <span class="hljs-literal">result</span> -= <span class="hljs-number">1</span>;<br><span class="hljs-built_in"> return</span> <span class="hljs-literal">result</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ä¸¥æ ¼è¯´æ¥ï¼Œé‡æ„åˆ°è¿™å„¿å°±ç»“æŸäº†â€”â€”æˆ‘å·²ç»æŠŠå˜ä½“è¡Œä¸ºåˆ†ç¦»åˆ°äº†å­ç±»ä¸­ï¼Œè¶…ç±»çš„é€»è¾‘ç†è§£å’Œç»´æŠ¤èµ·æ¥æ›´ç®€å•äº†ï¼Œåªæœ‰åœ¨è¿›å…¥å­ç±»ä»£ç æ—¶æˆ‘æ‰éœ€è¦æ“å¿ƒå˜ä½“é€»è¾‘ã€‚å­ç±»çš„ä»£ç è¡¨è¿°äº†å®ƒä¸è¶…ç±»çš„å·®å¼‚ã€‚</p>
<p>ä½†æˆ‘è§‰å¾—è‡³å°‘åº”è¯¥è°ˆè°ˆå¦‚ä½•å¤„ç†è¿™ä¸ªä¸‘é™‹çš„æ–°å‡½æ•°ã€‚å¼•å…¥ä¸€ä¸ªå‡½æ•°ä»¥ä¾¿å­ç±»è¦†å†™ï¼Œè¿™åœ¨å¤„ç†è¿™ç§â€œåŸºç¡€å’Œå˜ä½“â€çš„ç»§æ‰¿å…³ç³»æ—¶æ˜¯å¸¸è§æ“ä½œã€‚ä½†è¿™æ ·ä¸€ä¸ªéš¾çœ‹çš„å‡½æ•°åªä¼šå¦¨ç¢â€”â€”è€Œä¸æ˜¯å¸®åŠ©â€”â€”åˆ«äººç†è§£å…¶ä¸­çš„é€»è¾‘ã€‚</p>
<p>å‡½æ•°åä¸­çš„â€œAndâ€å­—æ ·è¯´æ˜å…¶ä¸­åŒ…å«äº†ä¸¤ä»¶äº‹ï¼Œæ‰€ä»¥æˆ‘è§‰å¾—åº”è¯¥å°†å®ƒä»¬åˆ†å¼€ã€‚æˆ‘ä¼šç”¨æç‚¼å‡½æ•°ï¼ˆ106ï¼‰æŠŠâ€œå†å²èˆªè¡Œæ•°â€ï¼ˆhistory lengthï¼‰çš„ç›¸å…³é€»è¾‘æç‚¼å‡ºæ¥ã€‚è¿™ä¸€æ­¥æç‚¼åœ¨è¶…ç±»å’Œå­ç±»ä¸­éƒ½è¦å‘ç”Ÿï¼Œæˆ‘é¦–å…ˆä»è¶…ç±»å¼€å§‹ã€‚</p>
<p><strong>class Ratingâ€¦</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">get</span> <span class="hljs-title">voyageAndHistoryLengthFactor</span>()</span> &#123;<br> <span class="hljs-keyword">let</span> result = <span class="hljs-number">0</span>;<br> result += <span class="hljs-keyword">this</span>.historyLengthFactor;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.length &gt; <span class="hljs-number">14</span>) result -= <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">return</span> result;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">get</span> <span class="hljs-title">historyLengthFactor</span>()</span> &#123;<br> <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.history.length &gt; <span class="hljs-number">8</span>) ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç„¶ååœ¨å­ç±»ä¸­ä¹Ÿå¦‚æ³•ç‚®åˆ¶ã€‚</p>
<p><strong>class ExperiencedChinaRatingâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">get</span> voyageAndHistoryLengthFactor() &#123;<br> let result = <span class="hljs-number">0</span>;<br> result += <span class="hljs-number">3</span>;<br> result += <span class="hljs-keyword">this</span>.historyLengthFactor;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.length &gt; <span class="hljs-number">12</span>) result += <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.length &gt; <span class="hljs-number">18</span>) result -= <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">return</span> result;<br>&#125;<br><span class="hljs-keyword">get</span> historyLengthFactor() &#123;<br> <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.history.length &gt; <span class="hljs-number">10</span>) ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç„¶ååœ¨è¶…ç±»ä¸­ä½¿ç”¨æ¬ç§»è¯­å¥åˆ°è°ƒç”¨è€…ï¼ˆ217ï¼‰ã€‚</p>
<p><strong>class Ratingâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">get</span> voyageProfitFactor() &#123;<br> let result = <span class="hljs-number">2</span>;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.zone === <span class="hljs-string">&quot;china&quot;</span>) result += <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.zone === <span class="hljs-string">&quot;east-indies&quot;</span>) result += <span class="hljs-number">1</span>;<br> result += <span class="hljs-keyword">this</span>.historyLengthFactor;<br> result += <span class="hljs-keyword">this</span>.voyageAndHistoryLengthFactor;<br> <span class="hljs-keyword">return</span> result;<br>&#125;<br><br><span class="hljs-keyword">get</span> voyageAndHistoryLengthFactor() &#123;<br> let result = <span class="hljs-number">0</span>;<br> result += <span class="hljs-keyword">this</span>.historyLengthFactor;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.length &gt; <span class="hljs-number">14</span>) result -= <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>class ExperiencedChinaRatingâ€¦</strong></p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs applescript"><span class="hljs-keyword">get</span> voyageAndHistoryLengthFactor() &#123;<br> let <span class="hljs-literal">result</span> = <span class="hljs-number">0</span>;<br> <span class="hljs-literal">result</span> += <span class="hljs-number">3</span>;<br> <span class="hljs-literal">result</span> += this.historyLengthFactor;<br> <span class="hljs-keyword">if</span> (this.voyage.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">12</span>) <span class="hljs-literal">result</span> += <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">if</span> (this.voyage.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">18</span>) <span class="hljs-literal">result</span> -= <span class="hljs-number">1</span>;<br><span class="hljs-built_in"> return</span> <span class="hljs-literal">result</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>å†ç”¨å‡½æ•°æ”¹åï¼ˆ124ï¼‰æ”¹æ‰è¿™ä¸ªéš¾å¬çš„åå­—ã€‚</p>
<p><strong>class Ratingâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">get</span> voyageProfitFactor() &#123;<br> let result = <span class="hljs-number">2</span>;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.zone === <span class="hljs-string">&quot;china&quot;</span>) result += <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.zone === <span class="hljs-string">&quot;east-indies&quot;</span>) result += <span class="hljs-number">1</span>;<br> result += <span class="hljs-keyword">this</span>.historyLengthFactor;<br> result += <span class="hljs-keyword">this</span>.voyageLengthFactor;<br> <span class="hljs-keyword">return</span> result;<br>&#125;<br><br><span class="hljs-keyword">get</span> voyageLengthFactor() &#123;<br> <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.voyage.length &gt; <span class="hljs-number">14</span>) ? - <span class="hljs-number">1</span>: <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æ”¹ä¸ºä¸‰å…ƒè¡¨è¾¾å¼ï¼Œä»¥ç®€åŒ– voyageLengthFactor å‡½æ•°ã€‚</p>
<p><strong>class ExperiencedChinaRatingâ€¦</strong></p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs applescript"><span class="hljs-keyword">get</span> voyageLengthFactor() &#123;<br> let <span class="hljs-literal">result</span> = <span class="hljs-number">0</span>;<br> <span class="hljs-literal">result</span> += <span class="hljs-number">3</span>;<br> <span class="hljs-keyword">if</span> (this.voyage.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">12</span>) <span class="hljs-literal">result</span> += <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">if</span> (this.voyage.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">18</span>) <span class="hljs-literal">result</span> -= <span class="hljs-number">1</span>;<br><span class="hljs-built_in"> return</span> <span class="hljs-literal">result</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æœ€åä¸€ä»¶äº‹ï¼šåœ¨â€œèˆªç¨‹æ•°â€ï¼ˆvoyage lengthï¼‰å› ç´ ä¸ŠåŠ ä¸Š 3 åˆ†ï¼Œæˆ‘è®¤ä¸ºè¿™ä¸ªé€»è¾‘ä¸åˆç†ï¼Œåº”è¯¥æŠŠè¿™ 3 åˆ†åŠ åœ¨æœ€ç»ˆçš„ç»“æœä¸Šã€‚</p>
<p><strong>class ExperiencedChinaRatingâ€¦</strong></p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs applescript"><span class="hljs-keyword">get</span> voyageProfitFactor() &#123;<br><span class="hljs-built_in">  return</span> super.voyageProfitFactor + <span class="hljs-number">3</span>;<br>&#125;<br><br><span class="hljs-keyword">get</span> voyageLengthFactor() &#123;<br>  let <span class="hljs-literal">result</span> = <span class="hljs-number">0</span>;<br>  <span class="hljs-literal">result</span> += <span class="hljs-number">3</span>;<br>  <span class="hljs-keyword">if</span> (this.voyage.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">12</span>) <span class="hljs-literal">result</span> += <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (this.voyage.<span class="hljs-built_in">length</span> &gt; <span class="hljs-number">18</span>) <span class="hljs-literal">result</span> -= <span class="hljs-number">1</span>;<br><span class="hljs-built_in">  return</span> <span class="hljs-literal">result</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>é‡æ„ç»“æŸï¼Œæˆ‘å¾—åˆ°äº†å¦‚ä¸‹ä»£ç ã€‚é¦–å…ˆï¼Œæˆ‘æœ‰ä¸€ä¸ªåŸºæœ¬çš„ Rating ç±»ï¼Œå…¶ä¸­ä¸è€ƒè™‘ä¸â€œä¸­å›½ç»éªŒâ€ç›¸å…³çš„å¤æ‚æ€§ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Rating</span> &#123;<br> <span class="hljs-keyword">constructor</span>(voyage, history) &#123;<br>  <span class="hljs-keyword">this</span>.voyage = voyage;<br>  <span class="hljs-keyword">this</span>.history = history;<br> &#125;<br> <span class="hljs-keyword">get</span> value() &#123;<br>  <span class="hljs-keyword">const</span> vpf = <span class="hljs-keyword">this</span>.voyageProfitFactor;<br>  <span class="hljs-keyword">const</span> vr = <span class="hljs-keyword">this</span>.voyageRisk;<br>  <span class="hljs-keyword">const</span> chr = <span class="hljs-keyword">this</span>.captainHistoryRisk;<br>  <span class="hljs-keyword">if</span> (vpf * <span class="hljs-number">3</span> &gt; (vr + chr * <span class="hljs-number">2</span>)) <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;A&quot;</span>;<br>  <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;B&quot;</span>;<br> &#125;<br> <span class="hljs-keyword">get</span> voyageRisk() &#123;<br>  let result = <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.length &gt; <span class="hljs-number">4</span>) result += <span class="hljs-number">2</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.length &gt; <span class="hljs-number">8</span>) result += <span class="hljs-keyword">this</span>.voyage.length - <span class="hljs-number">8</span>;<br>  <span class="hljs-keyword">if</span> ([<span class="hljs-string">&quot;china&quot;</span>, <span class="hljs-string">&quot;east-indies&quot;</span>].includes(<span class="hljs-keyword">this</span>.voyage.zone)) result += <span class="hljs-number">4</span>;<br>  <span class="hljs-keyword">return</span> Math.max(result, <span class="hljs-number">0</span>);<br> &#125;<br> <span class="hljs-keyword">get</span> captainHistoryRisk() &#123;<br>  let result = <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.history.length &lt; <span class="hljs-number">5</span>) result += <span class="hljs-number">4</span>;<br>  result += <span class="hljs-keyword">this</span>.history.filter(v =&gt; v.profit &lt; <span class="hljs-number">0</span>).length;<br>  <span class="hljs-keyword">return</span> Math.max(result, <span class="hljs-number">0</span>);<br> &#125;<br> <span class="hljs-keyword">get</span> voyageProfitFactor() &#123;<br>  let result = <span class="hljs-number">2</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.zone === <span class="hljs-string">&quot;china&quot;</span>) result += <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.zone === <span class="hljs-string">&quot;east-indies&quot;</span>) result += <span class="hljs-number">1</span>;<br>  result += <span class="hljs-keyword">this</span>.historyLengthFactor;<br>  result += <span class="hljs-keyword">this</span>.voyageLengthFactor;<br>  <span class="hljs-keyword">return</span> result;<br> &#125;<br> <span class="hljs-keyword">get</span> voyageLengthFactor() &#123;<br>  <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.voyage.length &gt; <span class="hljs-number">14</span>) ? - <span class="hljs-number">1</span>: <span class="hljs-number">0</span>;<br> &#125;<br> <span class="hljs-keyword">get</span> historyLengthFactor() &#123;<br>  <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.history.length &gt; <span class="hljs-number">8</span>) ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;<br> &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ä¸â€œä¸­å›½ç»éªŒâ€ç›¸å…³çš„ä»£ç åˆ™æ¸…æ™°è¡¨è¿°å‡ºåœ¨åŸºæœ¬é€»è¾‘ä¹‹ä¸Šçš„ä¸€ç³»åˆ—å˜ä½“é€»è¾‘ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ExperiencedChinaRating</span> <span class="hljs-title">extends</span> <span class="hljs-title">Rating</span> &#123;<br> <span class="hljs-keyword">get</span> captainHistoryRisk() &#123;<br>  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">super</span>.captainHistoryRisk - <span class="hljs-number">2</span>;<br>  <span class="hljs-keyword">return</span> Math.max(result, <span class="hljs-number">0</span>);<br> &#125;<br> <span class="hljs-keyword">get</span> voyageLengthFactor() &#123;<br>  let result = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.length &gt; <span class="hljs-number">12</span>) result += <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.voyage.length &gt; <span class="hljs-number">18</span>) result -= <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">return</span> result;<br> &#125;<br> <span class="hljs-keyword">get</span> historyLengthFactor() &#123;<br>  <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.history.length &gt; <span class="hljs-number">10</span>) ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;<br> &#125;<br> <span class="hljs-keyword">get</span> voyageProfitFactor() &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">super</span>.voyageProfitFactor + <span class="hljs-number">3</span>;<br> &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="10-5-å¼•å…¥ç‰¹ä¾‹ï¼ˆIntroduce-Special-Caseï¼‰"><a href="#10-5-å¼•å…¥ç‰¹ä¾‹ï¼ˆIntroduce-Special-Caseï¼‰" class="headerlink" title="10.5 å¼•å…¥ç‰¹ä¾‹ï¼ˆIntroduce Special Caseï¼‰"></a>10.5 å¼•å…¥ç‰¹ä¾‹ï¼ˆIntroduce Special Caseï¼‰</h2><p>æ›¾ç”¨åï¼šå¼•å…¥ Null å¯¹è±¡ï¼ˆIntroduce Null Objectï¼‰</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf">if (aCustomer <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;unknown&quot;</span>) customerName <span class="hljs-operator">=</span> <span class="hljs-string">&quot;occupant&quot;</span><span class="hljs-comment">;</span><br><br><br>class UnknownCustomer &#123;<br>  get name() &#123;return <span class="hljs-string">&quot;occupant&quot;</span><span class="hljs-comment">;&#125;</span><br></code></pre></td></tr></table></figure>

<h3 id="åŠ¨æœº-4"><a href="#åŠ¨æœº-4" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>ä¸€ç§å¸¸è§çš„é‡å¤ä»£ç æ˜¯è¿™ç§æƒ…å†µï¼šä¸€ä¸ªæ•°æ®ç»“æ„çš„ä½¿ç”¨è€…éƒ½åœ¨æ£€æŸ¥æŸä¸ªç‰¹æ®Šçš„å€¼ï¼Œå¹¶ä¸”å½“è¿™ä¸ªç‰¹æ®Šå€¼å‡ºç°æ—¶æ‰€åšçš„å¤„ç†ä¹Ÿéƒ½ç›¸åŒã€‚å¦‚æœæˆ‘å‘ç°ä»£ç åº“ä¸­æœ‰å¤šå¤„ä»¥åŒæ ·æ–¹å¼åº”å¯¹åŒä¸€ä¸ªç‰¹æ®Šå€¼ï¼Œæˆ‘å°±ä¼šæƒ³è¦æŠŠè¿™ä¸ªå¤„ç†é€»è¾‘æ”¶æ‹¢åˆ°ä¸€å¤„ã€‚</p>
<p>å¤„ç†è¿™ç§æƒ…å†µçš„ä¸€ä¸ªå¥½åŠæ³•æ˜¯ä½¿ç”¨â€œç‰¹ä¾‹â€ï¼ˆSpecial Caseï¼‰æ¨¡å¼ï¼šåˆ›å»ºä¸€ä¸ªç‰¹ä¾‹å…ƒç´ ï¼Œç”¨ä»¥è¡¨è¾¾å¯¹è¿™ç§ç‰¹ä¾‹çš„å…±ç”¨è¡Œä¸ºçš„å¤„ç†ã€‚è¿™æ ·æˆ‘å°±å¯ä»¥ç”¨ä¸€ä¸ªå‡½æ•°è°ƒç”¨å–ä»£å¤§éƒ¨åˆ†ç‰¹ä¾‹æ£€æŸ¥é€»è¾‘ã€‚</p>
<p>ç‰¹ä¾‹æœ‰å‡ ç§è¡¨ç°å½¢å¼ã€‚å¦‚æœæˆ‘åªéœ€è¦ä»è¿™ä¸ªå¯¹è±¡è¯»å–æ•°æ®ï¼Œå¯ä»¥æä¾›ä¸€ä¸ªå­—é¢é‡å¯¹è±¡ï¼ˆliteral objectï¼‰ï¼Œå…¶ä¸­æ‰€æœ‰çš„å€¼éƒ½æ˜¯é¢„å…ˆå¡«å……å¥½çš„ã€‚å¦‚æœé™¤ç®€å•çš„æ•°å€¼ä¹‹å¤–è¿˜éœ€è¦æ›´å¤šçš„è¡Œä¸ºï¼Œå°±éœ€è¦åˆ›å»ºä¸€ä¸ªç‰¹æ®Šå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«æ‰€æœ‰å…±ç”¨è¡Œä¸ºæ‰€å¯¹åº”çš„å‡½æ•°ã€‚ç‰¹ä¾‹å¯¹è±¡å¯ä»¥ç”±ä¸€ä¸ªå°è£…ç±»æ¥è¿”å›ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å˜æ¢æ’å…¥ä¸€ä¸ªæ•°æ®ç»“æ„ã€‚</p>
<p>ä¸€ä¸ªé€šå¸¸éœ€è¦ç‰¹ä¾‹å¤„ç†çš„å€¼å°±æ˜¯ nullï¼Œè¿™ä¹Ÿæ˜¯è¿™ä¸ªæ¨¡å¼å¸¸è¢«å«ä½œâ€œNull å¯¹è±¡â€ï¼ˆNull Objectï¼‰æ¨¡å¼çš„åŸå› â€”â€”æˆ‘å–œæ¬¢è¯´ï¼šNull å¯¹è±¡æ˜¯ç‰¹ä¾‹çš„ä¸€ç§ç‰¹ä¾‹ã€‚</p>
<h3 id="åšæ³•-4"><a href="#åšæ³•-4" class="headerlink" title="åšæ³•"></a>åšæ³•</h3><p>æˆ‘ä»¬ä»ä¸€ä¸ªä½œä¸ºå®¹å™¨çš„æ•°æ®ç»“æ„ï¼ˆæˆ–è€…ç±»ï¼‰å¼€å§‹ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªå±æ€§ï¼Œè¯¥å±æ€§å°±æ˜¯æˆ‘ä»¬è¦é‡æ„çš„ç›®æ ‡ã€‚å®¹å™¨çš„å®¢æˆ·ç«¯æ¯æ¬¡ä½¿ç”¨è¿™ä¸ªå±æ€§æ—¶ï¼Œéƒ½éœ€è¦å°†å…¶ä¸æŸä¸ªç‰¹ä¾‹å€¼åšæ¯”å¯¹ã€‚æˆ‘ä»¬å¸Œæœ›æŠŠè¿™ä¸ªç‰¹ä¾‹å€¼æ›¿æ¢ä¸ºä»£è¡¨è¿™ç§ç‰¹ä¾‹æƒ…å†µçš„ç±»æˆ–æ•°æ®ç»“æ„ã€‚</p>
<p>ç»™é‡æ„ç›®æ ‡æ·»åŠ æ£€æŸ¥ç‰¹ä¾‹çš„å±æ€§ï¼Œä»¤å…¶è¿”å› falseã€‚</p>
<p>åˆ›å»ºä¸€ä¸ªç‰¹ä¾‹å¯¹è±¡ï¼Œå…¶ä¸­åªæœ‰æ£€æŸ¥ç‰¹ä¾‹çš„å±æ€§ï¼Œè¿”å› trueã€‚</p>
<p>å¯¹â€œä¸ç‰¹ä¾‹å€¼åšæ¯”å¯¹â€çš„ä»£ç è¿ç”¨æç‚¼å‡½æ•°ï¼ˆ106ï¼‰ï¼Œç¡®ä¿æ‰€æœ‰å®¢æˆ·ç«¯éƒ½ä½¿ç”¨è¿™ä¸ªæ–°å‡½æ•°ï¼Œè€Œä¸å†ç›´æ¥åšç‰¹ä¾‹å€¼çš„æ¯”å¯¹ã€‚</p>
<p>å°†æ–°çš„ç‰¹ä¾‹å¯¹è±¡å¼•å…¥ä»£ç ä¸­ï¼Œå¯ä»¥ä»å‡½æ•°è°ƒç”¨ä¸­è¿”å›ï¼Œä¹Ÿå¯ä»¥åœ¨å˜æ¢å‡½æ•°ä¸­ç”Ÿæˆã€‚</p>
<p>ä¿®æ”¹ç‰¹ä¾‹æ¯”å¯¹å‡½æ•°çš„ä¸»ä½“ï¼Œåœ¨å…¶ä¸­ç›´æ¥ä½¿ç”¨æ£€æŸ¥ç‰¹ä¾‹çš„å±æ€§ã€‚</p>
<p>æµ‹è¯•ã€‚</p>
<p>ä½¿ç”¨å‡½æ•°ç»„åˆæˆç±»ï¼ˆ144ï¼‰æˆ–å‡½æ•°ç»„åˆæˆå˜æ¢ï¼ˆ149ï¼‰ï¼ŒæŠŠé€šç”¨çš„ç‰¹ä¾‹å¤„ç†é€»è¾‘éƒ½æ¬ç§»åˆ°æ–°å»ºçš„ç‰¹ä¾‹å¯¹è±¡ä¸­ã€‚</p>
<p>ç‰¹ä¾‹ç±»å¯¹äºç®€å•çš„è¯·æ±‚é€šå¸¸ä¼šè¿”å›å›ºå®šçš„å€¼ï¼Œå› æ­¤å¯ä»¥å°†å…¶å®ç°ä¸ºå­—é¢è®°å½•ï¼ˆliteral recordï¼‰ã€‚</p>
<p>å¯¹ç‰¹ä¾‹æ¯”å¯¹å‡½æ•°ä½¿ç”¨å†…è”å‡½æ•°ï¼ˆ115ï¼‰ï¼Œå°†å…¶å†…è”åˆ°ä»ç„¶éœ€è¦çš„åœ°æ–¹ã€‚</p>
<h3 id="èŒƒä¾‹-4"><a href="#èŒƒä¾‹-4" class="headerlink" title="èŒƒä¾‹"></a>èŒƒä¾‹</h3><p>ä¸€å®¶æä¾›å…¬å…±äº‹ä¸šæœåŠ¡çš„å…¬å¸å°†è‡ªå·±çš„æœåŠ¡å®‰è£…åœ¨å„ä¸ªåœºæ‰€ï¼ˆsiteï¼‰ã€‚</p>
<p><strong>class Siteâ€¦</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">get</span> <span class="hljs-title">customer</span>()</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._customer;&#125;<br></code></pre></td></tr></table></figure>

<p>ä»£è¡¨â€œé¡¾å®¢â€çš„ Customer ç±»æœ‰å¤šä¸ªå±æ€§ï¼Œæˆ‘åªè€ƒè™‘å…¶ä¸­ 3 ä¸ªã€‚</p>
<p><strong>class Customerâ€¦</strong></p>
<figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nim">get name()           <span class="hljs-meta">&#123;...&#125;</span><br>get billingPlan()    <span class="hljs-meta">&#123;...&#125;</span><br><span class="hljs-type">set</span> billingPlan(arg) <span class="hljs-meta">&#123;...&#125;</span><br>get paymentHistory() <span class="hljs-meta">&#123;...&#125;</span><br></code></pre></td></tr></table></figure>

<p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸€ä¸ªåœºæ‰€ä¼šå¯¹åº”ä¸€ä¸ªé¡¾å®¢ï¼Œä½†æœ‰äº›åœºæ‰€æ²¡æœ‰ä¸ä¹‹å¯¹åº”çš„é¡¾å®¢ï¼Œå¯èƒ½æ˜¯å› ä¸ºä¹‹å‰çš„ä½æˆ·æ¬èµ°äº†ï¼Œè€Œæ–°æ¬æ¥çš„ä½æˆ·æˆ‘è¿˜ä¸çŸ¥é“æ˜¯è°ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæ•°æ®è®°å½•ä¸­çš„ customer å­—æ®µä¼šè¢«å¡«å……ä¸ºå­—ç¬¦ä¸²â€unknownâ€ã€‚å› ä¸ºè¿™ç§æƒ…å†µæ—¶æœ‰å‘ç”Ÿï¼Œæ‰€ä»¥ Site å¯¹è±¡çš„å®¢æˆ·ç«¯å¿…é¡»æœ‰åŠæ³•å¤„ç†â€œé¡¾å®¢æœªçŸ¥â€çš„æƒ…å†µã€‚ä¸‹é¢æ˜¯ä¸€äº›ç¤ºä¾‹ä»£ç ç‰‡æ®µã€‚</p>
<p><strong>å®¢æˆ·ç«¯ 1â€¦</strong></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const aCustomer <span class="hljs-operator">=</span> site.customer<span class="hljs-comment">;</span><br>// ... lots of intervening code ...<br>let customerName<span class="hljs-comment">;</span><br>if (aCustomer <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;unknown&quot;</span>) customerName <span class="hljs-operator">=</span> <span class="hljs-string">&quot;occupant&quot;</span><span class="hljs-comment">;</span><br>else customerName <span class="hljs-operator">=</span> aCustomer.name<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 2â€¦</strong></p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pf"><span class="hljs-keyword">const</span> plan =<br>  aCustomer === <span class="hljs-string">&quot;unknown&quot;</span> ? registry.billingPlans.<span class="hljs-keyword">basic</span> : aCustomer.billingPlan;<br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 3â€¦</strong></p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">if</span> (aCustomer !== <span class="hljs-string">&quot;unknown&quot;</span>) aCustomer.billingPlan = <span class="hljs-keyword">new</span><span class="hljs-type">Plan</span>;<br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 4â€¦</strong></p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-keyword">const</span> weeksDelinquent =<br>  aCustomer === <span class="hljs-string">&quot;unknown&quot;</span><br>    ? <span class="hljs-number">0</span><br>    : aCustomer.paymentHistory.weeksDelinquentInLastYear;<br></code></pre></td></tr></table></figure>

<p>æµè§ˆæ•´ä¸ªä»£ç åº“ï¼Œæˆ‘çœ‹åˆ°æœ‰å¾ˆå¤šä½¿ç”¨ Site å¯¹è±¡çš„å®¢æˆ·ç«¯åœ¨å¤„ç†â€œé¡¾å®¢æœªçŸ¥â€çš„æƒ…å†µï¼Œå¤§å¤šæ•°éƒ½ç”¨äº†åŒæ ·çš„åº”å¯¹æ–¹å¼ï¼šç”¨â€occupantâ€ï¼ˆå±…æ°‘ï¼‰ä½œä¸ºé¡¾å®¢åï¼Œä½¿ç”¨åŸºæœ¬çš„è®¡ä»·å¥—é¤ï¼Œå¹¶è®¤ä¸ºè¿™å®¶é¡¾å®¢æ²¡æœ‰æ¬ è´¹ã€‚åˆ°å¤„éƒ½åœ¨æ£€æŸ¥è¿™ç§ç‰¹ä¾‹ï¼Œå†åŠ ä¸Šå¯¹ç‰¹ä¾‹çš„å¤„ç†æ–¹å¼é«˜åº¦ä¸€è‡´ï¼Œè¿™äº›ç°è±¡å‘Šè¯‰æˆ‘ï¼šæ˜¯æ—¶å€™ä½¿ç”¨ç‰¹ä¾‹å¯¹è±¡ï¼ˆSpecial Case Objectï¼‰æ¨¡å¼äº†ã€‚</p>
<p>æˆ‘é¦–å…ˆç»™ Customer æ·»åŠ ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºæŒ‡ç¤ºâ€œè¿™ä¸ªé¡¾å®¢æ˜¯å¦æœªçŸ¥â€ã€‚</p>
<p><strong>class Customerâ€¦</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">get</span> <span class="hljs-title">isUnknown</span>()</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#125;<br></code></pre></td></tr></table></figure>

<p>ç„¶åæˆ‘ç»™â€œæœªçŸ¥çš„é¡¾å®¢â€ä¸“é—¨åˆ›å»ºä¸€ä¸ªç±»ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">class</span> <span class="hljs-title">UnknownCustomer</span> &#123;<br>  <span class="hljs-function"><span class="hljs-keyword">get</span> <span class="hljs-title">isUnknown</span>()</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼Œæˆ‘æ²¡æœ‰æŠŠ UnknownCustomer ç±»å£°æ˜ä¸º Customer çš„å­ç±»ã€‚åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ï¼ˆå°¤å…¶æ˜¯é™æ€ç±»å‹çš„ç¼–ç¨‹è¯­è¨€ï¼‰ä¸­ï¼Œæˆ‘ä¼šéœ€è¦ç»§æ‰¿å…³ç³»ã€‚ä½† JavaScript æ˜¯ä¸€ç§åŠ¨æ€ç±»å‹è¯­è¨€ï¼ŒæŒ‰ç…§å®ƒçš„å­ç±»åŒ–è§„åˆ™ï¼Œè¿™é‡Œä¸å£°æ˜ç»§æ‰¿å…³ç³»åè€Œæ›´å¥½ã€‚</p>
<p>ä¸‹é¢å°±æ˜¯éº»çƒ¦ä¹‹å¤„äº†ã€‚æˆ‘å¿…é¡»åœ¨æ‰€æœ‰æœŸæœ›å¾—åˆ°â€unknownâ€å€¼çš„åœ°æ–¹è¿”å›è¿™ä¸ªæ–°çš„ç‰¹ä¾‹å¯¹è±¡ï¼Œå¹¶ä¿®æ”¹æ‰€æœ‰æ£€æŸ¥â€unknownâ€å€¼çš„åœ°æ–¹ï¼Œä»¤å…¶ä½¿ç”¨æ–°çš„ isUnknown å‡½æ•°ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œæˆ‘æ€»æ˜¯å¸Œæœ›ç»†å¿ƒå®‰æ’ä¿®æ”¹è¿‡ç¨‹ï¼Œä½¿æˆ‘å¯ä»¥æ¯æ¬¡åšä¸€ç‚¹å°ä¿®æ”¹ï¼Œç„¶åé©¬ä¸Šæµ‹è¯•ã€‚ä½†å¦‚æœæˆ‘ä¿®æ”¹äº† Customer ç±»ï¼Œä½¿å…¶è¿”å› UnknownCustomer å¯¹è±¡ï¼ˆè€Œéâ€unknownâ€å­—ç¬¦ä¸²ï¼‰ï¼Œé‚£ä¹ˆå°±å¿…é¡»åŒæ—¶ä¿®æ”¹æ‰€æœ‰å®¢æˆ·ç«¯ï¼Œè®©å®ƒä»¬ä¸è¦æ£€æŸ¥â€unknownâ€å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯è°ƒç”¨ isUnknown å‡½æ•°â€”â€”è¿™ä¸¤ä¸ªä¿®æ”¹å¿…é¡»ä¸€æ¬¡å®Œæˆã€‚æˆ‘æ„Ÿè§‰è¿™ä¸€å¤§æ­¥ä¿®æ”¹å°±åƒä¸€å¤§å—éš¾åƒçš„é£Ÿç‰©ä¸€æ ·éš¾ä»¥ä¸‹å’½ã€‚</p>
<p>è¿˜å¥½ï¼Œé‡åˆ°è¿™ç§å›°å¢ƒæ—¶ï¼Œæœ‰ä¸€ä¸ªå¸¸ç”¨çš„æŠ€å·§å¯ä»¥å¸®å¿™ã€‚å¦‚æœæœ‰ä¸€æ®µä»£ç éœ€è¦åœ¨å¾ˆå¤šåœ°æ–¹åšä¿®æ”¹ï¼ˆä¾‹å¦‚æˆ‘ä»¬è¿™é‡Œçš„â€œä¸ç‰¹ä¾‹åšæ¯”å¯¹â€çš„ä»£ç ï¼‰ï¼Œæˆ‘ä¼šå…ˆå¯¹å…¶ä½¿ç”¨æç‚¼å‡½æ•°ï¼ˆ106ï¼‰ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">isUnknown</span>(<span class="hljs-params">arg</span>) &#123;<br>  <span class="hljs-keyword">if</span> (!(arg <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Customer</span> || arg === <span class="hljs-string">&quot;unknown&quot;</span>))<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`investigate bad value: &lt;<span class="hljs-subst">$&#123;arg&#125;</span>&gt;`</span>);<br>  <span class="hljs-keyword">return</span> arg === <span class="hljs-string">&quot;unknown&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æˆ‘ä¼šæ”¾ä¸€ä¸ªé™·é˜±ï¼Œæ•æ‰æ„æ–™ä¹‹å¤–çš„å€¼ã€‚å¦‚æœåœ¨é‡æ„è¿‡ç¨‹ä¸­æˆ‘çŠ¯äº†é”™è¯¯ï¼Œå¼•å…¥äº†å¥‡æ€ªçš„è¡Œä¸ºï¼Œè¿™ä¸ªé™·é˜±ä¼šå¸®æˆ‘å‘ç°ã€‚</p>
<p>ç°åœ¨ï¼Œå‡¡æ˜¯æ£€æŸ¥æœªçŸ¥é¡¾å®¢çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥æ”¹ç”¨è¿™ä¸ªå‡½æ•°äº†ã€‚æˆ‘å¯ä»¥é€ä¸€ä¿®æ”¹è¿™äº›åœ°æ–¹ï¼Œæ¯æ¬¡ä¿®æ”¹ä¹‹åéƒ½å¯ä»¥æ‰§è¡Œæµ‹è¯•ã€‚</p>
<p><strong>å®¢æˆ·ç«¯ 1â€¦</strong></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">let customerName<span class="hljs-comment">;</span><br>if (isUnknown(aCustomer)) customerName <span class="hljs-operator">=</span> <span class="hljs-string">&quot;occupant&quot;</span><span class="hljs-comment">;</span><br>else customerName <span class="hljs-operator">=</span> aCustomer.name<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p>æ²¡ç”¨å¤šä¹…ï¼Œå°±å…¨éƒ¨ä¿®æ”¹å®Œäº†ã€‚</p>
<p><strong>å®¢æˆ·ç«¯ 2â€¦</strong></p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pf"><span class="hljs-keyword">const</span> plan = isUnknown(aCustomer)<br>  ? registry.billingPlans.<span class="hljs-keyword">basic</span><br>  : aCustomer.billingPlan;<br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 3â€¦</strong></p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">if</span> (!isUnknown(aCustomer)) aCustomer.billingPlan = <span class="hljs-keyword">new</span><span class="hljs-type">Plan</span>;<br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 4â€¦</strong></p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">const weeksDelinquent = is<span class="hljs-constructor">Unknown(<span class="hljs-params">aCustomer</span>)</span><br>  ? <span class="hljs-number">0</span><br>  : aCustomer.paymentHistory.weeksDelinquentInLastYear;<br></code></pre></td></tr></table></figure>

<p>å°†æ‰€æœ‰è°ƒç”¨å¤„éƒ½æ”¹ä¸ºä½¿ç”¨ isUnknown å‡½æ•°ä¹‹åï¼Œå°±å¯ä»¥ä¿®æ”¹ Site ç±»ï¼Œä»¤å…¶åœ¨é¡¾å®¢æœªçŸ¥æ—¶è¿”å› UnknownCustomer å¯¹è±¡ã€‚</p>
<p><strong>class Siteâ€¦</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">get</span> <span class="hljs-title">customer</span>()</span> &#123;<br>  <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>._customer === <span class="hljs-string">&quot;unknown&quot;</span>) ? <span class="hljs-keyword">new</span> UnknownCustomer() : <span class="hljs-keyword">this</span>._customer;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç„¶åä¿®æ”¹ isUnknown å‡½æ•°çš„åˆ¤æ–­é€»è¾‘ã€‚åšå®Œè¿™æ­¥ä¿®æ”¹ä¹‹åæˆ‘å¯ä»¥åšä¸€æ¬¡å…¨æ–‡æœç´¢ï¼Œåº”è¯¥æ²¡æœ‰ä»»ä½•åœ°æ–¹ä½¿ç”¨â€unknownâ€å­—ç¬¦ä¸²äº†ã€‚</p>
<p><strong>å®¢æˆ·ç«¯ 1â€¦</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">isUnknown</span>(<span class="hljs-params">arg</span>) &#123;<br>  <span class="hljs-keyword">if</span> (!(arg <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Customer</span> || arg <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">UnknownCustomer</span>))<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`investigate bad value: &lt;<span class="hljs-subst">$&#123;arg&#125;</span>&gt;`</span>);<br>  <span class="hljs-keyword">return</span> arg.<span class="hljs-property">isUnknown</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼Œä»¥ç¡®ä¿ä¸€åˆ‡è¿è½¬å¦‚å¸¸ã€‚</p>
<p>ç°åœ¨ï¼Œæœ‰è¶£çš„éƒ¨åˆ†å¼€å§‹äº†ã€‚æˆ‘å¯ä»¥é€ä¸€æŸ¥çœ‹å®¢æˆ·ç«¯æ£€æŸ¥ç‰¹ä¾‹çš„ä»£ç ï¼Œçœ‹å®ƒä»¬å¤„ç†ç‰¹ä¾‹çš„é€»è¾‘ï¼Œå¹¶è€ƒè™‘æ˜¯å¦èƒ½ç”¨å‡½æ•°ç»„åˆæˆç±»ï¼ˆ144ï¼‰å°†å…¶æ›¿æ¢ä¸ºä¸€ä¸ªå…±åŒçš„ã€ç¬¦åˆé¢„æœŸçš„å€¼ã€‚æ­¤åˆ»ï¼Œæœ‰å¤šå¤„å®¢æˆ·ç«¯ä»£ç ç”¨å­—ç¬¦ä¸²â€occupantâ€æ¥ä½œä¸ºæœªçŸ¥é¡¾å®¢çš„åå­—ï¼Œå°±åƒä¸‹é¢è¿™æ ·ã€‚</p>
<p><strong>å®¢æˆ·ç«¯ 1â€¦</strong></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">let customerName<span class="hljs-comment">;</span><br>if (isUnknown(aCustomer)) customerName <span class="hljs-operator">=</span> <span class="hljs-string">&quot;occupant&quot;</span><span class="hljs-comment">;</span><br>else customerName <span class="hljs-operator">=</span> aCustomer.name<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p>æˆ‘å¯ä»¥åœ¨ UnknownCustomer ç±»ä¸­æ·»åŠ ä¸€ä¸ªåˆé€‚çš„å‡½æ•°ã€‚</p>
<p><strong>class UnknownCustomerâ€¦</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">get</span> <span class="hljs-title">name</span>()</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-string">&quot;occupant&quot;</span>;&#125;<br></code></pre></td></tr></table></figure>

<p>ç„¶åæˆ‘å°±å¯ä»¥å»æ‰æ‰€æœ‰æ¡ä»¶ä»£ç ã€‚</p>
<p><strong>å®¢æˆ·ç«¯ 1â€¦</strong></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const customerName <span class="hljs-operator">=</span> aCustomer.name<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p>æµ‹è¯•é€šè¿‡ä¹‹åï¼Œæˆ‘å¯èƒ½ä¼šç”¨å†…è”å˜é‡ï¼ˆ123ï¼‰æŠŠ customerName å˜é‡ä¹Ÿæ¶ˆé™¤æ‰ã€‚</p>
<p>æ¥ä¸‹æ¥å¤„ç†ä»£è¡¨â€œè®¡ä»·å¥—é¤â€çš„ billingPlan å±æ€§ã€‚</p>
<p><strong>å®¢æˆ·ç«¯ 2â€¦</strong></p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pf"><span class="hljs-keyword">const</span> plan = isUnknown(aCustomer)<br>  ? registry.billingPlans.<span class="hljs-keyword">basic</span><br>  : aCustomer.billingPlan;<br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 3â€¦</strong></p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">if</span> (!isUnknown(aCustomer)) aCustomer.billingPlan = <span class="hljs-keyword">new</span><span class="hljs-type">Plan</span>;<br></code></pre></td></tr></table></figure>

<p>å¯¹äºè¯»å–è¯¥å±æ€§çš„è¡Œä¸ºï¼Œæˆ‘çš„å¤„ç†æ–¹æ³•è·Ÿå‰é¢å¤„ç† name å±æ€§ä¸€æ ·â€”â€”æ‰¾åˆ°é€šç”¨çš„åº”å¯¹æ–¹å¼ï¼Œå¹¶åœ¨ UnknownCustomer ä¸­ä½¿ç”¨ä¹‹ã€‚è‡³äºå¯¹è¯¥å±æ€§çš„å†™æ“ä½œï¼Œå½“å‰çš„ä»£ç æ²¡æœ‰å¯¹æœªçŸ¥é¡¾å®¢è°ƒç”¨è¿‡è®¾å€¼å‡½æ•°ï¼Œæ‰€ä»¥åœ¨ç‰¹ä¾‹å¯¹è±¡ä¸­ï¼Œæˆ‘ä¼šä¿ç•™è®¾å€¼å‡½æ•°ï¼Œä½†å…¶ä¸­ä»€ä¹ˆéƒ½ä¸åšã€‚</p>
<p><strong>class UnknownCustomerâ€¦</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">get</span> <span class="hljs-title">billingPlan</span>()</span>  &#123;<span class="hljs-keyword">return</span> registry.billingPlans.basic;&#125;<br><span class="hljs-function"><span class="hljs-keyword">set</span> <span class="hljs-title">billingPlan</span>(<span class="hljs-params">arg</span>)</span> &#123; <span class="hljs-comment">/* ignore */</span> &#125;<br></code></pre></td></tr></table></figure>

<p><strong>è¯»å–çš„ä¾‹å­â€¦</strong></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const plan <span class="hljs-operator">=</span> aCustomer.billingPlan<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p><strong>æ›´æ–°çš„ä¾‹å­â€¦</strong></p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">aCustomer.billingPlan</span> = newPlan<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p>ç‰¹ä¾‹å¯¹è±¡æ˜¯å€¼å¯¹è±¡ï¼Œå› æ­¤åº”è¯¥å§‹ç»ˆæ˜¯ä¸å¯å˜çš„ï¼Œå³ä¾¿å®ƒä»¬æ›¿ä»£çš„åŸå¯¹è±¡æœ¬èº«æ˜¯å¯å˜çš„ã€‚</p>
<p>æœ€åä¸€ä¸ªä¾‹å­åˆ™æ›´éº»çƒ¦ä¸€äº›ï¼Œå› ä¸ºç‰¹ä¾‹å¯¹è±¡éœ€è¦è¿”å›å¦ä¸€ä¸ªå¯¹è±¡ï¼Œåè€…åˆæœ‰å…¶è‡ªå·±çš„å±æ€§ã€‚</p>
<p><strong>å®¢æˆ·ç«¯â€¦</strong></p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">const weeksDelinquent = is<span class="hljs-constructor">Unknown(<span class="hljs-params">aCustomer</span>)</span><br>  ? <span class="hljs-number">0</span><br>  : aCustomer.paymentHistory.weeksDelinquentInLastYear;<br></code></pre></td></tr></table></figure>

<p>ä¸€èˆ¬çš„åŸåˆ™æ˜¯ï¼šå¦‚æœç‰¹ä¾‹å¯¹è±¡éœ€è¦è¿”å›å…³è”å¯¹è±¡ï¼Œè¢«è¿”å›çš„é€šå¸¸ä¹Ÿæ˜¯ç‰¹ä¾‹å¯¹è±¡ã€‚æ‰€ä»¥ï¼Œæˆ‘éœ€è¦åˆ›å»ºä¸€ä¸ªä»£è¡¨â€œç©ºæ”¯ä»˜è®°å½•â€çš„ç‰¹ä¾‹ç±» NullPaymentHistoryã€‚</p>
<p><strong>class UnknownCustomerâ€¦</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">get</span> <span class="hljs-title">paymentHistory</span>()</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> NullPaymentHistory();&#125;<br></code></pre></td></tr></table></figure>

<p><strong>class NullPaymentHistoryâ€¦</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">get</span> <span class="hljs-title">weeksDelinquentInLastYear</span>()</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯â€¦</strong></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const weeksDelinquent <span class="hljs-operator">=</span> aCustomer.paymentHistory.weeksDelinquentInLastYear<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p>æˆ‘ç»§ç»­æŸ¥çœ‹å®¢æˆ·ç«¯ä»£ç ï¼Œå¯»æ‰¾æ˜¯å¦æœ‰èƒ½ç”¨å¤šæ€è¡Œä¸ºå–ä»£çš„åœ°æ–¹ã€‚ä½†ä¹Ÿä¼šæœ‰ä¾‹å¤–æƒ…å†µâ€”â€”å®¢æˆ·ç«¯ä¸æƒ³ä½¿ç”¨ç‰¹ä¾‹å¯¹è±¡æä¾›çš„é€»è¾‘ï¼Œè€Œæ˜¯æƒ³åšä¸€äº›åˆ«çš„å¤„ç†ã€‚æˆ‘å¯èƒ½æœ‰ 23 å¤„å®¢æˆ·ç«¯ä»£ç ç”¨â€occupantâ€ä½œä¸ºæœªçŸ¥é¡¾å®¢çš„åå­—ï¼Œä½†è¿˜æœ‰ä¸€å¤„ç”¨äº†åˆ«çš„å€¼ã€‚</p>
<p><strong>å®¢æˆ·ç«¯â€¦</strong></p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">const <span class="hljs-type">name</span> = !isUnknown(aCustomer) ? aCustomer.name : &quot;unknown occupant&quot;;<br></code></pre></td></tr></table></figure>

<p>è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘åªèƒ½åœ¨å®¢æˆ·ç«¯ä¿ç•™ç‰¹ä¾‹æ£€æŸ¥çš„é€»è¾‘ã€‚æˆ‘ä¼šå¯¹å…¶åšäº›ä¿®æ”¹ï¼Œè®©å®ƒä½¿ç”¨ aCustomer å¯¹è±¡èº«ä¸Šçš„ isUnknown å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯å¯¹å…¨å±€çš„ isUnknown å‡½æ•°ä½¿ç”¨å†…è”å‡½æ•°ï¼ˆ115ï¼‰ã€‚</p>
<p><strong>å®¢æˆ·ç«¯â€¦</strong></p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">const <span class="hljs-type">name</span> = aCustomer.isUnknown ? &quot;unknown occupant&quot; : aCustomer.name;<br></code></pre></td></tr></table></figure>

<p>å¤„ç†å®Œæ‰€æœ‰å®¢æˆ·ç«¯ä»£ç åï¼Œå…¨å±€çš„ isUnknown å‡½æ•°åº”è¯¥æ²¡äººå†è°ƒç”¨äº†ï¼Œå¯ä»¥ç”¨ç§»é™¤æ­»ä»£ç ï¼ˆ237ï¼‰å°†å…¶ç§»é™¤ã€‚</p>
<h3 id="èŒƒä¾‹ï¼šä½¿ç”¨å¯¹è±¡å­—é¢é‡"><a href="#èŒƒä¾‹ï¼šä½¿ç”¨å¯¹è±¡å­—é¢é‡" class="headerlink" title="èŒƒä¾‹ï¼šä½¿ç”¨å¯¹è±¡å­—é¢é‡"></a>èŒƒä¾‹ï¼šä½¿ç”¨å¯¹è±¡å­—é¢é‡</h3><p>æˆ‘ä»¬åœ¨ä¸Šé¢å¤„ç†çš„å…¶å®æ˜¯ä¸€äº›å¾ˆç®€å•çš„å€¼ï¼Œå´è¦åˆ›å»ºä¸€ä¸ªè¿™æ ·çš„ç±»ï¼Œæœªå…æœ‰ç‚¹å„¿å¤§åŠ¨å¹²æˆˆã€‚ä½†åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘å¿…é¡»åˆ›å»ºè¿™æ ·ä¸€ä¸ªç±»ï¼Œå› ä¸º Customer ç±»æ˜¯å…è®¸ä½¿ç”¨è€…æ›´æ–°å…¶å†…å®¹çš„ã€‚ä½†å¦‚æœé¢å¯¹ä¸€ä¸ªåªè¯»çš„æ•°æ®ç»“æ„ï¼Œæˆ‘å°±å¯ä»¥æ”¹ç”¨å­—é¢é‡å¯¹è±¡ï¼ˆliteral objectï¼‰ã€‚</p>
<p>è¿˜æ˜¯å‰é¢è¿™ä¸ªä¾‹å­â€”â€”å‡ ä¹å®Œå…¨ä¸€æ ·ï¼Œé™¤äº†ä¸€ä»¶äº‹ï¼šè¿™æ¬¡æ²¡æœ‰å®¢æˆ·ç«¯å¯¹ Customer å¯¹è±¡åšæ›´æ–°æ“ä½œï¼š</p>
<p><strong>class Siteâ€¦</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">get</span> <span class="hljs-title">customer</span>()</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._customer;&#125;<br></code></pre></td></tr></table></figure>

<p><strong>class Customerâ€¦</strong></p>
<figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nim">get name()           <span class="hljs-meta">&#123;...&#125;</span><br>get billingPlan()    <span class="hljs-meta">&#123;...&#125;</span><br><span class="hljs-type">set</span> billingPlan(arg) <span class="hljs-meta">&#123;...&#125;</span><br>get paymentHistory() <span class="hljs-meta">&#123;...&#125;</span><br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 1â€¦</strong></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const aCustomer <span class="hljs-operator">=</span> site.customer<span class="hljs-comment">;</span><br>// ... lots of intervening code ...<br>let customerName<span class="hljs-comment">;</span><br>if (aCustomer <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;unknown&quot;</span>) customerName <span class="hljs-operator">=</span> <span class="hljs-string">&quot;occupant&quot;</span><span class="hljs-comment">;</span><br>else customerName <span class="hljs-operator">=</span> aCustomer.name<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 2â€¦</strong></p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pf"><span class="hljs-keyword">const</span> plan =<br>  aCustomer === <span class="hljs-string">&quot;unknown&quot;</span> ? registry.billingPlans.<span class="hljs-keyword">basic</span> : aCustomer.billingPlan;<br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 3â€¦</strong></p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-keyword">const</span> weeksDelinquent =<br>  aCustomer === <span class="hljs-string">&quot;unknown&quot;</span><br>    ? <span class="hljs-number">0</span><br>    : aCustomer.paymentHistory.weeksDelinquentInLastYear;<br></code></pre></td></tr></table></figure>

<p>å’Œå‰é¢çš„ä¾‹å­ä¸€æ ·ï¼Œæˆ‘é¦–å…ˆåœ¨ Customer ä¸­æ·»åŠ  isUnknown å±æ€§ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªåŒ…å«åŒåå­—æ®µçš„ç‰¹ä¾‹å¯¹è±¡ã€‚è¿™æ¬¡çš„åŒºåˆ«åœ¨äºï¼Œç‰¹ä¾‹å¯¹è±¡æ˜¯ä¸€ä¸ªå­—é¢é‡ã€‚</p>
<p><strong>class Customerâ€¦</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">get</span> <span class="hljs-title">isUnknown</span>()</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#125;<br></code></pre></td></tr></table></figure>

<p><strong>é¡¶å±‚ä½œç”¨åŸŸâ€¦</strong></p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">createUnknownCustomer</span>() &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-type">&#123;</span><br>    isUnknown: <span class="hljs-literal">true</span>,<br>  &#125;;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç„¶åæˆ‘å¯¹æ£€æŸ¥ç‰¹ä¾‹çš„æ¡ä»¶é€»è¾‘è¿ç”¨æç‚¼å‡½æ•°ï¼ˆ106ï¼‰ã€‚</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">isUnknown</span>(arg) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-type">arg</span> === <span class="hljs-string">&quot;unknown&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 1â€¦</strong></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">let customerName<span class="hljs-comment">;</span><br>if (isUnknown(aCustomer)) customerName <span class="hljs-operator">=</span> <span class="hljs-string">&quot;occupant&quot;</span><span class="hljs-comment">;</span><br>else customerName <span class="hljs-operator">=</span> aCustomer.name<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 2â€¦</strong></p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pf"><span class="hljs-keyword">const</span> plan = isUnknown(aCustomer)<br>  ? registry.billingPlans.<span class="hljs-keyword">basic</span><br>  : aCustomer.billingPlan;<br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 3â€¦</strong></p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">const weeksDelinquent = is<span class="hljs-constructor">Unknown(<span class="hljs-params">aCustomer</span>)</span><br>  ? <span class="hljs-number">0</span><br>  : aCustomer.paymentHistory.weeksDelinquentInLastYear;<br></code></pre></td></tr></table></figure>

<p>ä¿®æ”¹ Site ç±»å’Œåšæ¡ä»¶åˆ¤æ–­çš„ isUnknown å‡½æ•°ï¼Œå¼€å§‹ä½¿ç”¨ç‰¹ä¾‹å¯¹è±¡ã€‚</p>
<p><strong>class Siteâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">get</span> customer() &#123;<br>  <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>._customer === <span class="hljs-string">&quot;unknown&quot;</span>) ? createUnknownCustomer() : <span class="hljs-keyword">this</span>._customer;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>é¡¶å±‚ä½œç”¨åŸŸâ€¦</strong></p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">isUnknown</span>(arg) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-type">arg.isUnknown</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç„¶åæŠŠâ€œä»¥æ ‡å‡†æ–¹å¼åº”å¯¹ç‰¹ä¾‹â€çš„åœ°æ–¹éƒ½æ›¿æ¢æˆä½¿ç”¨ç‰¹ä¾‹å­—é¢é‡çš„å€¼ã€‚é¦–å…ˆä»â€œåå­—â€å¼€å§‹ï¼š</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">createUnknownCustomer</span>() &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-type">&#123;</span><br>    isUnknown: <span class="hljs-literal">true</span>,<br>    name: <span class="hljs-string">&quot;occupant&quot;</span>,<br>  &#125;;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 1â€¦</strong></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const customerName <span class="hljs-operator">=</span> aCustomer.name<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p>æ¥ç€æ˜¯â€œè®¡ä»·å¥—é¤â€ï¼š</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">createUnknownCustomer</span>() &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-type">&#123;</span><br>    isUnknown: <span class="hljs-literal">true</span>,<br>    name: <span class="hljs-string">&quot;occupant&quot;</span>,<br>    billingPlan: registry.billingPlans.basic,<br>  &#125;;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 2â€¦</strong></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const plan <span class="hljs-operator">=</span> aCustomer.billingPlan<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p>åŒæ ·ï¼Œæˆ‘å¯ä»¥åœ¨å­—é¢é‡å¯¹è±¡ä¸­åˆ›å»ºä¸€ä¸ªåµŒå¥—çš„ç©ºæ”¯ä»˜è®°å½•å¯¹è±¡ï¼š</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">createUnknownCustomer</span>() &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-type">&#123;</span><br>    isUnknown: <span class="hljs-literal">true</span>,<br>    name: <span class="hljs-string">&quot;occupant&quot;</span>,<br>    billingPlan: registry.billingPlans.basic,<br>    paymentHistory: &#123;<br>      weeksDelinquentInLastYear: <span class="hljs-number">0</span>,<br>    &#125;,<br>  &#125;;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 3â€¦</strong></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const weeksDelinquent <span class="hljs-operator">=</span> aCustomer.paymentHistory.weeksDelinquentInLastYear<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p>å¦‚æœä½¿ç”¨äº†è¿™æ ·çš„å­—é¢é‡ï¼Œåº”è¯¥ä½¿ç”¨è¯¸å¦‚ Object.freeze çš„æ–¹æ³•å°†å…¶å†»ç»“ï¼Œä½¿å…¶ä¸å¯å˜ã€‚é€šå¸¸ï¼Œæˆ‘è¿˜æ˜¯å–œæ¬¢ç”¨ç±»å¤šä¸€ç‚¹ã€‚</p>
<h3 id="èŒƒä¾‹ï¼šä½¿ç”¨å˜æ¢"><a href="#èŒƒä¾‹ï¼šä½¿ç”¨å˜æ¢" class="headerlink" title="èŒƒä¾‹ï¼šä½¿ç”¨å˜æ¢"></a>èŒƒä¾‹ï¼šä½¿ç”¨å˜æ¢</h3><p>å‰é¢ä¸¤ä¸ªä¾‹å­éƒ½æ¶‰åŠäº†ä¸€ä¸ªç±»ï¼Œå…¶å®æœ¬é‡æ„æ‰‹æ³•ä¹ŸåŒæ ·é€‚ç”¨äºè®°å½•ï¼Œåªè¦å¢åŠ ä¸€ä¸ªå˜æ¢æ­¥éª¤å³å¯ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬çš„è¾“å…¥æ˜¯ä¸€ä¸ªç®€å•çš„è®°å½•ç»“æ„ï¼Œå¤§æ¦‚åƒè¿™æ ·ï¼š</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-punctuation">&#123;</span><br><span class="hljs-symbol"> name:</span> <span class="hljs-string">&quot;Acme Boston&quot;</span>,<br><span class="hljs-symbol"> location:</span> <span class="hljs-string">&quot;Malden MA&quot;</span>,<br> <span class="hljs-comment">// more site details</span><br><span class="hljs-symbol"> customer:</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-symbol">  name:</span> <span class="hljs-string">&quot;Acme Industries&quot;</span>,<br><span class="hljs-symbol">  billingPlan:</span> <span class="hljs-string">&quot;plan-451&quot;</span>,<br><span class="hljs-symbol">  paymentHistory:</span> <span class="hljs-punctuation">&#123;</span><br><span class="hljs-symbol">   weeksDelinquentInLastYear:</span> <span class="hljs-number">7</span><br>   <span class="hljs-comment">//more</span><br>  <span class="hljs-punctuation">&#125;</span>,<br>  <span class="hljs-comment">// more</span><br> <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<p>æœ‰æ—¶é¡¾å®¢çš„åå­—æœªçŸ¥ï¼Œæ­¤æ—¶æ ‡è®°çš„æ–¹å¼ä¸å‰é¢ä¸€æ ·ï¼šå°† customer å­—æ®µæ ‡è®°ä¸ºå­—ç¬¦ä¸²â€unknownâ€ã€‚</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-punctuation">&#123;</span><br><span class="hljs-symbol">name:</span> <span class="hljs-string">&quot;Warehouse Unit 15&quot;</span>,<br><span class="hljs-symbol">location:</span> <span class="hljs-string">&quot;Malden MA&quot;</span>,<br><span class="hljs-comment">// more site details</span><br><span class="hljs-symbol">customer:</span> <span class="hljs-string">&quot;unknown&quot;</span>,<br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯ä»£ç ä¹Ÿç±»ä¼¼ï¼Œä¼šæ£€æŸ¥â€œæœªçŸ¥é¡¾å®¢â€çš„æƒ…å†µï¼š</p>
<p><strong>å®¢æˆ·ç«¯ 1â€¦</strong></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const site <span class="hljs-operator">=</span> acquireSiteData()<span class="hljs-comment">;</span><br>const aCustomer <span class="hljs-operator">=</span> site.customer<span class="hljs-comment">;</span><br>// ... lots of intervening code ...<br>let customerName<span class="hljs-comment">;</span><br>if (aCustomer <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;unknown&quot;</span>) customerName <span class="hljs-operator">=</span> <span class="hljs-string">&quot;occupant&quot;</span><span class="hljs-comment">;</span><br>else customerName <span class="hljs-operator">=</span> aCustomer.name<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 2â€¦</strong></p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pf"><span class="hljs-keyword">const</span> plan =<br>  aCustomer === <span class="hljs-string">&quot;unknown&quot;</span> ? registry.billingPlans.<span class="hljs-keyword">basic</span> : aCustomer.billingPlan;<br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 3â€¦</strong></p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-keyword">const</span> weeksDelinquent =<br>  aCustomer === <span class="hljs-string">&quot;unknown&quot;</span><br>    ? <span class="hljs-number">0</span><br>    : aCustomer.paymentHistory.weeksDelinquentInLastYear;<br></code></pre></td></tr></table></figure>

<p>æˆ‘é¦–å…ˆè¦è®© Site æ•°æ®ç»“æ„ç»è¿‡ä¸€æ¬¡å˜æ¢ï¼Œç›®å‰å˜æ¢ä¸­åªåšäº†æ·±å¤åˆ¶ï¼Œæ²¡æœ‰å¯¹æ•°æ®åšä»»ä½•å¤„ç†ã€‚</p>
<p><strong>å®¢æˆ·ç«¯ 1â€¦</strong></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const rawSite <span class="hljs-operator">=</span> acquireSiteData()<span class="hljs-comment">;</span><br>const site <span class="hljs-operator">=</span> enrichSite(rawSite)<span class="hljs-comment">;</span><br>const aCustomer <span class="hljs-operator">=</span> site.customer<span class="hljs-comment">;</span><br>// ... lots of intervening code ...<br>let customerName<span class="hljs-comment">;</span><br>if (aCustomer <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;unknown&quot;</span>) customerName <span class="hljs-operator">=</span> <span class="hljs-string">&quot;occupant&quot;</span><span class="hljs-comment">;</span><br>else customerName <span class="hljs-operator">=</span> aCustomer.name<span class="hljs-comment">;</span><br><br>function enrichSite(inputSite) &#123;<br>  return _.cloneDeep(inputSite)<span class="hljs-comment">;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç„¶åå¯¹â€œæ£€æŸ¥æœªçŸ¥é¡¾å®¢â€çš„ä»£ç è¿ç”¨æç‚¼å‡½æ•°ï¼ˆ106ï¼‰ã€‚</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">isUnknown</span>(aCustomer) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-type">aCustomer</span> === <span class="hljs-string">&quot;unknown&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 1â€¦</strong></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const rawSite <span class="hljs-operator">=</span> acquireSiteData()<span class="hljs-comment">;</span><br>const site <span class="hljs-operator">=</span> enrichSite(rawSite)<span class="hljs-comment">;</span><br>const aCustomer <span class="hljs-operator">=</span> site.customer<span class="hljs-comment">;</span><br>// ... lots of intervening code ...<br>let customerName<span class="hljs-comment">;</span><br>if (isUnknown(aCustomer)) customerName <span class="hljs-operator">=</span> <span class="hljs-string">&quot;occupant&quot;</span><span class="hljs-comment">;</span><br>else customerName <span class="hljs-operator">=</span> aCustomer.name<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 2â€¦</strong></p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pf"><span class="hljs-keyword">const</span> plan = isUnknown(aCustomer)<br>  ? registry.billingPlans.<span class="hljs-keyword">basic</span><br>  : aCustomer.billingPlan;<br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 3â€¦</strong></p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">const weeksDelinquent = is<span class="hljs-constructor">Unknown(<span class="hljs-params">aCustomer</span>)</span><br>  ? <span class="hljs-number">0</span><br>  : aCustomer.paymentHistory.weeksDelinquentInLastYear;<br></code></pre></td></tr></table></figure>

<p>ç„¶åå¼€å§‹å¯¹ Site æ•°æ®åšå¢å¼ºï¼Œé¦–å…ˆæ˜¯ç»™ customer å­—æ®µåŠ ä¸Š isUnknown å±æ€§ã€‚</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> enrich<span class="hljs-constructor">Site(<span class="hljs-params">aSite</span>)</span> &#123;<br>  const result = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">_</span>.</span></span>clone<span class="hljs-constructor">Deep(<span class="hljs-params">aSite</span>)</span>;<br>  const unknownCustomer = &#123;<br>    isUnknown: <span class="hljs-literal">true</span>,<br>  &#125;;<br><br>  <span class="hljs-keyword">if</span> (is<span class="hljs-constructor">Unknown(<span class="hljs-params">result</span>.<span class="hljs-params">customer</span>)</span>) result.customer = unknownCustomer;<br>  <span class="hljs-keyword">else</span> result.customer.isUnknown = <span class="hljs-literal">false</span>;<br>  return result;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>éšåä¿®æ”¹æ£€æŸ¥ç‰¹ä¾‹çš„æ¡ä»¶é€»è¾‘ï¼Œå¼€å§‹ä½¿ç”¨æ–°çš„å±æ€§ã€‚åŸæ¥çš„æ£€æŸ¥é€»è¾‘ä¹Ÿä¿ç•™ä¸åŠ¨ï¼Œæ‰€ä»¥ç°åœ¨çš„æ£€æŸ¥é€»è¾‘åº”è¯¥æ—¢èƒ½åº”å¯¹åŸæ¥çš„ Site æ•°æ®ï¼Œä¹Ÿèƒ½åº”å¯¹å¢å¼ºåçš„ Site æ•°æ®ã€‚</p>
<figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs wren"><span class="hljs-variable">function</span> <span class="hljs-title function_">isUnknown</span>(<span class="hljs-params">aCustomer</span>) &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-variable">aCustomer</span> <span class="hljs-operator">==</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;unknown&quot;</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>  <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-variable">aCustomer</span>.<span class="hljs-property">isUnknown</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼Œç¡®ä¿ä¸€åˆ‡æ­£å¸¸ï¼Œç„¶åé’ˆå¯¹ç‰¹ä¾‹ä½¿ç”¨å‡½æ•°ç»„åˆæˆå˜æ¢ï¼ˆ149ï¼‰ã€‚é¦–å…ˆæŠŠâ€œæœªçŸ¥é¡¾å®¢çš„åå­—â€çš„å¤„ç†é€»è¾‘æ¬è¿›å¢å¼ºå‡½æ•°ã€‚</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> enrich<span class="hljs-constructor">Site(<span class="hljs-params">aSite</span>)</span> &#123;<br>  const result = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">_</span>.</span></span>clone<span class="hljs-constructor">Deep(<span class="hljs-params">aSite</span>)</span>;<br>  const unknownCustomer = &#123;<br>    isUnknown: <span class="hljs-literal">true</span>,<br>    name: <span class="hljs-string">&quot;occupant&quot;</span>,<br>  &#125;;<br><br>  <span class="hljs-keyword">if</span> (is<span class="hljs-constructor">Unknown(<span class="hljs-params">result</span>.<span class="hljs-params">customer</span>)</span>) result.customer = unknownCustomer;<br>  <span class="hljs-keyword">else</span> result.customer.isUnknown = <span class="hljs-literal">false</span>;<br>  return result;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 1â€¦</strong></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const rawSite <span class="hljs-operator">=</span> acquireSiteData()<span class="hljs-comment">;</span><br>const site <span class="hljs-operator">=</span> enrichSite(rawSite)<span class="hljs-comment">;</span><br>const aCustomer <span class="hljs-operator">=</span> site.customer<span class="hljs-comment">;</span><br>// ... lots of intervening code ...<br>const customerName <span class="hljs-operator">=</span> aCustomer.name<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼Œç„¶åæ˜¯â€œæœªçŸ¥é¡¾å®¢çš„è®¡ä»·å¥—é¤â€çš„å¤„ç†é€»è¾‘ã€‚</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> enrich<span class="hljs-constructor">Site(<span class="hljs-params">aSite</span>)</span> &#123;<br>  const result = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">_</span>.</span></span>clone<span class="hljs-constructor">Deep(<span class="hljs-params">aSite</span>)</span>;<br>  const unknownCustomer = &#123;<br>    isUnknown: <span class="hljs-literal">true</span>,<br>    name: <span class="hljs-string">&quot;occupant&quot;</span>,<br>    billingPlan: registry.billingPlans.basic,<br>  &#125;;<br><br>  <span class="hljs-keyword">if</span> (is<span class="hljs-constructor">Unknown(<span class="hljs-params">result</span>.<span class="hljs-params">customer</span>)</span>) result.customer = unknownCustomer;<br>  <span class="hljs-keyword">else</span> result.customer.isUnknown = <span class="hljs-literal">false</span>;<br>  return result;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 2â€¦</strong></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const plan <span class="hljs-operator">=</span> aCustomer.billingPlan<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p>å†æ¬¡æµ‹è¯•ï¼Œç„¶åå¤„ç†æœ€åä¸€å¤„å®¢æˆ·ç«¯ä»£ç ã€‚</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> enrich<span class="hljs-constructor">Site(<span class="hljs-params">aSite</span>)</span> &#123;<br>  const result = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">_</span>.</span></span>clone<span class="hljs-constructor">Deep(<span class="hljs-params">aSite</span>)</span>;<br>  const unknownCustomer = &#123;<br>    isUnknown: <span class="hljs-literal">true</span>,<br>    name: <span class="hljs-string">&quot;occupant&quot;</span>,<br>    billingPlan: registry.billingPlans.basic,<br>    paymentHistory: &#123;<br>      weeksDelinquentInLastYear: <span class="hljs-number">0</span>,<br>    &#125;,<br>  &#125;;<br><br>  <span class="hljs-keyword">if</span> (is<span class="hljs-constructor">Unknown(<span class="hljs-params">result</span>.<span class="hljs-params">customer</span>)</span>) result.customer = unknownCustomer;<br>  <span class="hljs-keyword">else</span> result.customer.isUnknown = <span class="hljs-literal">false</span>;<br>  return result;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å®¢æˆ·ç«¯ 3â€¦</strong></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const weeksDelinquent <span class="hljs-operator">=</span> aCustomer.paymentHistory.weeksDelinquentInLastYear<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<h2 id="10-6-å¼•å…¥æ–­è¨€ï¼ˆIntroduce-Assertionï¼‰"><a href="#10-6-å¼•å…¥æ–­è¨€ï¼ˆIntroduce-Assertionï¼‰" class="headerlink" title="10.6 å¼•å…¥æ–­è¨€ï¼ˆIntroduce Assertionï¼‰"></a>10.6 å¼•å…¥æ–­è¨€ï¼ˆIntroduce Assertionï¼‰</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs csharp">  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.discountRate)<br>  <span class="hljs-keyword">base</span> = <span class="hljs-keyword">base</span> - (<span class="hljs-keyword">this</span>.discountRate * <span class="hljs-keyword">base</span>);<br><br><br>  assert(<span class="hljs-keyword">this</span>.discountRate&gt;= <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.discountRate)<br>  <span class="hljs-keyword">base</span> = <span class="hljs-keyword">base</span> - (<span class="hljs-keyword">this</span>.discountRate * <span class="hljs-keyword">base</span>);<br></code></pre></td></tr></table></figure>

<h3 id="åŠ¨æœº-5"><a href="#åŠ¨æœº-5" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>å¸¸å¸¸ä¼šæœ‰è¿™æ ·ä¸€æ®µä»£ç ï¼šåªæœ‰å½“æŸä¸ªæ¡ä»¶ä¸ºçœŸæ—¶ï¼Œè¯¥æ®µä»£ç æ‰èƒ½æ­£å¸¸è¿è¡Œã€‚ä¾‹å¦‚ï¼Œå¹³æ–¹æ ¹è®¡ç®—åªå¯¹æ­£å€¼æ‰èƒ½è¿›è¡Œï¼Œåˆä¾‹å¦‚ï¼ŒæŸä¸ªå¯¹è±¡å¯èƒ½å‡è®¾ä¸€ç»„å­—æ®µä¸­è‡³å°‘æœ‰ä¸€ä¸ªä¸ç­‰äº nullã€‚</p>
<p>è¿™æ ·çš„å‡è®¾é€šå¸¸å¹¶æ²¡æœ‰åœ¨ä»£ç ä¸­æ˜ç¡®è¡¨ç°å‡ºæ¥ï¼Œä½ å¿…é¡»é˜…è¯»æ•´ä¸ªç®—æ³•æ‰èƒ½çœ‹å‡ºã€‚æœ‰æ—¶ç¨‹åºå‘˜ä¼šä»¥æ³¨é‡Šå†™å‡ºè¿™æ ·çš„å‡è®¾ï¼Œè€Œæˆ‘è¦ä»‹ç»çš„æ˜¯ä¸€ç§æ›´å¥½çš„æŠ€æœ¯â€”â€”ä½¿ç”¨æ–­è¨€æ˜ç¡®æ ‡æ˜è¿™äº›å‡è®¾ã€‚</p>
<p>æ–­è¨€æ˜¯ä¸€ä¸ªæ¡ä»¶è¡¨è¾¾å¼ï¼Œåº”è¯¥æ€»æ˜¯ä¸ºçœŸã€‚å¦‚æœå®ƒå¤±è´¥ï¼Œè¡¨ç¤ºç¨‹åºå‘˜çŠ¯äº†é”™è¯¯ã€‚æ–­è¨€çš„å¤±è´¥ä¸åº”è¯¥è¢«ç³»ç»Ÿä»»ä½•åœ°æ–¹æ•æ‰ã€‚æ•´ä¸ªç¨‹åºçš„è¡Œä¸ºåœ¨æœ‰æ²¡æœ‰æ–­è¨€å‡ºç°çš„æ—¶å€™éƒ½åº”è¯¥å®Œå…¨ä¸€æ ·ã€‚å®é™…ä¸Šï¼Œæœ‰äº›ç¼–ç¨‹è¯­è¨€ä¸­çš„æ–­è¨€å¯ä»¥åœ¨ç¼–è¯‘æœŸç”¨ä¸€ä¸ªå¼€å…³å®Œå…¨ç¦ç”¨æ‰ã€‚</p>
<p>æˆ‘å¸¸çœ‹è§æœ‰äººé¼“åŠ±ç”¨æ–­è¨€æ¥å‘ç°ç¨‹åºä¸­çš„é”™è¯¯ã€‚è¿™å›ºç„¶æ˜¯ä¸€ä»¶å¥½äº‹ï¼Œä½†å´ä¸æ˜¯ä½¿ç”¨æ–­è¨€çš„å”¯ä¸€ç†ç”±ã€‚æ–­è¨€æ˜¯ä¸€ç§å¾ˆæœ‰ä»·å€¼çš„äº¤æµå½¢å¼â€”â€”å®ƒä»¬å‘Šè¯‰é˜…è¯»è€…ï¼Œç¨‹åºåœ¨æ‰§è¡Œåˆ°è¿™ä¸€ç‚¹æ—¶ï¼Œå¯¹å½“å‰çŠ¶æ€åšäº†ä½•ç§å‡è®¾ã€‚å¦å¤–æ–­è¨€å¯¹è°ƒè¯•ä¹Ÿå¾ˆæœ‰å¸®åŠ©ã€‚è€Œä¸”ï¼Œå› ä¸ºå®ƒä»¬åœ¨äº¤æµä¸Šå¾ˆæœ‰ä»·å€¼ï¼Œå³ä½¿è§£å†³äº†å½“ä¸‹æ­£åœ¨è¿½è¸ªçš„é”™è¯¯ï¼Œæˆ‘è¿˜æ˜¯å€¾å‘äºæŠŠæ–­è¨€ç•™ç€ã€‚è‡ªæµ‹è¯•çš„ä»£ç é™ä½äº†æ–­è¨€åœ¨è°ƒè¯•æ–¹é¢çš„ä»·å€¼ï¼Œå› ä¸ºé€æ­¥é€¼è¿‘çš„å•å…ƒæµ‹è¯•é€šå¸¸èƒ½æ›´å¥½åœ°å¸®åŠ©è°ƒè¯•ï¼Œä½†æˆ‘ä»ç„¶çœ‹é‡æ–­è¨€åœ¨äº¤æµæ–¹é¢çš„ä»·å€¼ã€‚</p>
<h3 id="åšæ³•-5"><a href="#åšæ³•-5" class="headerlink" title="åšæ³•"></a>åšæ³•</h3><p>å¦‚æœä½ å‘ç°ä»£ç å‡è®¾æŸä¸ªæ¡ä»¶å§‹ç»ˆä¸ºçœŸï¼Œå°±åŠ å…¥ä¸€ä¸ªæ–­è¨€æ˜ç¡®è¯´æ˜è¿™ç§æƒ…å†µã€‚</p>
<p>å› ä¸ºæ–­è¨€åº”è¯¥ä¸ä¼šå¯¹ç³»ç»Ÿè¿è¡Œé€ æˆä»»ä½•å½±å“ï¼Œæ‰€ä»¥â€œåŠ å…¥æ–­è¨€â€æ°¸è¿œéƒ½åº”è¯¥æ˜¯è¡Œä¸ºä¿æŒçš„ã€‚</p>
<h3 id="èŒƒä¾‹-5"><a href="#èŒƒä¾‹-5" class="headerlink" title="èŒƒä¾‹"></a>èŒƒä¾‹</h3><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼šæŠ˜æ‰£ã€‚é¡¾å®¢ï¼ˆcustomerï¼‰ä¼šè·å¾—ä¸€ä¸ªæŠ˜æ‰£ç‡ï¼ˆdiscount rateï¼‰ï¼Œå¯ä»¥ç”¨äºæ‰€æœ‰å…¶è´­ä¹°çš„å•†å“ã€‚</p>
<p><strong>class Customerâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">applyDiscount(aNumber) &#123;<br>  <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.discountRate)<br>    ? aNumber - (<span class="hljs-keyword">this</span>.discountRate * aNumber)<br>    : aNumber;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¿™é‡Œæœ‰ä¸€ä¸ªå‡è®¾ï¼šæŠ˜æ‰£ç‡æ°¸è¿œæ˜¯æ­£æ•°ã€‚æˆ‘å¯ä»¥ç”¨æ–­è¨€æ˜ç¡®æ ‡ç¤ºå‡ºè¿™ä¸ªå‡è®¾ã€‚ä½†åœ¨ä¸€ä¸ªä¸‰å…ƒè¡¨è¾¾å¼ä¸­æ²¡åŠæ³•å¾ˆç®€å•åœ°æ’å…¥æ–­è¨€ï¼Œæ‰€ä»¥æˆ‘é¦–å…ˆè¦æŠŠè¿™ä¸ªè¡¨è¾¾å¼è½¬æ¢æˆ if-else çš„å½¢å¼ã€‚</p>
<p><strong>class Customerâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">applyDiscount(aNumber) &#123;<br>  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.discountRate) <span class="hljs-keyword">return</span> aNumber;<br>  <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> aNumber - (<span class="hljs-keyword">this</span>.discountRate * aNumber);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç°åœ¨æˆ‘å°±å¯ä»¥è½»æ¾åœ°åŠ å…¥æ–­è¨€äº†ã€‚</p>
<p><strong>class Customerâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">applyDiscount(aNumber) &#123;<br>  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.discountRate) <span class="hljs-keyword">return</span> aNumber;<br>  <span class="hljs-keyword">else</span> &#123;<br>    assert(<span class="hljs-keyword">this</span>.discountRate &gt;= <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">return</span> aNumber - (<span class="hljs-keyword">this</span>.discountRate * aNumber);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>å¯¹è¿™ä¸ªä¾‹å­è€Œè¨€ï¼Œæˆ‘æ›´æ„¿æ„æŠŠæ–­è¨€æ”¾åœ¨è®¾å€¼å‡½æ•°ä¸Šã€‚å¦‚æœåœ¨ applyDiscount å‡½æ•°å¤„å‘ç”Ÿæ–­è¨€å¤±è´¥ï¼Œæˆ‘è¿˜å¾—å…ˆè´¹åŠ›ææ¸…æ¥šéæ³•çš„æŠ˜æ‰£ç‡å€¼èµ·åˆæ˜¯ä»å“ªå„¿æ”¾è¿›å»çš„ã€‚</p>
<p><strong>class Customerâ€¦</strong></p>
<figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs wren"><span class="hljs-variable">set</span> <span class="hljs-title function_">discountRate</span>(<span class="hljs-params">aNumber</span>) &#123;<br>  <span class="hljs-title function_">assert</span>(<span class="hljs-literal">null</span> <span class="hljs-operator">==</span><span class="hljs-operator">=</span> <span class="hljs-variable">aNumber</span> <span class="hljs-operator">||</span> <span class="hljs-variable">aNumber</span> <span class="hljs-operator">&gt;=</span> <span class="hljs-number">0</span>);<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-variable">_discountRate</span> <span class="hljs-operator">=</span> <span class="hljs-variable">aNumber</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>çœŸæ­£å¼•èµ·é”™è¯¯çš„æºå¤´æœ‰å¯èƒ½å¾ˆéš¾å‘ç°â€”â€”ä¹Ÿè®¸æ˜¯è¾“å…¥æ•°æ®ä¸­è¯¯å†™äº†ä¸€ä¸ªå‡å·ï¼Œä¹Ÿè®¸æ˜¯æŸå¤„ä»£ç åšæ•°æ®è½¬æ¢æ—¶çŠ¯äº†é”™è¯¯ã€‚åƒè¿™æ ·çš„æ–­è¨€å¯¹äºå‘ç°é”™è¯¯æºå¤´ç‰¹åˆ«æœ‰å¸®åŠ©ã€‚</p>
<p>æ³¨æ„ï¼Œä¸è¦æ»¥ç”¨æ–­è¨€ã€‚æˆ‘ä¸ä¼šä½¿ç”¨æ–­è¨€æ¥æ£€æŸ¥æ‰€æœ‰â€œæˆ‘è®¤ä¸ºåº”è¯¥ä¸ºçœŸâ€çš„æ¡ä»¶ï¼Œåªç”¨æ¥æ£€æŸ¥â€œå¿…é¡»ä¸ºçœŸâ€çš„æ¡ä»¶ã€‚æ»¥ç”¨æ–­è¨€å¯èƒ½ä¼šé€ æˆä»£ç é‡å¤ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†ä¸Šé¢è¿™æ ·çš„æ¡ä»¶é€»è¾‘æ—¶ã€‚æ‰€ä»¥æˆ‘å‘ç°ï¼Œå¾ˆæœ‰å¿…è¦å»æ‰æ¡ä»¶é€»è¾‘ä¸­çš„é‡å¤ï¼Œé€šå¸¸å¯ä»¥å€ŸåŠ©æç‚¼å‡½æ•°ï¼ˆ106ï¼‰æ‰‹æ³•ã€‚</p>
<p>æˆ‘åªç”¨æ–­è¨€é¢„é˜²ç¨‹åºå‘˜çš„é”™è¯¯ã€‚å¦‚æœè¦ä»æŸä¸ªå¤–éƒ¨æ•°æ®æºè¯»å–æ•°æ®ï¼Œé‚£ä¹ˆæ‰€æœ‰å¯¹è¾“å…¥å€¼çš„æ£€æŸ¥éƒ½åº”è¯¥æ˜¯ç¨‹åºçš„ä¸€ç­‰å…¬æ°‘ï¼Œè€Œä¸èƒ½ç”¨æ–­è¨€å®ç°â€”â€”é™¤éæˆ‘å¯¹è¿™ä¸ªå¤–éƒ¨æ•°æ®æºæœ‰ç»å¯¹çš„ä¿¡å¿ƒã€‚æ–­è¨€æ˜¯å¸®åŠ©æˆ‘ä»¬è·Ÿè¸ª bug çš„æœ€åä¸€æ‹›ï¼Œæ‰€ä»¥ï¼Œæˆ–è®¸å¬æ¥è®½åˆºï¼Œåªæœ‰å½“æˆ‘è®¤ä¸ºæ–­è¨€ç»å¯¹ä¸ä¼šå¤±è´¥çš„æ—¶å€™ï¼Œæˆ‘æ‰ä¼šä½¿ç”¨æ–­è¨€ã€‚</p>
<hr>
<h1 id="11-é‡æ„-API"><a href="#11-é‡æ„-API" class="headerlink" title="11.é‡æ„ API"></a>11.é‡æ„ API</h1><p>æ¨¡å—å’Œå‡½æ•°æ˜¯è½¯ä»¶çš„éª¨è‚‰ï¼Œè€Œ API åˆ™æ˜¯å°†éª¨è‚‰è¿æ¥èµ·æ¥çš„å…³èŠ‚ã€‚æ˜“äºç†è§£å’Œä½¿ç”¨çš„ API éå¸¸é‡è¦ï¼Œä½†åŒæ—¶ä¹Ÿå¾ˆéš¾è·å¾—ã€‚éšç€å¯¹è½¯ä»¶ç†è§£çš„åŠ æ·±ï¼Œæˆ‘ä¼šå­¦åˆ°å¦‚ä½•æ”¹è¿› APIï¼Œè¿™æ—¶æˆ‘ä¾¿éœ€è¦å¯¹ API è¿›è¡Œé‡æ„ã€‚</p>
<p>å¥½çš„ API ä¼šæŠŠæ›´æ–°æ•°æ®çš„å‡½æ•°ä¸åªæ˜¯è¯»å–æ•°æ®çš„å‡½æ•°æ¸…æ™°åˆ†å¼€ã€‚å¦‚æœæˆ‘çœ‹åˆ°è¿™ä¸¤ç±»æ“ä½œè¢«æ··åœ¨ä¸€èµ·ï¼Œå°±ä¼šç”¨å°†æŸ¥è¯¢å‡½æ•°å’Œä¿®æ”¹å‡½æ•°åˆ†ç¦»ï¼ˆ306ï¼‰å°†å®ƒä»¬åˆ†å¼€ã€‚å¦‚æœä¸¤ä¸ªå‡½æ•°çš„åŠŸèƒ½éå¸¸ç›¸ä¼¼ã€åªæœ‰ä¸€äº›æ•°å€¼ä¸åŒï¼Œæˆ‘å¯ä»¥ç”¨å‡½æ•°å‚æ•°åŒ–ï¼ˆ310ï¼‰å°†å…¶ç»Ÿä¸€ã€‚ä½†æœ‰äº›å‚æ•°å…¶å®åªæ˜¯ä¸€ä¸ªæ ‡è®°ï¼Œæ ¹æ®è¿™ä¸ªæ ‡è®°çš„ä¸åŒï¼Œå‡½æ•°ä¼šæœ‰æˆªç„¶ä¸åŒçš„è¡Œä¸ºï¼Œæ­¤æ—¶æœ€å¥½ç”¨ç§»é™¤æ ‡è®°å‚æ•°ï¼ˆ314ï¼‰å°†ä¸åŒçš„è¡Œä¸ºå½»åº•åˆ†å¼€ã€‚</p>
<p>åœ¨å‡½æ•°é—´ä¼ é€’æ—¶ï¼Œæ•°æ®ç»“æ„å¸¸ä¼šæ¯«æ— å¿…è¦åœ°è¢«æ‹†å¼€ï¼Œæˆ‘æ›´æ„¿æ„ç”¨ä¿æŒå¯¹è±¡å®Œæ•´ï¼ˆ319ï¼‰å°†å…¶èšæ‹¢ã€‚å‡½æ•°éœ€è¦çš„ä¸€ä»½ä¿¡æ¯ï¼Œç©¶ç«Ÿä½•æ—¶åº”è¯¥ä½œä¸ºå‚æ•°ä¼ å…¥ã€ä½•æ—¶åº”è¯¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°è·å¾—ï¼Œè¿™æ˜¯ä¸€ä¸ªéœ€è¦åå¤æ¨æ•²çš„å†³å®šï¼Œæ¨æ•²çš„è¿‡ç¨‹ä¸­å¸¸å¸¸è¦ç”¨åˆ°ä»¥æŸ¥è¯¢å–ä»£å‚æ•°ï¼ˆ324ï¼‰å’Œä»¥å‚æ•°å–ä»£æŸ¥è¯¢ï¼ˆ327ï¼‰ã€‚</p>
<p>ç±»æ˜¯ä¸€ç§å¸¸è§çš„æ¨¡å—å½¢å¼ã€‚æˆ‘å¸Œæœ›å°½å¯èƒ½ä¿æŒå¯¹è±¡ä¸å¯å˜ï¼Œæ‰€ä»¥åªè¦æœ‰å¯èƒ½ï¼Œæˆ‘å°±ä¼šä½¿ç”¨ç§»é™¤è®¾å€¼å‡½æ•°ï¼ˆ331ï¼‰ã€‚å½“è°ƒç”¨è€…è¦æ±‚ä¸€ä¸ªæ–°å¯¹è±¡æ—¶ï¼Œæˆ‘ç»å¸¸éœ€è¦æ¯”æ„é€ å‡½æ•°æ›´å¤šçš„çµæ´»æ€§ï¼Œå¯ä»¥å€ŸåŠ©ä»¥å·¥å‚å‡½æ•°å–ä»£æ„é€ å‡½æ•°ï¼ˆ334ï¼‰è·å¾—è¿™ç§çµæ´»æ€§ã€‚</p>
<p>æœ‰æ—¶ä½ ä¼šé‡åˆ°ä¸€ä¸ªç‰¹åˆ«å¤æ‚çš„å‡½æ•°ï¼Œå›´ç»•ç€å®ƒä¼ å…¥ä¼ å‡ºä¸€å¤§å †æ•°æ®ã€‚æœ€åä¸¤ä¸ªé‡æ„æ‰‹æ³•ä¸“é—¨ç”¨äºç ´è§£è¿™ä¸ªéš¾é¢˜ã€‚æˆ‘å¯ä»¥ç”¨ä»¥å‘½ä»¤å–ä»£å‡½æ•°ï¼ˆ337ï¼‰å°†è¿™ä¸ªå‡½æ•°å˜æˆå¯¹è±¡ï¼Œè¿™æ ·å¯¹å‡½æ•°ä½“ä½¿ç”¨æç‚¼å‡½æ•°ï¼ˆ106ï¼‰æ—¶ä¼šæ›´å®¹æ˜“ã€‚å¦‚æœç¨åæˆ‘å¯¹è¯¥å‡½æ•°åšäº†ç®€åŒ–ï¼Œä¸å†éœ€è¦å°†å…¶ä½œä¸ºå‘½ä»¤å¯¹è±¡äº†ï¼Œå¯ä»¥ç”¨ä»¥å‡½æ•°å–ä»£å‘½ä»¤ï¼ˆ344ï¼‰å†æŠŠå®ƒå˜å›å‡½æ•°ã€‚</p>
<h2 id="11-1-å°†æŸ¥è¯¢å‡½æ•°å’Œä¿®æ”¹å‡½æ•°åˆ†ç¦»ï¼ˆSeparate-Query-from-Modifierï¼‰"><a href="#11-1-å°†æŸ¥è¯¢å‡½æ•°å’Œä¿®æ”¹å‡½æ•°åˆ†ç¦»ï¼ˆSeparate-Query-from-Modifierï¼‰" class="headerlink" title="11.1 å°†æŸ¥è¯¢å‡½æ•°å’Œä¿®æ”¹å‡½æ•°åˆ†ç¦»ï¼ˆSeparate Query from Modifierï¼‰"></a>11.1 å°†æŸ¥è¯¢å‡½æ•°å’Œä¿®æ”¹å‡½æ•°åˆ†ç¦»ï¼ˆSeparate Query from Modifierï¼‰</h2><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getTotalOutstandingAndSendBill</span>(<span class="hljs-params"></span>) &#123;<br>const result = customer.invoices.<span class="hljs-built_in">reduce</span>(<span class="hljs-function">(<span class="hljs-params">total, each</span>) =&gt;</span> each.amount + total, <span class="hljs-number">0</span>);<br>sendBill();<br><span class="hljs-keyword">return</span> result;<br>&#125;<br><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">totalOutstanding</span>(<span class="hljs-params"></span>) &#123;<br><span class="hljs-keyword">return</span> customer.invoices.<span class="hljs-built_in">reduce</span>(<span class="hljs-function">(<span class="hljs-params">total, each</span>) =&gt;</span> each.amount + total, <span class="hljs-number">0</span>);<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">sendBill</span>(<span class="hljs-params"></span>) &#123;<br>emailGateway.send(formatBill(customer));<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="åŠ¨æœº-6"><a href="#åŠ¨æœº-6" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>å¦‚æœæŸä¸ªå‡½æ•°åªæ˜¯æä¾›ä¸€ä¸ªå€¼ï¼Œæ²¡æœ‰ä»»ä½•çœ‹å¾—åˆ°çš„å‰¯ä½œç”¨ï¼Œé‚£ä¹ˆè¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰ä»·å€¼çš„ä¸œè¥¿ã€‚æˆ‘å¯ä»¥ä»»æ„è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œä¹Ÿå¯ä»¥æŠŠè°ƒç”¨åŠ¨ä½œæ¬åˆ°è°ƒç”¨å‡½æ•°çš„å…¶ä»–åœ°æ–¹ã€‚è¿™ç§å‡½æ•°çš„æµ‹è¯•ä¹Ÿæ›´å®¹æ˜“ã€‚ç®€è€Œè¨€ä¹‹ï¼Œéœ€è¦æ“å¿ƒçš„äº‹æƒ…å°‘å¤šäº†ã€‚</p>
<p>æ˜ç¡®è¡¨ç°å‡ºâ€œæœ‰å‰¯ä½œç”¨â€ä¸â€œæ— å‰¯ä½œç”¨â€ä¸¤ç§å‡½æ•°ä¹‹é—´çš„å·®å¼‚ï¼Œæ˜¯ä¸ªå¾ˆå¥½çš„æƒ³æ³•ã€‚ä¸‹é¢æ˜¯ä¸€æ¡å¥½è§„åˆ™ï¼šä»»ä½•æœ‰è¿”å›å€¼çš„å‡½æ•°ï¼Œéƒ½ä¸åº”è¯¥æœ‰çœ‹å¾—åˆ°çš„å‰¯ä½œç”¨â€”â€”å‘½ä»¤ä¸æŸ¥è¯¢åˆ†ç¦»ï¼ˆCommand-Query Separationï¼‰[mf-cqs]ã€‚æœ‰äº›ç¨‹åºå‘˜ç”šè‡³å°†æ­¤ä½œä¸ºä¸€æ¡å¿…é¡»éµå®ˆçš„è§„åˆ™ã€‚å°±åƒå¯¹å¾…ä»»ä½•ä¸œè¥¿ä¸€æ ·ï¼Œæˆ‘å¹¶ä¸ç»å¯¹éµå®ˆå®ƒï¼Œä¸è¿‡æˆ‘æ€»æ˜¯å°½é‡éµå®ˆï¼Œè€Œå®ƒä¹Ÿå›æŠ¥æˆ‘å¾ˆå¥½çš„æ•ˆæœã€‚</p>
<p>å¦‚æœé‡åˆ°ä¸€ä¸ªâ€œæ—¢æœ‰è¿”å›å€¼åˆæœ‰å‰¯ä½œç”¨â€çš„å‡½æ•°ï¼Œæˆ‘å°±ä¼šè¯•ç€å°†æŸ¥è¯¢åŠ¨ä½œä»ä¿®æ”¹åŠ¨ä½œä¸­åˆ†ç¦»å‡ºæ¥ã€‚</p>
<p>ä½ ä¹Ÿè®¸å·²ç»æ³¨æ„åˆ°äº†ï¼šæˆ‘ä½¿ç”¨â€œçœ‹å¾—åˆ°çš„å‰¯ä½œç”¨â€è¿™ç§è¯´æ³•ã€‚æœ‰ä¸€ç§å¸¸è§çš„ä¼˜åŒ–åŠæ³•æ˜¯ï¼šå°†æŸ¥è¯¢æ‰€å¾—ç»“æœç¼“å­˜äºæŸä¸ªå­—æ®µä¸­ï¼Œè¿™æ ·ä¸€æ¥åç»­çš„é‡å¤æŸ¥è¯¢å°±å¯ä»¥å¤§å¤§åŠ å¿«é€Ÿåº¦ã€‚è™½ç„¶è¿™ç§åšæ³•æ”¹å˜äº†å¯¹è±¡ä¸­ç¼“å­˜çš„çŠ¶æ€ï¼Œä½†è¿™ä¸€ä¿®æ”¹æ˜¯å¯Ÿè§‰ä¸åˆ°çš„ï¼Œå› ä¸ºä¸è®ºå¦‚ä½•æŸ¥è¯¢ï¼Œæ€»æ˜¯è·å¾—ç›¸åŒç»“æœã€‚</p>
<h3 id="åšæ³•-6"><a href="#åšæ³•-6" class="headerlink" title="åšæ³•"></a>åšæ³•</h3><p>å¤åˆ¶æ•´ä¸ªå‡½æ•°ï¼Œå°†å…¶ä½œä¸ºä¸€ä¸ªæŸ¥è¯¢æ¥å‘½åã€‚</p>
<p>å¦‚æœæƒ³ä¸å‡ºå¥½åå­—ï¼Œå¯ä»¥çœ‹çœ‹å‡½æ•°è¿”å›çš„æ˜¯ä»€ä¹ˆã€‚æŸ¥è¯¢çš„ç»“æœä¼šè¢«å¡«å…¥ä¸€ä¸ªå˜é‡ï¼Œè¿™ä¸ªå˜é‡çš„åå­—åº”è¯¥èƒ½å¯¹å‡½æ•°å¦‚ä½•å‘½åæœ‰æ‰€å¯å‘ã€‚</p>
<p>ä»æ–°å»ºçš„æŸ¥è¯¢å‡½æ•°ä¸­å»æ‰æ‰€æœ‰é€ æˆå‰¯ä½œç”¨çš„è¯­å¥ã€‚</p>
<p>æ‰§è¡Œé™æ€æ£€æŸ¥ã€‚</p>
<p>æŸ¥æ‰¾æ‰€æœ‰è°ƒç”¨åŸå‡½æ•°çš„åœ°æ–¹ã€‚å¦‚æœè°ƒç”¨å¤„ç”¨åˆ°äº†è¯¥å‡½æ•°çš„è¿”å›å€¼ï¼Œå°±å°†å…¶æ”¹ä¸ºè°ƒç”¨æ–°å»ºçš„æŸ¥è¯¢å‡½æ•°ï¼Œå¹¶åœ¨ä¸‹é¢é©¬ä¸Šå†è°ƒç”¨ä¸€æ¬¡åŸå‡½æ•°ã€‚æ¯æ¬¡ä¿®æ”¹ä¹‹åéƒ½è¦æµ‹è¯•ã€‚</p>
<p>ä»åŸå‡½æ•°ä¸­å»æ‰è¿”å›å€¼ã€‚</p>
<p>æµ‹è¯•ã€‚</p>
<p>å®Œæˆé‡æ„ä¹‹åï¼ŒæŸ¥è¯¢å‡½æ•°ä¸åŸå‡½æ•°ä¹‹é—´å¸¸ä¼šæœ‰é‡å¤ä»£ç ï¼Œå¯ä»¥åšå¿…è¦çš„æ¸…ç†ã€‚</p>
<h3 id="èŒƒä¾‹-6"><a href="#èŒƒä¾‹-6" class="headerlink" title="èŒƒä¾‹"></a>èŒƒä¾‹</h3><p>æœ‰è¿™æ ·ä¸€ä¸ªå‡½æ•°ï¼šå®ƒä¼šéå†ä¸€ä»½æ¶æ£ï¼ˆmiscreantï¼‰åå•ï¼Œæ£€æŸ¥ä¸€ç¾¤äººï¼ˆpeopleï¼‰é‡Œæ˜¯å¦æ··è¿›äº†æ¶æ£ã€‚å¦‚æœå‘ç°äº†æ¶æ£ï¼Œè¯¥å‡½æ•°ä¼šè¿”å›æ¶æ£çš„åå­—ï¼Œå¹¶æ‹‰å“è­¦æŠ¥ã€‚å¦‚æœäººç¾¤ä¸­æœ‰å¤šåæ¶æ£ï¼Œè¯¥å‡½æ•°ä¹Ÿåªæ±‡æŠ¥æ‰¾å‡ºçš„ç¬¬ä¸€åæ¶æ£ï¼ˆæˆ‘çŒœè¿™å°±å·²ç»å¤Ÿäº†ï¼‰ã€‚</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs abnf">function alertForMiscreant(people) &#123;<br>  for (const p of people) &#123;<br>    if (p <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;Don&quot;</span>) &#123;<br>      setOffAlarms()<span class="hljs-comment">;</span><br>      return <span class="hljs-string">&quot;Don&quot;</span><span class="hljs-comment">;</span><br>    &#125;<br>    if (p <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;John&quot;</span>) &#123;<br>      setOffAlarms()<span class="hljs-comment">;</span><br>      return <span class="hljs-string">&quot;John&quot;</span><span class="hljs-comment">;</span><br>    &#125;<br>  &#125;<br>  return <span class="hljs-string">&quot;&quot;</span><span class="hljs-comment">;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>é¦–å…ˆæˆ‘å¤åˆ¶æ•´ä¸ªå‡½æ•°ï¼Œç”¨å®ƒçš„æŸ¥è¯¢éƒ¨åˆ†åŠŸèƒ½ä¸ºå…¶å‘½åã€‚</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs abnf">function findMiscreant(people) &#123;<br>  for (const p of people) &#123;<br>    if (p <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;Don&quot;</span>) &#123;<br>      setOffAlarms()<span class="hljs-comment">;</span><br>      return <span class="hljs-string">&quot;Don&quot;</span><span class="hljs-comment">;</span><br>    &#125;<br>    if (p <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;John&quot;</span>) &#123;<br>      setOffAlarms()<span class="hljs-comment">;</span><br>      return <span class="hljs-string">&quot;John&quot;</span><span class="hljs-comment">;</span><br>    &#125;<br>  &#125;<br>  return <span class="hljs-string">&quot;&quot;</span><span class="hljs-comment">;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç„¶ååœ¨æ–°å»ºçš„æŸ¥è¯¢å‡½æ•°ä¸­å»æ‰å‰¯ä½œç”¨ã€‚</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs abnf">function findMiscreant(people) &#123;<br>  for (const p of people) &#123;<br>    if (p <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;Don&quot;</span>) &#123;<br>      setOffAlarms()<span class="hljs-comment">;</span><br>      return <span class="hljs-string">&quot;Don&quot;</span><span class="hljs-comment">;</span><br>    &#125;<br>    if (p <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;John&quot;</span>) &#123;<br>      setOffAlarms()<span class="hljs-comment">;</span><br>      return <span class="hljs-string">&quot;John&quot;</span><span class="hljs-comment">;</span><br>    &#125;<br>  &#125;<br>  return <span class="hljs-string">&quot;&quot;</span><span class="hljs-comment">;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç„¶åæ‰¾åˆ°æ‰€æœ‰åŸå‡½æ•°çš„è°ƒç”¨è€…ï¼Œå°†å…¶æ”¹ä¸ºè°ƒç”¨æ–°å»ºçš„æŸ¥è¯¢å‡½æ•°ï¼Œå¹¶åœ¨å…¶åè°ƒç”¨ä¸€æ¬¡ä¿®æ”¹å‡½æ•°ï¼ˆä¹Ÿå°±æ˜¯åŸå‡½æ•°ï¼‰ã€‚äºæ˜¯ä»£ç </p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const found <span class="hljs-operator">=</span> alertForMiscreant(people)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p>å°±å˜æˆäº†</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">const found = find<span class="hljs-constructor">Miscreant(<span class="hljs-params">people</span>)</span>;<br>alert<span class="hljs-constructor">ForMiscreant(<span class="hljs-params">people</span>)</span>;<br></code></pre></td></tr></table></figure>

<p>ç°åœ¨å¯ä»¥ä»ä¿®æ”¹å‡½æ•°ä¸­å»æ‰æ‰€æœ‰è¿”å›å€¼äº†ã€‚</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs abnf">function alertForMiscreant(people) &#123;<br>  for (const p of people) &#123;<br>    if (p <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;Don&quot;</span>) &#123;<br>      setOffAlarms()<span class="hljs-comment">;</span><br>      return<span class="hljs-comment">;</span><br>    &#125;<br>    if (p <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;John&quot;</span>) &#123;<br>      setOffAlarms()<span class="hljs-comment">;</span><br>      return<span class="hljs-comment">;</span><br>    &#125;<br>  &#125;<br>  return<span class="hljs-comment">;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼ŒåŸæ¥çš„ä¿®æ”¹å‡½æ•°å’Œæ–°å»ºçš„æŸ¥è¯¢å‡½æ•°ä¹‹é—´æœ‰å¤§é‡çš„é‡å¤ä»£ç ï¼Œæˆ‘å¯ä»¥ä½¿ç”¨æ›¿æ¢ç®—æ³•ï¼ˆ195ï¼‰ï¼Œè®©ä¿®æ”¹å‡½æ•°ä½¿ç”¨æŸ¥è¯¢å‡½æ•°ã€‚</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> alert<span class="hljs-constructor">ForMiscreant(<span class="hljs-params">people</span>)</span> &#123;<br>  <span class="hljs-keyword">if</span> (find<span class="hljs-constructor">Miscreant(<span class="hljs-params">people</span>)</span> !== <span class="hljs-string">&quot;&quot;</span>) set<span class="hljs-constructor">OffAlarms()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="11-2-å‡½æ•°å‚æ•°åŒ–ï¼ˆParameterize-Functionï¼‰"><a href="#11-2-å‡½æ•°å‚æ•°åŒ–ï¼ˆParameterize-Functionï¼‰" class="headerlink" title="11.2 å‡½æ•°å‚æ•°åŒ–ï¼ˆParameterize Functionï¼‰"></a>11.2 å‡½æ•°å‚æ•°åŒ–ï¼ˆParameterize Functionï¼‰</h2><p>æ›¾ç”¨åï¼šä»¤å‡½æ•°æºå¸¦å‚æ•°ï¼ˆParameterize Methodï¼‰</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">tenPercentRaise</span>(aPerson) &#123;<br>  aPerson.salary = aPerson.salary.multiply(1.1);<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title">fivePercentRaise</span>(aPerson) &#123;<br>  aPerson.salary = aPerson.salary.multiply(1.05);<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title">raise</span>(aPerson, factor) &#123;<br>  aPerson.salary = aPerson.salary.multiply(1 + factor);<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="åŠ¨æœº-7"><a href="#åŠ¨æœº-7" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>å¦‚æœæˆ‘å‘ç°ä¸¤ä¸ªå‡½æ•°é€»è¾‘éå¸¸ç›¸ä¼¼ï¼Œåªæœ‰ä¸€äº›å­—é¢é‡å€¼ä¸åŒï¼Œå¯ä»¥å°†å…¶åˆå¹¶æˆä¸€ä¸ªå‡½æ•°ï¼Œä»¥å‚æ•°çš„å½¢å¼ä¼ å…¥ä¸åŒçš„å€¼ï¼Œä»è€Œæ¶ˆé™¤é‡å¤ã€‚è¿™ä¸ªé‡æ„å¯ä»¥ä½¿å‡½æ•°æ›´æœ‰ç”¨ï¼Œå› ä¸ºé‡æ„åçš„å‡½æ•°è¿˜å¯ä»¥ç”¨äºå¤„ç†å…¶ä»–çš„å€¼ã€‚</p>
<h3 id="åšæ³•-7"><a href="#åšæ³•-7" class="headerlink" title="åšæ³•"></a>åšæ³•</h3><p>ä»ä¸€ç»„ç›¸ä¼¼çš„å‡½æ•°ä¸­é€‰æ‹©ä¸€ä¸ªã€‚</p>
<p>è¿ç”¨æ”¹å˜å‡½æ•°å£°æ˜ï¼ˆ124ï¼‰ï¼ŒæŠŠéœ€è¦ä½œä¸ºå‚æ•°ä¼ å…¥çš„å­—é¢é‡æ·»åŠ åˆ°å‚æ•°åˆ—è¡¨ä¸­ã€‚</p>
<p>ä¿®æ”¹è¯¥å‡½æ•°æ‰€æœ‰çš„è°ƒç”¨å¤„ï¼Œä½¿å…¶åœ¨è°ƒç”¨æ—¶ä¼ å…¥è¯¥å­—é¢é‡å€¼ã€‚</p>
<p>æµ‹è¯•ã€‚</p>
<p>ä¿®æ”¹å‡½æ•°ä½“ï¼Œä»¤å…¶ä½¿ç”¨æ–°ä¼ å…¥çš„å‚æ•°ã€‚æ¯ä½¿ç”¨ä¸€ä¸ªæ–°å‚æ•°éƒ½è¦æµ‹è¯•ã€‚</p>
<p>å¯¹äºå…¶ä»–ä¸ä¹‹ç›¸ä¼¼çš„å‡½æ•°ï¼Œé€ä¸€å°†å…¶è°ƒç”¨å¤„æ”¹ä¸ºè°ƒç”¨å·²ç»å‚æ•°åŒ–çš„å‡½æ•°ã€‚æ¯æ¬¡ä¿®æ”¹åéƒ½è¦æµ‹è¯•ã€‚</p>
<p>å¦‚æœç¬¬ä¸€ä¸ªå‡½æ•°ç»è¿‡å‚æ•°åŒ–ä»¥åä¸èƒ½ç›´æ¥æ›¿ä»£å¦ä¸€ä¸ªä¸ä¹‹ç›¸ä¼¼çš„å‡½æ•°ï¼Œå°±å…ˆå¯¹å‚æ•°åŒ–ä¹‹åçš„å‡½æ•°åšå¿…è¦çš„è°ƒæ•´ï¼Œå†åšæ›¿æ¢ã€‚</p>
<h3 id="èŒƒä¾‹-7"><a href="#èŒƒä¾‹-7" class="headerlink" title="èŒƒä¾‹"></a>èŒƒä¾‹</h3><p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„ä¾‹å­ï¼š</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">tenPercentRaise</span>(aPerson) &#123;<br>  aPerson.salary = aPerson.salary.multiply(1.1);<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title">fivePercentRaise</span>(aPerson) &#123;<br>  aPerson.salary = aPerson.salary.multiply(1.05);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>å¾ˆæ˜æ˜¾æˆ‘å¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªå‡½æ•°æ¥æ›¿æ¢ä¸Šé¢ä¸¤ä¸ªï¼š</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">raise</span>(aPerson, factor) &#123;<br>  aPerson.salary = aPerson.salary.multiply(1 + factor);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æƒ…å†µå¯èƒ½æ¯”è¿™ä¸ªæ›´å¤æ‚ä¸€äº›ã€‚ä¾‹å¦‚ä¸‹åˆ—ä»£ç ï¼š</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">baseCharge</span>(usage) &#123;<br> if (usage &lt; 0) <span class="hljs-keyword">return</span> <span class="hljs-type">usd(0)</span>;<br> const amount =<br>    bottomBand(usage) * <span class="hljs-number">0.03</span><br>    + middleBand(usage) * <span class="hljs-number">0.05</span><br>    + topBand(usage) * <span class="hljs-number">0.07</span>;<br> <span class="hljs-keyword">return</span> usd(amount);<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title">bottomBand</span>(usage) &#123;<br> <span class="hljs-keyword">return</span> <span class="hljs-type">Math.min(usage,</span> <span class="hljs-number">100</span>);<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title">middleBand</span>(usage) &#123;<br> <span class="hljs-keyword">return</span> <span class="hljs-type">usage</span> &gt; <span class="hljs-number">100</span> ? Math.min(usage, <span class="hljs-number">200</span>) - <span class="hljs-number">100</span> : 0;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title">topBand</span>(usage) &#123;<br> <span class="hljs-keyword">return</span> <span class="hljs-type">usage</span> &gt; <span class="hljs-number">200</span> ? usage - <span class="hljs-number">200</span> : 0;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¿™å‡ ä¸ªå‡½æ•°ä¸­çš„é€»è¾‘æ˜æ˜¾å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯ä¸æ˜¯ç›¸ä¼¼åˆ°è¶³ä»¥æ”¯æ’‘ä¸€ä¸ªå‚æ•°åŒ–çš„è®¡ç®—â€œè®¡è´¹æ¡£æ¬¡â€ï¼ˆbandï¼‰çš„å‡½æ•°ï¼Ÿè¿™æ¬¡å°±ä¸åƒå‰é¢ç¬¬ä¸€ä¸ªä¾‹å­é‚£æ ·ä¸€ç›®äº†ç„¶äº†ã€‚</p>
<p>åœ¨å°è¯•å¯¹å‡ ä¸ªç›¸å…³çš„å‡½æ•°åšå‚æ•°åŒ–æ“ä½œæ—¶ï¼Œæˆ‘ä¼šå…ˆä»ä¸­æŒ‘é€‰ä¸€ä¸ªï¼Œåœ¨ä¸Šé¢æ·»åŠ å‚æ•°ï¼ŒåŒæ—¶ç•™æ„å…¶ä»–å‡ ç§æƒ…å†µã€‚åœ¨ç±»ä¼¼è¿™æ ·å¤„ç†â€œèŒƒå›´â€çš„æƒ…å†µä¸‹ï¼Œé€šå¸¸ä»ä½äºä¸­é—´çš„èŒƒå›´å¼€å§‹ç€æ‰‹è¾ƒå¥½ã€‚æ‰€ä»¥æˆ‘é¦–å…ˆé€‰æ‹©äº† middleBand å‡½æ•°æ¥æ·»åŠ å‚æ•°ï¼Œç„¶åè°ƒæ•´å…¶ä»–çš„è°ƒç”¨è€…æ¥é€‚åº”å®ƒã€‚</p>
<p>middleBand ä½¿ç”¨äº†ä¸¤ä¸ªå­—é¢é‡å€¼ï¼Œå³ 100 å’Œ 200ï¼Œåˆ†åˆ«ä»£è¡¨â€œä¸­é—´æ¡£æ¬¡â€çš„ä¸‹ç•Œå’Œä¸Šç•Œã€‚æˆ‘é¦–å…ˆç”¨æ”¹å˜å‡½æ•°å£°æ˜ï¼ˆ124ï¼‰åŠ ä¸Šè¿™ä¸¤ä¸ªå‚æ•°ï¼ŒåŒæ—¶é¡ºæ‰‹ç»™å‡½æ•°æ”¹ä¸ªåï¼Œä½¿å…¶æ›´å¥½åœ°è¡¨è¿°å‚æ•°åŒ–ä¹‹åçš„å«ä¹‰ã€‚</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> within<span class="hljs-constructor">Band(<span class="hljs-params">usage</span>, <span class="hljs-params">bottom</span>, <span class="hljs-params">top</span>)</span> &#123;<br> return usage &gt; <span class="hljs-number">100</span> ? <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Math</span>.</span></span>min(usage, <span class="hljs-number">200</span>) - <span class="hljs-number">100</span> : <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-keyword">function</span> base<span class="hljs-constructor">Charge(<span class="hljs-params">usage</span>)</span> &#123;<br> <span class="hljs-keyword">if</span> (usage &lt; <span class="hljs-number">0</span>) return usd(<span class="hljs-number">0</span>);<br> const amount =<br>    bottom<span class="hljs-constructor">Band(<span class="hljs-params">usage</span>)</span><span class="hljs-operator"> * </span><span class="hljs-number">0.03</span><br>    + within<span class="hljs-constructor">Band(<span class="hljs-params">usage</span>, 100, 200)</span><span class="hljs-operator"> * </span><span class="hljs-number">0.05</span><br>    + top<span class="hljs-constructor">Band(<span class="hljs-params">usage</span>)</span><span class="hljs-operator"> * </span><span class="hljs-number">0.07</span>;<br> return usd(amount);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>åœ¨å‡½æ•°ä½“å†…éƒ¨ï¼ŒæŠŠä¸€ä¸ªå­—é¢é‡æ”¹ä¸ºä½¿ç”¨æ–°ä¼ å…¥çš„å‚æ•°ï¼š</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">withinBand</span>(usage, bottom, top) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-type">usage</span> &amp; gt;<br>  bottom ? Math.min(usage, <span class="hljs-number">200</span>) - bottom : 0;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç„¶åæ˜¯å¦ä¸€ä¸ªï¼š</p>
<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nsis"><span class="hljs-keyword">function</span> <span class="hljs-title function_">withinBand</span>(usage, <span class="hljs-literal">bottom</span>, <span class="hljs-literal">top</span>) &#123;<br>  <span class="hljs-keyword">return</span> usage &amp; gt<span class="hljs-comment">;</span><br>  <span class="hljs-literal">bottom</span> ? Math.min(usage, <span class="hljs-literal">top</span>) - <span class="hljs-literal">bottom</span> : <span class="hljs-number">0</span><span class="hljs-comment">;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>å¯¹äºåŸæœ¬è°ƒç”¨ bottomBand å‡½æ•°çš„åœ°æ–¹ï¼Œæˆ‘å°†å…¶æ”¹ä¸ºè°ƒç”¨å‚æ•°åŒ–äº†çš„æ–°å‡½æ•°ã€‚</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">function</span> baseCharge(<span class="hljs-keyword">usage</span>) &#123;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">usage</span> &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> usd(<span class="hljs-number">0</span>);<br> const amount =<br>    withinBand(<span class="hljs-keyword">usage</span>, <span class="hljs-number">0</span>, <span class="hljs-number">100</span>) * <span class="hljs-number">0.03</span><br>    + withinBand(<span class="hljs-keyword">usage</span>, <span class="hljs-number">100</span>, <span class="hljs-number">200</span>) * <span class="hljs-number">0.05</span><br>    + topBand(<span class="hljs-keyword">usage</span>) * <span class="hljs-number">0.07</span>;<br> <span class="hljs-keyword">return</span> usd(amount);<br>&#125;<br><br><span class="hljs-keyword">function</span> bottomBand(<span class="hljs-keyword">usage</span>) &#123;<br> <span class="hljs-keyword">return</span> Math.min(<span class="hljs-keyword">usage</span>, <span class="hljs-number">100</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ä¸ºäº†æ›¿æ¢å¯¹ topBand çš„è°ƒç”¨ï¼Œæˆ‘å°±å¾—ç”¨ä»£è¡¨â€œæ— ç©·å¤§â€çš„ Infinity ä½œä¸ºè¿™ä¸ªèŒƒå›´çš„ä¸Šç•Œã€‚</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">function</span> baseCharge(<span class="hljs-keyword">usage</span>) &#123;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">usage</span> &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> usd(<span class="hljs-number">0</span>);<br> const amount =<br>    withinBand(<span class="hljs-keyword">usage</span>, <span class="hljs-number">0</span>, <span class="hljs-number">100</span>) * <span class="hljs-number">0.03</span><br>    + withinBand(<span class="hljs-keyword">usage</span>, <span class="hljs-number">100</span>, <span class="hljs-number">200</span>) * <span class="hljs-number">0.05</span><br>    + withinBand(<span class="hljs-keyword">usage</span>, <span class="hljs-number">200</span>, <span class="hljs-keyword">Infinity</span>) * <span class="hljs-number">0.07</span>;<br> <span class="hljs-keyword">return</span> usd(amount);<br>&#125;<br><br><span class="hljs-keyword">function</span> topBand(<span class="hljs-keyword">usage</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">usage</span> &gt; <span class="hljs-number">200</span> ? <span class="hljs-keyword">usage</span> - <span class="hljs-number">200</span> : <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç…§ç°åœ¨çš„é€»è¾‘ï¼ŒbaseCharge ä¸€å¼€å§‹çš„å«è¯­å¥å·²ç»å¯ä»¥å»æ‰äº†ã€‚ä¸è¿‡ï¼Œå°½ç®¡è¿™æ¡è¯­å¥å·²ç»å¤±å»äº†é€»è¾‘ä¸Šçš„å¿…è¦æ€§ï¼Œæˆ‘è¿˜æ˜¯æ„¿æ„æŠŠå®ƒç•™åœ¨åŸåœ°ï¼Œå› ä¸ºå®ƒé˜æ˜äº†â€œä¼ å…¥çš„ usage å‚æ•°ä¸ºè´Ÿæ•°â€è¿™ç§æƒ…å†µæ˜¯å¦‚ä½•å¤„ç†çš„ã€‚</p>
<h2 id="11-3-ç§»é™¤æ ‡è®°å‚æ•°ï¼ˆRemove-Flag-Argumentï¼‰"><a href="#11-3-ç§»é™¤æ ‡è®°å‚æ•°ï¼ˆRemove-Flag-Argumentï¼‰" class="headerlink" title="11.3 ç§»é™¤æ ‡è®°å‚æ•°ï¼ˆRemove Flag Argumentï¼‰"></a>11.3 ç§»é™¤æ ‡è®°å‚æ•°ï¼ˆRemove Flag Argumentï¼‰</h2><p>æ›¾ç”¨åï¼šä»¥æ˜ç¡®å‡½æ•°å–ä»£å‚æ•°ï¼ˆReplace Parameter with Explicit Methodsï¼‰</p>
<figure class="highlight wren"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs wren"><span class="hljs-variable">function</span> <span class="hljs-title function_">setDimension</span>(<span class="hljs-params">name</span>, <span class="hljs-params">value</span>) &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-variable">name</span> <span class="hljs-operator">==</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;height&quot;</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-variable">_height</span> <span class="hljs-operator">=</span> <span class="hljs-variable">value</span>;<br>    <span class="hljs-keyword">return</span>;<br>  &#125;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-variable">name</span> <span class="hljs-operator">==</span><span class="hljs-operator">=</span> <span class="hljs-string">&quot;width&quot;</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-variable">_width</span> <span class="hljs-operator">=</span> <span class="hljs-variable">value</span>;<br>    <span class="hljs-keyword">return</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-variable">function</span> <span class="hljs-title function_">setHeight</span>(<span class="hljs-params">value</span>) &#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-variable">_height</span> <span class="hljs-operator">=</span> <span class="hljs-variable">value</span>;<br>&#125;<br><span class="hljs-variable">function</span> <span class="hljs-title function_">setWidth</span>(<span class="hljs-params">value</span>) &#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-variable">_width</span> <span class="hljs-operator">=</span> <span class="hljs-variable">value</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="åŠ¨æœº-8"><a href="#åŠ¨æœº-8" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>â€œæ ‡è®°å‚æ•°â€æ˜¯è¿™æ ·çš„ä¸€ç§å‚æ•°ï¼šè°ƒç”¨è€…ç”¨å®ƒæ¥æŒ‡ç¤ºè¢«è°ƒå‡½æ•°åº”è¯¥æ‰§è¡Œå“ªä¸€éƒ¨åˆ†é€»è¾‘ã€‚ä¾‹å¦‚ï¼Œæˆ‘å¯èƒ½æœ‰ä¸‹é¢è¿™æ ·ä¸€ä¸ªå‡½æ•°ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> book<span class="hljs-constructor">Concert(<span class="hljs-params">aCustomer</span>, <span class="hljs-params">isPremium</span>)</span> &#123;<br>  <span class="hljs-keyword">if</span> (isPremium) &#123;<br>    <span class="hljs-comment">// logic for premium booking</span><br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-comment">// logic for regular booking</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¦é¢„è®¢ä¸€åœºé«˜çº§éŸ³ä¹ä¼šï¼ˆpremium concertï¼‰ï¼Œå°±å¾—è¿™æ ·å‘èµ·è°ƒç”¨ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">book<span class="hljs-constructor">Concert(<span class="hljs-params">aCustomer</span>, <span class="hljs-params">true</span>)</span>;<br></code></pre></td></tr></table></figure>

<p>æ ‡è®°å‚æ•°ä¹Ÿå¯èƒ½ä»¥æšä¸¾çš„å½¢å¼å‡ºç°ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">book<span class="hljs-constructor">Concert(<span class="hljs-params">aCustomer</span>, CustomerType.PREMIUM)</span>;<br></code></pre></td></tr></table></figure>

<p>æˆ–è€…æ˜¯ä»¥å­—ç¬¦ä¸²ï¼ˆæˆ–è€…ç¬¦å·ï¼Œå¦‚æœç¼–ç¨‹è¯­è¨€æ”¯æŒçš„è¯ï¼‰çš„å½¢å¼å‡ºç°ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">book<span class="hljs-constructor">Concert(<span class="hljs-params">aCustomer</span>, <span class="hljs-string">&quot;premium&quot;</span>)</span>;<br></code></pre></td></tr></table></figure>

<p>æˆ‘ä¸å–œæ¬¢æ ‡è®°å‚æ•°ï¼Œå› ä¸ºå®ƒä»¬è®©äººéš¾ä»¥ç†è§£åˆ°åº•æœ‰å“ªäº›å‡½æ•°å¯ä»¥è°ƒç”¨ã€åº”è¯¥æ€ä¹ˆè°ƒç”¨ã€‚æ‹¿åˆ°ä¸€ä»½ API ä»¥åï¼Œæˆ‘é¦–å…ˆçœ‹åˆ°çš„æ˜¯ä¸€ç³»åˆ—å¯ä¾›è°ƒç”¨çš„å‡½æ•°ï¼Œä½†æ ‡è®°å‚æ•°å´éšè—äº†å‡½æ•°è°ƒç”¨ä¸­å­˜åœ¨çš„å·®å¼‚æ€§ã€‚ä½¿ç”¨è¿™æ ·çš„å‡½æ•°ï¼Œæˆ‘è¿˜å¾—å¼„æ¸…æ ‡è®°å‚æ•°æœ‰å“ªäº›å¯ç”¨çš„å€¼ã€‚å¸ƒå°”å‹çš„æ ‡è®°å°¤å…¶ç³Ÿç³•ï¼Œå› ä¸ºå®ƒä»¬ä¸èƒ½æ¸…æ™°åœ°ä¼ è¾¾å…¶å«ä¹‰â€”â€”åœ¨è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œæˆ‘å¾ˆéš¾å¼„æ¸… true åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ã€‚å¦‚æœæ˜ç¡®ç”¨ä¸€ä¸ªå‡½æ•°æ¥å®Œæˆä¸€é¡¹å•ç‹¬çš„ä»»åŠ¡ï¼Œå…¶å«ä¹‰ä¼šæ¸…æ™°å¾—å¤šã€‚</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">premium<span class="hljs-constructor">BookConcert(<span class="hljs-params">aCustomer</span>)</span>;<br></code></pre></td></tr></table></figure>

<p>å¹¶éæ‰€æœ‰ç±»ä¼¼è¿™æ ·çš„å‚æ•°éƒ½æ˜¯æ ‡è®°å‚æ•°ã€‚å¦‚æœè°ƒç”¨è€…ä¼ å…¥çš„æ˜¯ç¨‹åºä¸­æµåŠ¨çš„æ•°æ®ï¼Œè¿™æ ·çš„å‚æ•°ä¸ç®—æ ‡è®°å‚æ•°ï¼›åªæœ‰è°ƒç”¨è€…ç›´æ¥ä¼ å…¥å­—é¢é‡å€¼ï¼Œè¿™æ‰æ˜¯æ ‡è®°å‚æ•°ã€‚å¦å¤–ï¼Œåœ¨å‡½æ•°å®ç°å†…éƒ¨ï¼Œå¦‚æœå‚æ•°å€¼åªæ˜¯ä½œä¸ºæ•°æ®ä¼ ç»™å…¶ä»–å‡½æ•°ï¼Œè¿™å°±ä¸æ˜¯æ ‡è®°å‚æ•°ï¼›åªæœ‰å‚æ•°å€¼å½±å“äº†å‡½æ•°å†…éƒ¨çš„æ§åˆ¶æµï¼Œè¿™æ‰æ˜¯æ ‡è®°å‚æ•°ã€‚</p>
<p>ç§»é™¤æ ‡è®°å‚æ•°ä¸ä»…ä½¿ä»£ç æ›´æ•´æ´ï¼Œå¹¶ä¸”èƒ½å¸®åŠ©å¼€å‘å·¥å…·æ›´å¥½åœ°å‘æŒ¥ä½œç”¨ã€‚å»æ‰æ ‡è®°å‚æ•°åï¼Œä»£ç åˆ†æå·¥å…·èƒ½æ›´å®¹æ˜“åœ°ä½“ç°å‡ºâ€œé«˜çº§â€å’Œâ€œæ™®é€šâ€ä¸¤ç§é¢„è®¢é€»è¾‘åœ¨ä½¿ç”¨æ—¶çš„åŒºåˆ«ã€‚</p>
<p>å¦‚æœä¸€ä¸ªå‡½æ•°æœ‰å¤šä¸ªæ ‡è®°å‚æ•°ï¼Œå¯èƒ½å°±ä¸å¾—ä¸å°†å…¶ä¿ç•™ï¼Œå¦åˆ™æˆ‘å°±å¾—é’ˆå¯¹å„ä¸ªå‚æ•°çš„å„ç§å–å€¼çš„æ‰€æœ‰ç»„åˆæƒ…å†µæä¾›æ˜ç¡®å‡½æ•°ã€‚ä¸è¿‡è¿™ä¹Ÿæ˜¯ä¸€ä¸ªä¿¡å·ï¼Œè¯´æ˜è¿™ä¸ªå‡½æ•°å¯èƒ½åšå¾—å¤ªå¤šï¼Œåº”è¯¥è€ƒè™‘æ˜¯å¦èƒ½ç”¨æ›´ç®€å•çš„å‡½æ•°æ¥ç»„åˆå‡ºå®Œæ•´çš„é€»è¾‘ã€‚</p>
<h3 id="åšæ³•-8"><a href="#åšæ³•-8" class="headerlink" title="åšæ³•"></a>åšæ³•</h3><p>é’ˆå¯¹å‚æ•°çš„æ¯ä¸€ç§å¯èƒ½å€¼ï¼Œæ–°å»ºä¸€ä¸ªæ˜ç¡®å‡½æ•°ã€‚</p>
<p>å¦‚æœä¸»å‡½æ•°æœ‰æ¸…æ™°çš„æ¡ä»¶åˆ†å‘é€»è¾‘ï¼Œå¯ä»¥ç”¨åˆ†è§£æ¡ä»¶è¡¨è¾¾å¼ï¼ˆ260ï¼‰åˆ›å»ºæ˜ç¡®å‡½æ•°ï¼›å¦åˆ™ï¼Œå¯ä»¥åœ¨åŸå‡½æ•°ä¹‹ä¸Šåˆ›å»ºåŒ…è£…å‡½æ•°ã€‚</p>
<p>å¯¹äºâ€œç”¨å­—é¢é‡å€¼ä½œä¸ºå‚æ•°â€çš„å‡½æ•°è°ƒç”¨è€…ï¼Œå°†å…¶æ”¹ä¸ºè°ƒç”¨æ–°å»ºçš„æ˜ç¡®å‡½æ•°ã€‚</p>
<h3 id="èŒƒä¾‹-8"><a href="#èŒƒä¾‹-8" class="headerlink" title="èŒƒä¾‹"></a>èŒƒä¾‹</h3><p>åœ¨æµè§ˆä»£ç æ—¶ï¼Œæˆ‘å‘ç°å¤šå¤„ä»£ç åœ¨è°ƒç”¨ä¸€ä¸ªå‡½æ•°è®¡ç®—ç‰©æµï¼ˆshipmentï¼‰çš„åˆ°è´§æ—¥æœŸï¼ˆdelivery dateï¼‰ã€‚ä¸€äº›è°ƒç”¨ä»£ç ç±»ä¼¼è¿™æ ·ï¼š</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">aShipment.deliveryDate</span> = deliveryDate(anOrder, <span class="hljs-literal">true</span>)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p>å¦ä¸€äº›è°ƒç”¨ä»£ç åˆ™æ˜¯è¿™æ ·ï¼š</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">aShipment.deliveryDate</span> = deliveryDate(anOrder, <span class="hljs-literal">false</span>)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p>é¢å¯¹è¿™æ ·çš„ä»£ç ï¼Œæˆ‘ç«‹å³å¼€å§‹å¥½å¥‡ï¼šå‚æ•°é‡Œè¿™ä¸ªå¸ƒå°”å€¼æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿæ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„ï¼Ÿ</p>
<p>deliveryDate å‡½æ•°ä¸»ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">function</span> <span class="hljs-title function_">deliveryDate</span>(<span class="hljs-params">anOrder, isRush</span>) &#123;<br>  <span class="hljs-keyword">if</span> (isRush) &#123;<br>    let deliveryTime;<br>    <span class="hljs-keyword">if</span> ([<span class="hljs-string">&quot;MA&quot;</span>, <span class="hljs-string">&quot;CT&quot;</span>].<span class="hljs-built_in">includes</span>(anOrder.deliveryState)) deliveryTime = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ([<span class="hljs-string">&quot;NY&quot;</span>, <span class="hljs-string">&quot;NH&quot;</span>].<span class="hljs-built_in">includes</span>(anOrder.deliveryState)) deliveryTime = <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">else</span> deliveryTime = <span class="hljs-number">3</span>;<br>    <span class="hljs-keyword">return</span> anOrder.placedOn.plusDays(<span class="hljs-number">1</span> + deliveryTime);<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    let deliveryTime;<br>    <span class="hljs-keyword">if</span> ([<span class="hljs-string">&quot;MA&quot;</span>, <span class="hljs-string">&quot;CT&quot;</span>, <span class="hljs-string">&quot;NY&quot;</span>].<span class="hljs-built_in">includes</span>(anOrder.deliveryState)) deliveryTime = <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ([<span class="hljs-string">&quot;ME&quot;</span>, <span class="hljs-string">&quot;NH&quot;</span>].<span class="hljs-built_in">includes</span>(anOrder.deliveryState)) deliveryTime = <span class="hljs-number">3</span>;<br>    <span class="hljs-keyword">else</span> deliveryTime = <span class="hljs-number">4</span>;<br>    <span class="hljs-keyword">return</span> anOrder.placedOn.plusDays(<span class="hljs-number">2</span> + deliveryTime);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>åŸæ¥è°ƒç”¨è€…ç”¨è¿™ä¸ªå¸ƒå°”å‹å­—é¢é‡æ¥åˆ¤æ–­åº”è¯¥è¿è¡Œå“ªä¸ªåˆ†æ”¯çš„ä»£ç â€”â€”å…¸å‹çš„æ ‡è®°å‚æ•°ã€‚ç„¶è€Œå‡½æ•°çš„é‡ç‚¹å°±åœ¨äºè¦éµå¾ªè°ƒç”¨è€…çš„æŒ‡ä»¤ï¼Œæ‰€ä»¥æœ€å¥½æ˜¯ç”¨æ˜ç¡®å‡½æ•°çš„å½¢å¼æ˜ç¡®è¯´å‡ºè°ƒç”¨è€…çš„æ„å›¾ã€‚</p>
<p>å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œæˆ‘å¯ä»¥ä½¿ç”¨åˆ†è§£æ¡ä»¶è¡¨è¾¾å¼ï¼ˆ260ï¼‰ï¼Œå¾—åˆ°ä¸‹åˆ—ä»£ç ï¼š</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">function</span> <span class="hljs-title function_">deliveryDate</span>(<span class="hljs-params">anOrder, isRush</span>) &#123;<br>  <span class="hljs-keyword">if</span> (isRush) <span class="hljs-keyword">return</span> rushDeliveryDate(anOrder);<br>  <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> regularDeliveryDate(anOrder);<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">rushDeliveryDate</span>(<span class="hljs-params">anOrder</span>) &#123;<br>  let deliveryTime;<br>  <span class="hljs-keyword">if</span> ([<span class="hljs-string">&quot;MA&quot;</span>, <span class="hljs-string">&quot;CT&quot;</span>].<span class="hljs-built_in">includes</span>(anOrder.deliveryState)) deliveryTime = <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ([<span class="hljs-string">&quot;NY&quot;</span>, <span class="hljs-string">&quot;NH&quot;</span>].<span class="hljs-built_in">includes</span>(anOrder.deliveryState)) deliveryTime = <span class="hljs-number">2</span>;<br>  <span class="hljs-keyword">else</span> deliveryTime = <span class="hljs-number">3</span>;<br>  <span class="hljs-keyword">return</span> anOrder.placedOn.plusDays(<span class="hljs-number">1</span> + deliveryTime);<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">regularDeliveryDate</span>(<span class="hljs-params">anOrder</span>) &#123;<br>  let deliveryTime;<br>  <span class="hljs-keyword">if</span> ([<span class="hljs-string">&quot;MA&quot;</span>, <span class="hljs-string">&quot;CT&quot;</span>, <span class="hljs-string">&quot;NY&quot;</span>].<span class="hljs-built_in">includes</span>(anOrder.deliveryState)) deliveryTime = <span class="hljs-number">2</span>;<br>  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ([<span class="hljs-string">&quot;ME&quot;</span>, <span class="hljs-string">&quot;NH&quot;</span>].<span class="hljs-built_in">includes</span>(anOrder.deliveryState)) deliveryTime = <span class="hljs-number">3</span>;<br>  <span class="hljs-keyword">else</span> deliveryTime = <span class="hljs-number">4</span>;<br>  <span class="hljs-keyword">return</span> anOrder.placedOn.plusDays(<span class="hljs-number">2</span> + deliveryTime);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¿™ä¸¤ä¸ªå‡½æ•°èƒ½æ›´å¥½åœ°è¡¨è¾¾è°ƒç”¨è€…çš„æ„å›¾ï¼Œç°åœ¨æˆ‘å¯ä»¥ä¿®æ”¹è°ƒç”¨æ–¹ä»£ç äº†ã€‚è°ƒç”¨ä»£ç </p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">aShipment.deliveryDate</span> = deliveryDate(anOrder, <span class="hljs-literal">true</span>)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p>å¯ä»¥æ”¹ä¸º</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">aShipment.deliveryDate</span> = rushDeliveryDate(anOrder)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p>å¦ä¸€ä¸ªåˆ†æ”¯ä¹Ÿç±»ä¼¼ã€‚</p>
<p>å¤„ç†å®Œæ‰€æœ‰è°ƒç”¨å¤„ï¼Œæˆ‘å°±å¯ä»¥ç§»é™¤ deliveryDate å‡½æ•°ã€‚</p>
<p>è¿™ä¸ªå‚æ•°æ˜¯æ ‡è®°å‚æ•°ï¼Œä¸ä»…å› ä¸ºå®ƒæ˜¯å¸ƒå°”ç±»å‹ï¼Œè€Œä¸”è¿˜å› ä¸ºè°ƒç”¨æ–¹ä»¥å­—é¢é‡çš„å½¢å¼ç›´æ¥è®¾ç½®å‚æ•°å€¼ã€‚å¦‚æœæ‰€æœ‰è°ƒç”¨ deliveryDate çš„ä»£ç éƒ½åƒè¿™æ ·ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">const isRush = determine<span class="hljs-constructor">IfRush(<span class="hljs-params">anOrder</span>)</span>;<br>aShipment.deliveryDate = delivery<span class="hljs-constructor">Date(<span class="hljs-params">anOrder</span>, <span class="hljs-params">isRush</span>)</span>;<br></code></pre></td></tr></table></figure>

<p>é‚£æˆ‘å¯¹è¿™ä¸ªå‡½æ•°çš„ç­¾åæ²¡æœ‰ä»»ä½•æ„è§ï¼ˆä¸è¿‡æˆ‘è¿˜æ˜¯æƒ³ç”¨åˆ†è§£æ¡ä»¶è¡¨è¾¾å¼ï¼ˆ260ï¼‰æ¸…ç†å…¶å†…éƒ¨å®ç°ï¼‰ã€‚</p>
<p>å¯èƒ½æœ‰ä¸€äº›è°ƒç”¨è€…ç»™è¿™ä¸ªå‚æ•°ä¼ å…¥çš„æ˜¯å­—é¢é‡ï¼Œå°†å…¶ä½œä¸ºæ ‡è®°å‚æ•°ä½¿ç”¨ï¼›å¦ä¸€äº›è°ƒç”¨è€…åˆ™ä¼ å…¥æ­£å¸¸çš„æ•°æ®ã€‚è‹¥æœçœŸå¦‚æ­¤ï¼Œæˆ‘è¿˜æ˜¯ä¼šä½¿ç”¨ç§»é™¤æ ‡è®°å‚æ•°ï¼ˆ314ï¼‰ï¼Œä½†ä¸ä¿®æ”¹ä¼ å…¥æ­£å¸¸æ•°æ®çš„è°ƒç”¨è€…ï¼Œé‡æ„ç»“æŸæ—¶ä¹Ÿä¸åˆ é™¤ deliveryDate å‡½æ•°ã€‚è¿™æ ·æˆ‘å°±æä¾›äº†ä¸¤å¥—æ¥å£ï¼Œåˆ†åˆ«æ”¯æŒä¸åŒçš„ç”¨é€”ã€‚</p>
<p>ç›´æ¥æ‹†åˆ†æ¡ä»¶é€»è¾‘æ˜¯å®æ–½æœ¬é‡æ„çš„å¥½æ–¹æ³•ï¼Œä½†åªæœ‰å½“â€œæ ¹æ®å‚æ•°å€¼åšåˆ†å‘â€çš„é€»è¾‘å‘ç”Ÿåœ¨å‡½æ•°æœ€å¤–å±‚ï¼ˆæˆ–è€…å¯ä»¥æ¯”è¾ƒå®¹æ˜“åœ°å°†å…¶é‡æ„è‡³å‡½æ•°æœ€å¤–å±‚ï¼‰çš„æ—¶å€™ï¼Œè¿™ä¸€æ‹›æ‰å¥½ç”¨ã€‚å‡½æ•°å†…éƒ¨ä¹Ÿæœ‰å¯èƒ½ä»¥ä¸€ç§æ›´çº ç»“çš„æ–¹å¼ä½¿ç”¨æ ‡è®°å‚æ•°ï¼Œä¾‹å¦‚ä¸‹é¢è¿™ä¸ªç‰ˆæœ¬çš„ deliveryDate å‡½æ•°ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> delivery<span class="hljs-constructor">Date(<span class="hljs-params">anOrder</span>, <span class="hljs-params">isRush</span>)</span> &#123;<br> <span class="hljs-keyword">let</span> result;<br> <span class="hljs-keyword">let</span> deliveryTime;<br> <span class="hljs-keyword">if</span> (anOrder.deliveryState<span class="hljs-operator"> === </span><span class="hljs-string">&quot;MA&quot;</span><span class="hljs-operator"> || </span>anOrder.deliveryState<span class="hljs-operator"> === </span><span class="hljs-string">&quot;CT&quot;</span>)<br>  deliveryTime = isRush? <span class="hljs-number">1</span> : <span class="hljs-number">2</span>;<br> <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (anOrder.deliveryState<span class="hljs-operator"> === </span><span class="hljs-string">&quot;NY&quot;</span><span class="hljs-operator"> || </span>anOrder.deliveryState<span class="hljs-operator"> === </span><span class="hljs-string">&quot;NH&quot;</span>) &#123;<br>  deliveryTime = <span class="hljs-number">2</span>;<br>  <span class="hljs-keyword">if</span> (anOrder.deliveryState<span class="hljs-operator"> === </span><span class="hljs-string">&quot;NH&quot;</span> &amp;amp;&amp;amp; !isRush)<br>   deliveryTime = <span class="hljs-number">3</span>;<br> &#125;<br> <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isRush)<br>  deliveryTime = <span class="hljs-number">3</span>;<br> <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (anOrder.deliveryState<span class="hljs-operator"> === </span><span class="hljs-string">&quot;ME&quot;</span>)<br>  deliveryTime = <span class="hljs-number">3</span>;<br> <span class="hljs-keyword">else</span><br>  deliveryTime = <span class="hljs-number">4</span>;<br> result = anOrder.placedOn.plus<span class="hljs-constructor">Days(2 + <span class="hljs-params">deliveryTime</span>)</span>;<br> <span class="hljs-keyword">if</span> (isRush) result = result.minus<span class="hljs-constructor">Days(1)</span>;<br> return result;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¿™ç§æƒ…å†µä¸‹ï¼Œæƒ³æŠŠå›´ç»• isRush çš„åˆ†å‘é€»è¾‘å‰¥ç¦»åˆ°é¡¶å±‚ï¼Œéœ€è¦çš„å·¥ä½œé‡å¯èƒ½ä¼šå¾ˆå¤§ã€‚æ‰€ä»¥æˆ‘é€‰æ‹©é€€è€Œæ±‚å…¶æ¬¡ï¼Œåœ¨ deliveryDate ä¹‹ä¸Šæ·»åŠ ä¸¤ä¸ªå‡½æ•°ï¼š</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">rushDeliveryDate</span>(anOrder) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-type">deliveryDate(anOrder,</span> <span class="hljs-literal">true</span>);<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title">regularDeliveryDate</span>(anOrder) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-type">deliveryDate(anOrder,</span> <span class="hljs-literal">false</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æœ¬è´¨ä¸Šï¼Œè¿™ä¸¤ä¸ªåŒ…è£…å‡½æ•°åˆ†åˆ«ä»£è¡¨äº† deliveryDate å‡½æ•°ä¸€éƒ¨åˆ†çš„ä½¿ç”¨æ–¹å¼ã€‚ä¸è¿‡å®ƒä»¬å¹¶éä»åŸå‡½æ•°ä¸­æ‹†åˆ†è€Œæ¥ï¼Œè€Œæ˜¯ç”¨ä»£ç æ–‡æœ¬å¼ºè¡Œå®šä¹‰çš„ã€‚</p>
<p>éšåï¼Œæˆ‘åŒæ ·å¯ä»¥é€ä¸€æ›¿æ¢åŸå‡½æ•°çš„è°ƒç”¨è€…ï¼Œå°±è·Ÿå‰é¢åˆ†è§£æ¡ä»¶è¡¨è¾¾å¼ä¹‹åçš„å¤„ç†ä¸€æ ·ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•ä¸€ä¸ªè°ƒç”¨è€…å‘ isRush å‚æ•°ä¼ å…¥æ­£å¸¸çš„æ•°æ®ï¼Œæˆ‘æœ€åä¼šé™åˆ¶åŸå‡½æ•°çš„å¯è§æ€§ï¼Œæˆ–æ˜¯å°†å…¶æ”¹åï¼ˆä¾‹å¦‚æ”¹ä¸º deliveryDateHelperOnlyï¼‰ï¼Œè®©äººä¸€è§å³çŸ¥ä¸åº”ç›´æ¥ä½¿ç”¨è¿™ä¸ªå‡½æ•°ã€‚</p>
<h2 id="11-4-ä¿æŒå¯¹è±¡å®Œæ•´ï¼ˆPreserve-Whole-Objectï¼‰"><a href="#11-4-ä¿æŒå¯¹è±¡å®Œæ•´ï¼ˆPreserve-Whole-Objectï¼‰" class="headerlink" title="11.4 ä¿æŒå¯¹è±¡å®Œæ•´ï¼ˆPreserve Whole Objectï¼‰"></a>11.4 ä¿æŒå¯¹è±¡å®Œæ•´ï¼ˆPreserve Whole Objectï¼‰</h2><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">const low = aRoom.daysTempRange.low;<br>const high = aRoom.daysTempRange.high;<br><span class="hljs-keyword">if</span> (aPlan.within<span class="hljs-constructor">Range(<span class="hljs-params">low</span>, <span class="hljs-params">high</span>)</span>)<br><br><br><span class="hljs-keyword">if</span> (aPlan.within<span class="hljs-constructor">Range(<span class="hljs-params">aRoom</span>.<span class="hljs-params">daysTempRange</span>)</span>)<br></code></pre></td></tr></table></figure>

<h3 id="åŠ¨æœº-9"><a href="#åŠ¨æœº-9" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>å¦‚æœæˆ‘çœ‹è§ä»£ç ä»ä¸€ä¸ªè®°å½•ç»“æ„ä¸­å¯¼å‡ºå‡ ä¸ªå€¼ï¼Œç„¶ååˆæŠŠè¿™å‡ ä¸ªå€¼ä¸€èµ·ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä¼šæ›´æ„¿æ„æŠŠæ•´ä¸ªè®°å½•ä¼ ç»™è¿™ä¸ªå‡½æ•°ï¼Œåœ¨å‡½æ•°ä½“å†…éƒ¨å¯¼å‡ºæ‰€éœ€çš„å€¼ã€‚</p>
<p>â€œä¼ é€’æ•´ä¸ªè®°å½•â€çš„æ–¹å¼èƒ½æ›´å¥½åœ°åº”å¯¹å˜åŒ–ï¼šå¦‚æœå°†æ¥è¢«è°ƒçš„å‡½æ•°éœ€è¦ä»è®°å½•ä¸­å¯¼å‡ºæ›´å¤šçš„æ•°æ®ï¼Œæˆ‘å°±ä¸ç”¨ä¸ºæ­¤ä¿®æ”¹å‚æ•°åˆ—è¡¨ã€‚å¹¶ä¸”ä¼ é€’æ•´ä¸ªè®°å½•ä¹Ÿèƒ½ç¼©çŸ­å‚æ•°åˆ—è¡¨ï¼Œè®©å‡½æ•°è°ƒç”¨æ›´å®¹æ˜“çœ‹æ‡‚ã€‚å¦‚æœæœ‰å¾ˆå¤šå‡½æ•°éƒ½åœ¨ä½¿ç”¨è®°å½•ä¸­çš„åŒä¸€ç»„æ•°æ®ï¼Œå¤„ç†è¿™éƒ¨åˆ†æ•°æ®çš„é€»è¾‘å¸¸ä¼šé‡å¤ï¼Œæ­¤æ—¶å¯ä»¥æŠŠè¿™äº›å¤„ç†é€»è¾‘æ¬ç§»åˆ°å®Œæ•´å¯¹è±¡ä¸­å»ã€‚</p>
<p>ä¹Ÿæœ‰æ—¶æˆ‘ä¸æƒ³é‡‡ç”¨æœ¬é‡æ„æ‰‹æ³•ï¼Œå› ä¸ºæˆ‘ä¸æƒ³è®©è¢«è°ƒå‡½æ•°ä¾èµ–å®Œæ•´å¯¹è±¡ï¼Œå°¤å…¶æ˜¯åœ¨ä¸¤è€…ä¸åœ¨åŒä¸€ä¸ªæ¨¡å—ä¸­çš„æ—¶å€™ã€‚</p>
<p>ä»ä¸€ä¸ªå¯¹è±¡ä¸­æŠ½å–å‡ºå‡ ä¸ªå€¼ï¼Œå•ç‹¬å¯¹è¿™å‡ ä¸ªå€¼åšæŸäº›é€»è¾‘æ“ä½œï¼Œè¿™æ˜¯ä¸€ç§ä»£ç åå‘³é“ï¼ˆä¾æ‹æƒ…ç»“ï¼‰ï¼Œé€šå¸¸æ ‡å¿—ç€è¿™æ®µé€»è¾‘åº”è¯¥è¢«æ¬ç§»åˆ°å¯¹è±¡ä¸­ã€‚ä¿æŒå¯¹è±¡å®Œæ•´ç»å¸¸å‘ç”Ÿåœ¨å¼•å…¥å‚æ•°å¯¹è±¡ï¼ˆ140ï¼‰ä¹‹åï¼Œæˆ‘ä¼šæœå¯»ä½¿ç”¨åŸæ¥çš„æ•°æ®æ³¥å›¢çš„ä»£ç ï¼Œä»£ä¹‹ä»¥ä½¿ç”¨æ–°çš„å¯¹è±¡ã€‚</p>
<p>å¦‚æœå‡ å¤„ä»£ç éƒ½åœ¨ä½¿ç”¨å¯¹è±¡çš„ä¸€éƒ¨åˆ†åŠŸèƒ½ï¼Œå¯èƒ½æ„å‘³ç€åº”è¯¥ç”¨æç‚¼ç±»ï¼ˆ182ï¼‰æŠŠè¿™ä¸€éƒ¨åˆ†åŠŸèƒ½å•ç‹¬æç‚¼å‡ºæ¥ã€‚</p>
<p>è¿˜æœ‰ä¸€ç§å¸¸è¢«å¿½è§†çš„æƒ…å†µï¼šè°ƒç”¨è€…å°†è‡ªå·±çš„è‹¥å¹²æ•°æ®ä½œä¸ºå‚æ•°ï¼Œä¼ é€’ç»™è¢«è°ƒç”¨å‡½æ•°ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘å¯ä»¥å°†è°ƒç”¨è€…çš„è‡ªæˆ‘å¼•ç”¨ï¼ˆåœ¨ JavaScript ä¸­å°±æ˜¯ thisï¼‰ä½œä¸ºå‚æ•°ï¼Œç›´æ¥ä¼ é€’ç»™ç›®æ ‡å‡½æ•°ã€‚</p>
<h3 id="åšæ³•-9"><a href="#åšæ³•-9" class="headerlink" title="åšæ³•"></a>åšæ³•</h3><p>æ–°å»ºä¸€ä¸ªç©ºå‡½æ•°ï¼Œç»™å®ƒä»¥æœŸæœ›ä¸­çš„å‚æ•°åˆ—è¡¨ï¼ˆå³ä¼ å…¥å®Œæ•´å¯¹è±¡ä½œä¸ºå‚æ•°ï¼‰ã€‚</p>
<p>ç»™è¿™ä¸ªå‡½æ•°èµ·ä¸€ä¸ªå®¹æ˜“æœç´¢çš„åå­—ï¼Œè¿™æ ·åˆ°é‡æ„ç»“æŸæ—¶æ–¹ä¾¿æ›¿æ¢ã€‚</p>
<p>åœ¨æ–°å‡½æ•°ä½“å†…è°ƒç”¨æ—§å‡½æ•°ï¼Œå¹¶æŠŠæ–°çš„å‚æ•°ï¼ˆå³å®Œæ•´å¯¹è±¡ï¼‰æ˜ å°„åˆ°æ—§çš„å‚æ•°åˆ—è¡¨ï¼ˆå³æ¥æºäºå®Œæ•´å¯¹è±¡çš„å„é¡¹æ•°æ®ï¼‰ã€‚</p>
<p>æ‰§è¡Œé™æ€æ£€æŸ¥ã€‚</p>
<p>é€ä¸€ä¿®æ”¹æ—§å‡½æ•°çš„è°ƒç”¨è€…ï¼Œä»¤å…¶ä½¿ç”¨æ–°å‡½æ•°ï¼Œæ¯æ¬¡ä¿®æ”¹ä¹‹åæ‰§è¡Œæµ‹è¯•ã€‚</p>
<p>ä¿®æ”¹ä¹‹åï¼Œè°ƒç”¨å¤„ç”¨äºâ€œä»å®Œæ•´å¯¹è±¡ä¸­å¯¼å‡ºå‚æ•°å€¼â€çš„ä»£ç å¯èƒ½å°±æ²¡ç”¨äº†ï¼Œå¯ä»¥ç”¨ç§»é™¤æ­»ä»£ç ï¼ˆ237ï¼‰å»æ‰ã€‚</p>
<p>æ‰€æœ‰è°ƒç”¨å¤„éƒ½ä¿®æ”¹è¿‡æ¥ä¹‹åï¼Œä½¿ç”¨å†…è”å‡½æ•°ï¼ˆ115ï¼‰æŠŠæ—§å‡½æ•°å†…è”åˆ°æ–°å‡½æ•°ä½“å†…ã€‚</p>
<p>ç»™æ–°å‡½æ•°æ”¹åï¼Œä»é‡æ„å¼€å§‹æ—¶çš„å®¹æ˜“æœç´¢çš„ä¸´æ—¶åå­—ï¼Œæ”¹ä¸ºä½¿ç”¨æ—§å‡½æ•°çš„åå­—ï¼ŒåŒæ—¶ä¿®æ”¹æ‰€æœ‰è°ƒç”¨å¤„ã€‚</p>
<h3 id="èŒƒä¾‹-9"><a href="#èŒƒä¾‹-9" class="headerlink" title="èŒƒä¾‹"></a>èŒƒä¾‹</h3><p>æˆ‘ä»¬æƒ³è±¡ä¸€ä¸ªå®¤æ¸©ç›‘æ§ç³»ç»Ÿï¼Œå®ƒè´Ÿè´£è®°å½•æˆ¿é—´ä¸€å¤©ä¸­çš„æœ€é«˜æ¸©åº¦å’Œæœ€ä½æ¸©åº¦ï¼Œç„¶åå°†å®é™…çš„æ¸©åº¦èŒƒå›´ä¸é¢„å…ˆè§„å®šçš„æ¸©åº¦æ§åˆ¶è®¡åˆ’ï¼ˆheating planï¼‰ç›¸æ¯”è¾ƒï¼Œå¦‚æœå½“å¤©æ¸©åº¦ä¸ç¬¦åˆè®¡åˆ’è¦æ±‚ï¼Œå°±å‘å‡ºè­¦å‘Šã€‚</p>
<p><strong>è°ƒç”¨æ–¹â€¦</strong></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">const</span> low = aRoom.daysTempRange.low;<br><span class="hljs-attribute">const</span> high = aRoom.daysTempRange.high;<br><span class="hljs-attribute">if</span> (!aPlan.withinRange(low, high))<br>  alerts.push(<span class="hljs-string">&quot;room temperature went outside range&quot;</span>);<br></code></pre></td></tr></table></figure>

<p><strong>class HeatingPlanâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">withinRange(bottom, top) &#123;<br> <span class="hljs-keyword">return</span> (bottom &gt;= <span class="hljs-keyword">this</span>._temperatureRange.low) &amp;amp;&amp;amp; (top &lt;= <span class="hljs-keyword">this</span>._temperatureRange.high);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>å…¶å®æˆ‘ä¸å¿…å°†â€œæ¸©åº¦èŒƒå›´â€çš„ä¿¡æ¯æ‹†å¼€æ¥å•ç‹¬ä¼ é€’ï¼Œåªéœ€å°†æ•´ä¸ªèŒƒå›´å¯¹è±¡ä¼ é€’ç»™ withinRange å‡½æ•°å³å¯ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘åœ¨ HeatingPlan ç±»ä¸­æ–°æ·»ä¸€ä¸ªç©ºå‡½æ•°ï¼Œç»™å®ƒèµ‹äºˆæˆ‘è®¤ä¸ºåˆç†çš„å‚æ•°åˆ—è¡¨ã€‚</p>
<p><strong>class HeatingPlanâ€¦</strong></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">xxNEWwithinRange</span><span class="hljs-params">(aNumberRange)</span></span> &#123;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>å› ä¸ºè¿™ä¸ªå‡½æ•°æœ€ç»ˆè¦å–ä»£ç°æœ‰çš„ withinRange å‡½æ•°ï¼Œæ‰€ä»¥å®ƒä¹Ÿç”¨äº†åŒæ ·çš„åå­—ï¼Œå†åŠ ä¸Šä¸€ä¸ªå®¹æ˜“æ›¿æ¢çš„å‰ç¼€ã€‚</p>
<p>ç„¶ååœ¨æ–°å‡½æ•°ä½“å†…è°ƒç”¨ç°æœ‰çš„ withinRange å‡½æ•°ã€‚å› æ­¤ï¼Œæ–°å‡½æ•°ä½“å°±å®Œæˆäº†ä»æ–°å‚æ•°åˆ—è¡¨åˆ°æ—§å‡½æ•°å‚æ•°åˆ—è¡¨çš„æ˜ å°„ã€‚</p>
<p><strong>class HeatingPlanâ€¦</strong></p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">xx<span class="hljs-constructor">NEWwithinRange(<span class="hljs-params">aNumberRange</span>)</span> &#123;<br>  return this.within<span class="hljs-constructor">Range(<span class="hljs-params">aNumberRange</span>.<span class="hljs-params">low</span>, <span class="hljs-params">aNumberRange</span>.<span class="hljs-params">high</span>)</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç°åœ¨å¼€å§‹æ­£å¼çš„æ›¿æ¢å·¥ä½œäº†ï¼Œæˆ‘è¦æ‰¾åˆ°è°ƒç”¨ç°æœ‰å‡½æ•°çš„åœ°æ–¹ï¼Œå°†å…¶æ”¹ä¸ºè°ƒç”¨æ–°å‡½æ•°ã€‚</p>
<p><strong>è°ƒç”¨æ–¹â€¦</strong></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">const</span> low = aRoom.daysTempRange.low;<br><span class="hljs-attribute">const</span> high = aRoom.daysTempRange.high;<br><span class="hljs-attribute">if</span> (!aPlan.xxNEWwithinRange(aRoom.daysTempRange))<br>  alerts.push(<span class="hljs-string">&quot;room temperature went outside range&quot;</span>);<br></code></pre></td></tr></table></figure>

<p>åœ¨ä¿®æ”¹è°ƒç”¨å¤„æ—¶ï¼Œæˆ‘å¯èƒ½ä¼šå‘ç°ä¸€äº›ä»£ç åœ¨ä¿®æ”¹åå·²ç»ä¸å†éœ€è¦ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨ç§»é™¤æ­»ä»£ç ï¼ˆ237ï¼‰ã€‚</p>
<p><strong>è°ƒç”¨æ–¹â€¦</strong></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">const</span> low = aRoom.daysTempRange.low;<br><span class="hljs-attribute">const</span> high = aRoom.daysTempRange.high;<br><span class="hljs-attribute">if</span> (!aPlan.xxNEWwithinRange(aRoom.daysTempRange))<br>  alerts.push(<span class="hljs-string">&quot;room temperature went outside range&quot;</span>);<br></code></pre></td></tr></table></figure>

<p>æ¯æ¬¡æ›¿æ¢ä¸€å¤„è°ƒç”¨ä»£ç ï¼Œæ¯æ¬¡ä¿®æ”¹åéƒ½è¦æµ‹è¯•ã€‚</p>
<p>è°ƒç”¨å¤„å…¨éƒ¨æ›¿æ¢å®Œæˆåï¼Œç”¨å†…è”å‡½æ•°ï¼ˆ115ï¼‰å°†æ—§å‡½æ•°å†…è”åˆ°æ–°å‡½æ•°ä½“å†…ã€‚</p>
<p><strong>class HeatingPlanâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">xxNEWwithinRange(aNumberRange) &#123;<br> <span class="hljs-keyword">return</span> (aNumberRange.low &gt;= <span class="hljs-keyword">this</span>._temperatureRange.low) &amp;amp;&amp;amp;<br>  (aNumberRange.high &lt;= <span class="hljs-keyword">this</span>._temperatureRange.high);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç»ˆäºå¯ä»¥å»æ‰æ–°å‡½æ•°é‚£éš¾çœ‹çš„å‰ç¼€äº†ï¼Œè®°å¾—åŒæ—¶ä¿®æ”¹æ‰€æœ‰è°ƒç”¨è€…ã€‚å°±ç®—æˆ‘æ‰€ä½¿ç”¨çš„å¼€å‘ç¯å¢ƒä¸æ”¯æŒå¯é çš„å‡½æ•°æ”¹åæ“ä½œï¼Œæœ‰è¿™ä¸ªæå…·ç‰¹è‰²çš„å‰ç¼€åœ¨ï¼Œæˆ‘ä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å…¨å±€æ›¿æ¢ã€‚</p>
<p><strong>class HeatingPlanâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">withinRange(aNumberRange) &#123;<br> <span class="hljs-keyword">return</span> (aNumberRange.low &gt;= <span class="hljs-keyword">this</span>._temperatureRange.low) &amp;amp;&amp;amp;<br>  (aNumberRange.high &lt;= <span class="hljs-keyword">this</span>._temperatureRange.high);<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>è°ƒç”¨æ–¹â€¦</strong></p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">if</span> (!aPlan.within<span class="hljs-constructor">Range(<span class="hljs-params">aRoom</span>.<span class="hljs-params">daysTempRange</span>)</span>)<br>  alerts.push(<span class="hljs-string">&quot;room temperature went outside range&quot;</span>);<br></code></pre></td></tr></table></figure>

<h3 id="èŒƒä¾‹ï¼šæ¢ä¸ªæ–¹å¼åˆ›å»ºæ–°å‡½æ•°"><a href="#èŒƒä¾‹ï¼šæ¢ä¸ªæ–¹å¼åˆ›å»ºæ–°å‡½æ•°" class="headerlink" title="èŒƒä¾‹ï¼šæ¢ä¸ªæ–¹å¼åˆ›å»ºæ–°å‡½æ•°"></a>èŒƒä¾‹ï¼šæ¢ä¸ªæ–¹å¼åˆ›å»ºæ–°å‡½æ•°</h3><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ç›´æ¥ç¼–å†™äº†æ–°å‡½æ•°ã€‚å¤§å¤šæ•°æ—¶å€™ï¼Œè¿™ä¸€æ­¥éå¸¸ç®€å•ï¼Œä¹Ÿæ˜¯åˆ›å»ºæ–°å‡½æ•°æœ€å®¹æ˜“çš„æ–¹å¼ã€‚ä¸è¿‡æœ‰æ—¶è¿˜ä¼šç”¨åˆ°å¦ä¸€ç§æ–¹å¼ï¼šå¯ä»¥å®Œå…¨é€šè¿‡é‡æ„æ‰‹æ³•çš„ç»„åˆæ¥å¾—åˆ°æ–°å‡½æ•°ã€‚</p>
<p>æˆ‘ä»ä¸€å¤„è°ƒç”¨ç°æœ‰å‡½æ•°çš„ä»£ç å¼€å§‹ã€‚</p>
<p><strong>è°ƒç”¨æ–¹â€¦</strong></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">const</span> low = aRoom.daysTempRange.low;<br><span class="hljs-attribute">const</span> high = aRoom.daysTempRange.high;<br><span class="hljs-attribute">if</span> (!aPlan.withinRange(low, high))<br>  alerts.push(<span class="hljs-string">&quot;room temperature went outside range&quot;</span>);<br></code></pre></td></tr></table></figure>

<p>æˆ‘è¦å…ˆå¯¹ä»£ç åšä¸€äº›æ•´ç†ï¼Œä»¥ä¾¿ç”¨æç‚¼å‡½æ•°ï¼ˆ106ï¼‰æ¥åˆ›å»ºæ–°å‡½æ•°ã€‚ç›®å‰çš„è°ƒç”¨è€…ä»£ç è¿˜ä¸å…·å¤‡å¯æç‚¼çš„å‡½æ•°é›å½¢ï¼Œä¸è¿‡æˆ‘å¯ä»¥å…ˆåšå‡ æ¬¡æç‚¼å˜é‡ï¼ˆ119ï¼‰ï¼Œä½¿å…¶è½®å»“æ˜¾ç°å‡ºæ¥ã€‚é¦–å…ˆï¼Œæˆ‘è¦æŠŠå¯¹æ—§å‡½æ•°çš„è°ƒç”¨ä»æ¡ä»¶åˆ¤æ–­ä¸­è§£æ”¾å‡ºæ¥ã€‚</p>
<p><strong>è°ƒç”¨æ–¹â€¦</strong></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">const</span> low = aRoom.daysTempRange.low;<br><span class="hljs-attribute">const</span> high = aRoom.daysTempRange.high;<br><span class="hljs-attribute">const</span> isWithinRange = aPlan.withinRange(low, high);<br><span class="hljs-attribute">if</span> (!isWithinRange) alerts.push(<span class="hljs-string">&quot;room temperature went outside range&quot;</span>);<br></code></pre></td></tr></table></figure>

<p>ç„¶åæŠŠè¾“å…¥å‚æ•°ä¹Ÿæç‚¼å‡ºæ¥ã€‚</p>
<p><strong>è°ƒç”¨æ–¹â€¦</strong></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">const</span> tempRange = aRoom.daysTempRange;<br><span class="hljs-attribute">const</span> low = tempRange.low;<br><span class="hljs-attribute">const</span> high = tempRange.high;<br><span class="hljs-attribute">const</span> isWithinRange = aPlan.withinRange(low, high);<br><span class="hljs-attribute">if</span> (!isWithinRange) alerts.push(<span class="hljs-string">&quot;room temperature went outside range&quot;</span>);<br></code></pre></td></tr></table></figure>

<p>å®Œæˆè¿™ä¸€æ­¥ä¹‹åï¼Œå°±å¯ä»¥ç”¨æç‚¼å‡½æ•°ï¼ˆ106ï¼‰æ¥åˆ›å»ºæ–°å‡½æ•°ã€‚</p>
<p><strong>è°ƒç”¨æ–¹â€¦</strong></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">const</span> tempRange = aRoom.daysTempRange;<br><span class="hljs-attribute">const</span> isWithinRange = xxNEWwithinRange(aPlan, tempRange);<br><span class="hljs-attribute">if</span> (!isWithinRange) alerts.push(<span class="hljs-string">&quot;room temperature went outside range&quot;</span>);<br></code></pre></td></tr></table></figure>

<p><strong>é¡¶å±‚ä½œç”¨åŸŸâ€¦</strong></p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> xx<span class="hljs-constructor">NEWwithinRange(<span class="hljs-params">aPlan</span>, <span class="hljs-params">tempRange</span>)</span> &#123;<br>  const low = tempRange.low;<br>  const high = tempRange.high;<br>  const isWithinRange = aPlan.within<span class="hljs-constructor">Range(<span class="hljs-params">low</span>, <span class="hljs-params">high</span>)</span>;<br>  return isWithinRange;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç”±äºæ—§å‡½æ•°å±äºå¦ä¸€ä¸ªä¸Šä¸‹æ–‡ï¼ˆHeatingPlan ç±»ï¼‰ï¼Œæˆ‘éœ€è¦ç”¨æ¬ç§»å‡½æ•°ï¼ˆ198ï¼‰æŠŠæ–°å‡½æ•°ä¹Ÿæ¬è¿‡å»ã€‚</p>
<p><strong>è°ƒç”¨æ–¹â€¦</strong></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">const</span> tempRange = aRoom.daysTempRange;<br><span class="hljs-attribute">const</span> isWithinRange = aPlan.xxNEWwithinRange(tempRange);<br><span class="hljs-attribute">if</span> (!isWithinRange) alerts.push(<span class="hljs-string">&quot;room temperature went outside range&quot;</span>);<br></code></pre></td></tr></table></figure>

<p><strong>class HeatingPlanâ€¦</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">xxNEWwithinRange</span>(<span class="hljs-params">tempRange</span>) &#123;<br>  <span class="hljs-keyword">const</span> low = tempRange.<span class="hljs-property">low</span>;<br>  <span class="hljs-keyword">const</span> high = tempRange.<span class="hljs-property">high</span>;<br>  <span class="hljs-keyword">const</span> isWithinRange = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">withinRange</span>(low, high);<br>  <span class="hljs-keyword">return</span> isWithinRange;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>å‰©ä¸‹çš„è¿‡ç¨‹å°±è·Ÿå‰é¢ä¸€æ ·äº†ï¼šæ›¿æ¢å…¶ä»–è°ƒç”¨è€…ï¼Œç„¶åæŠŠæ—§å‡½æ•°å†…è”åˆ°æ–°å‡½æ•°ä¸­ã€‚é‡æ„åˆšå¼€å§‹çš„æ—¶å€™ï¼Œä¸ºäº†æ¸…æ™°åˆ†ç¦»å‡½æ•°è°ƒç”¨ï¼Œä»¥ä¾¿æç‚¼å‡ºæ–°å‡½æ•°ï¼Œæˆ‘æç‚¼äº†å‡ ä¸ªå˜é‡å‡ºæ¥ï¼Œç°åœ¨å¯ä»¥æŠŠè¿™äº›å˜é‡ä¹Ÿå†…è”å›å»ã€‚</p>
<p>è¿™ç§æ–¹å¼çš„å¥½å¤„åœ¨äºï¼šå®ƒå®Œå…¨æ˜¯ç”±å…¶ä»–é‡æ„æ‰‹æ³•ç»„åˆè€Œæˆçš„ã€‚å¦‚æœæˆ‘ä½¿ç”¨çš„å¼€å‘å·¥å…·æ”¯æŒå¯é çš„æç‚¼å’Œå†…è”æ“ä½œï¼Œç”¨è¿™ç§æ–¹å¼è¿›è¡Œæœ¬é‡æ„ä¼šç‰¹åˆ«æµç•…ã€‚</p>
<h2 id="11-5-ä»¥æŸ¥è¯¢å–ä»£å‚æ•°ï¼ˆReplace-Parameter-with-Queryï¼‰"><a href="#11-5-ä»¥æŸ¥è¯¢å–ä»£å‚æ•°ï¼ˆReplace-Parameter-with-Queryï¼‰" class="headerlink" title="11.5 ä»¥æŸ¥è¯¢å–ä»£å‚æ•°ï¼ˆReplace Parameter with Queryï¼‰"></a>11.5 ä»¥æŸ¥è¯¢å–ä»£å‚æ•°ï¼ˆReplace Parameter with Queryï¼‰</h2><p>æ›¾ç”¨åï¼šä»¥å‡½æ•°å–ä»£å‚æ•°ï¼ˆReplace Parameter with Methodï¼‰</p>
<p>åå‘é‡æ„ï¼šä»¥å‚æ•°å–ä»£æŸ¥è¯¢ï¼ˆ327ï¼‰</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">available<span class="hljs-constructor">Vacation(<span class="hljs-params">anEmployee</span>, <span class="hljs-params">anEmployee</span>.<span class="hljs-params">grade</span>)</span>;<br><br><span class="hljs-keyword">function</span> available<span class="hljs-constructor">Vacation(<span class="hljs-params">anEmployee</span>, <span class="hljs-params">grade</span>)</span> &#123;<br>  <span class="hljs-comment">// calculate vacation...</span><br><br><br>  available<span class="hljs-constructor">Vacation(<span class="hljs-params">anEmployee</span>)</span><br><br><span class="hljs-keyword">function</span> available<span class="hljs-constructor">Vacation(<span class="hljs-params">anEmployee</span>)</span> &#123;<br>  const grade = anEmployee.grade;<br>  <span class="hljs-comment">// calculate vacation...</span><br></code></pre></td></tr></table></figure>

<h3 id="åŠ¨æœº-10"><a href="#åŠ¨æœº-10" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>å‡½æ•°çš„å‚æ•°åˆ—è¡¨åº”è¯¥æ€»ç»“è¯¥å‡½æ•°çš„å¯å˜æ€§ï¼Œæ ‡ç¤ºå‡ºå‡½æ•°å¯èƒ½ä½“ç°å‡ºè¡Œä¸ºå·®å¼‚çš„ä¸»è¦æ–¹å¼ã€‚å’Œä»»ä½•ä»£ç ä¸­çš„è¯­å¥ä¸€æ ·ï¼Œå‚æ•°åˆ—è¡¨åº”è¯¥å°½é‡é¿å…é‡å¤ï¼Œå¹¶ä¸”å‚æ•°åˆ—è¡¨è¶ŠçŸ­å°±è¶Šå®¹æ˜“ç†è§£ã€‚</p>
<p>å¦‚æœè°ƒç”¨å‡½æ•°æ—¶ä¼ å…¥äº†ä¸€ä¸ªå€¼ï¼Œè€Œè¿™ä¸ªå€¼ç”±å‡½æ•°è‡ªå·±æ¥è·å¾—ä¹Ÿæ˜¯åŒæ ·å®¹æ˜“ï¼Œè¿™å°±æ˜¯é‡å¤ã€‚è¿™ä¸ªæœ¬ä¸å¿…è¦çš„å‚æ•°ä¼šå¢åŠ è°ƒç”¨è€…çš„éš¾åº¦ï¼Œå› ä¸ºå®ƒä¸å¾—ä¸æ‰¾å‡ºæ­£ç¡®çš„å‚æ•°å€¼ï¼Œå…¶å®åŸæœ¬è°ƒç”¨è€…æ˜¯ä¸éœ€è¦è´¹è¿™ä¸ªåŠ›æ°”çš„ã€‚</p>
<p>â€œåŒæ ·å®¹æ˜“â€å››ä¸ªå­—ï¼Œåˆ’å‡ºäº†ä¸€æ¡åˆ¤æ–­çš„ç•Œé™ã€‚å»é™¤å‚æ•°ä¹Ÿå°±æ„å‘³ç€â€œè·å¾—æ­£ç¡®çš„å‚æ•°å€¼â€çš„è´£ä»»è¢«è½¬ç§»ï¼šæœ‰å‚æ•°ä¼ å…¥æ—¶ï¼Œè°ƒç”¨è€…éœ€è¦è´Ÿè´£è·å¾—æ­£ç¡®çš„å‚æ•°å€¼ï¼›å‚æ•°å»é™¤åï¼Œè´£ä»»å°±è¢«è½¬ç§»ç»™äº†å‡½æ•°æœ¬èº«ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œæˆ‘ä¹ æƒ¯äºç®€åŒ–è°ƒç”¨æ–¹ï¼Œå› æ­¤æˆ‘æ„¿æ„æŠŠè´£ä»»ç§»äº¤ç»™å‡½æ•°æœ¬èº«ï¼Œä½†å¦‚æœå‡½æ•°éš¾ä»¥æ‰¿æ‹…è¿™ä»½è´£ä»»ï¼Œå°±å¦å½“åˆ«è®ºäº†ã€‚</p>
<p>ä¸ä½¿ç”¨ä»¥æŸ¥è¯¢å–ä»£å‚æ•°æœ€å¸¸è§çš„åŸå› æ˜¯ï¼Œç§»é™¤å‚æ•°å¯èƒ½ä¼šç»™å‡½æ•°ä½“å¢åŠ ä¸å¿…è¦çš„ä¾èµ–å…³ç³»â€”â€”è¿«ä½¿å‡½æ•°è®¿é—®æŸä¸ªç¨‹åºå…ƒç´ ï¼Œè€Œæˆ‘åŸæœ¬ä¸æƒ³è®©å‡½æ•°äº†è§£è¿™ä¸ªå…ƒç´ çš„å­˜åœ¨ã€‚è¿™ç§â€œä¸å¿…è¦çš„ä¾èµ–å…³ç³»â€é™¤äº†æ–°å¢çš„ä»¥å¤–ï¼Œä¹Ÿå¯èƒ½æ˜¯æˆ‘æƒ³è¦ç¨åå»é™¤çš„ï¼Œä¾‹å¦‚ä¸ºäº†å»é™¤ä¸€ä¸ªå‚æ•°ï¼Œæˆ‘å¯èƒ½ä¼šåœ¨å‡½æ•°ä½“å†…è°ƒç”¨ä¸€ä¸ªæœ‰é—®é¢˜çš„å‡½æ•°ï¼Œæˆ–æ˜¯ä»ä¸€ä¸ªå¯¹è±¡ä¸­è·å–æŸäº›åŸæœ¬æƒ³è¦å‰¥ç¦»å‡ºå»çš„æ•°æ®ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œéƒ½åº”è¯¥æ…é‡è€ƒè™‘ä½¿ç”¨ä»¥æŸ¥è¯¢å–ä»£å‚æ•°ã€‚</p>
<p>å¦‚æœæƒ³è¦å»é™¤çš„å‚æ•°å€¼åªéœ€è¦å‘å¦ä¸€ä¸ªå‚æ•°æŸ¥è¯¢å°±èƒ½å¾—åˆ°ï¼Œè¿™æ˜¯ä½¿ç”¨ä»¥æŸ¥è¯¢å–ä»£å‚æ•°æœ€å®‰å…¨çš„åœºæ™¯ã€‚å¦‚æœå¯ä»¥ä»ä¸€ä¸ªå‚æ•°æ¨å¯¼å‡ºå¦ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆå‡ ä¹æ²¡æœ‰ä»»ä½•ç†ç”±è¦åŒæ—¶ä¼ é€’è¿™ä¸¤ä¸ªå‚æ•°ã€‚</p>
<p>å¦å¤–æœ‰ä¸€ä»¶äº‹éœ€è¦ç•™æ„ï¼šå¦‚æœåœ¨å¤„ç†çš„å‡½æ•°å…·æœ‰å¼•ç”¨é€æ˜æ€§ï¼ˆreferential transparencyï¼Œå³ï¼Œä¸è®ºä»»ä½•æ—¶å€™ï¼Œåªè¦ä¼ å…¥ç›¸åŒçš„å‚æ•°å€¼ï¼Œè¯¥å‡½æ•°çš„è¡Œä¸ºæ°¸è¿œä¸€è‡´ï¼‰ï¼Œè¿™æ ·çš„å‡½æ•°æ—¢å®¹æ˜“ç†è§£åˆå®¹æ˜“æµ‹è¯•ï¼Œæˆ‘ä¸æƒ³ä½¿å…¶å¤±å»è¿™ç§ä¼˜ç§€å“è´¨ã€‚æˆ‘ä¸ä¼šå»æ‰å®ƒçš„å‚æ•°ï¼Œè®©å®ƒå»è®¿é—®ä¸€ä¸ªå¯å˜çš„å…¨å±€å˜é‡ã€‚</p>
<h3 id="åšæ³•-10"><a href="#åšæ³•-10" class="headerlink" title="åšæ³•"></a>åšæ³•</h3><p>å¦‚æœæœ‰å¿…è¦ï¼Œä½¿ç”¨æç‚¼å‡½æ•°ï¼ˆ106ï¼‰å°†å‚æ•°çš„è®¡ç®—è¿‡ç¨‹æç‚¼åˆ°ä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•°ä¸­ã€‚</p>
<p>å°†å‡½æ•°ä½“å†…å¼•ç”¨è¯¥å‚æ•°çš„åœ°æ–¹æ”¹ä¸ºè°ƒç”¨æ–°å»ºçš„å‡½æ•°ã€‚æ¯æ¬¡ä¿®æ”¹åæ‰§è¡Œæµ‹è¯•ã€‚</p>
<p>å…¨éƒ¨æ›¿æ¢å®Œæˆåï¼Œä½¿ç”¨æ”¹å˜å‡½æ•°å£°æ˜ï¼ˆ124ï¼‰å°†è¯¥å‚æ•°å»æ‰ã€‚</p>
<h3 id="èŒƒä¾‹-10"><a href="#èŒƒä¾‹-10" class="headerlink" title="èŒƒä¾‹"></a>èŒƒä¾‹</h3><p>æŸäº›é‡æ„ä¼šä½¿å‚æ•°ä¸å†è¢«éœ€è¦ï¼Œè¿™æ˜¯æˆ‘æœ€å¸¸ç”¨åˆ°ä»¥æŸ¥è¯¢å–ä»£å‚æ•°çš„åœºåˆã€‚è€ƒè™‘ä¸‹åˆ—ä»£ç ã€‚</p>
<p><strong>class Orderâ€¦</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">get</span> <span class="hljs-title function_">finalPrice</span>() &#123;<br> <span class="hljs-keyword">const</span> basePrice = <span class="hljs-variable language_">this</span>.<span class="hljs-property">quantity</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemPrice</span>;<br> <span class="hljs-keyword">let</span> discountLevel;<br> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">quantity</span> &gt; <span class="hljs-number">100</span>) discountLevel = <span class="hljs-number">2</span>;<br> <span class="hljs-keyword">else</span> discountLevel = <span class="hljs-number">1</span>;<br> <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">discountedPrice</span>(basePrice, discountLevel);<br>&#125;<br><br><span class="hljs-title function_">discountedPrice</span>(<span class="hljs-params">basePrice, discountLevel</span>) &#123;<br> <span class="hljs-keyword">switch</span> (discountLevel) &#123;<br>  <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: <span class="hljs-keyword">return</span> basePrice * <span class="hljs-number">0.95</span>;<br>  <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: <span class="hljs-keyword">return</span> basePrice * <span class="hljs-number">0.9</span>;<br> &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>åœ¨ç®€åŒ–å‡½æ•°é€»è¾‘æ—¶ï¼Œæˆ‘æ€»æ˜¯çƒ­è¡·äºä½¿ç”¨ä»¥æŸ¥è¯¢å–ä»£ä¸´æ—¶å˜é‡ï¼ˆ178ï¼‰ï¼Œäºæ˜¯å°±å¾—åˆ°äº†å¦‚ä¸‹ä»£ç ã€‚</p>
<p><strong>class Orderâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">get</span> finalPrice() &#123;<br> <span class="hljs-keyword">const</span> basePrice = <span class="hljs-keyword">this</span>.quantity * <span class="hljs-keyword">this</span>.itemPrice;<br> <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.discountedPrice(basePrice, <span class="hljs-keyword">this</span>.discountLevel);<br>&#125;<br><br><span class="hljs-keyword">get</span> discountLevel() &#123;<br> <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.quantity &gt; <span class="hljs-number">100</span>) ? <span class="hljs-number">2</span> : <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>åˆ°è¿™ä¸€æ­¥ï¼Œå·²ç»ä¸éœ€è¦å†æŠŠ discountLevel çš„è®¡ç®—ç»“æœä¼ ç»™ discountedPrice äº†ï¼Œåè€…å¯ä»¥è‡ªå·±è°ƒç”¨ discountLevel å‡½æ•°ï¼Œä¸ä¼šå¢åŠ ä»»ä½•éš¾åº¦ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘æŠŠ discountedPrice å‡½æ•°ä¸­ç”¨åˆ°è¿™ä¸ªå‚æ•°çš„åœ°æ–¹å…¨éƒ½æ”¹ä¸ºç›´æ¥è°ƒç”¨ discountLevel å‡½æ•°ã€‚</p>
<p><strong>class Orderâ€¦</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">discountedPrice</span>(<span class="hljs-params">basePrice, discountLevel</span>) &#123;<br> <span class="hljs-keyword">switch</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">discountLevel</span>) &#123;<br>  <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: <span class="hljs-keyword">return</span> basePrice * <span class="hljs-number">0.95</span>;<br>  <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: <span class="hljs-keyword">return</span> basePrice * <span class="hljs-number">0.9</span>;<br> &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç„¶åç”¨æ”¹å˜å‡½æ•°å£°æ˜ï¼ˆ124ï¼‰æ‰‹æ³•ç§»é™¤è¯¥å‚æ•°ã€‚</p>
<p><strong>class Orderâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">get</span> finalPrice() &#123;<br> <span class="hljs-keyword">const</span> basePrice = <span class="hljs-keyword">this</span>.quantity * <span class="hljs-keyword">this</span>.itemPrice;<br> <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.discountedPrice(basePrice, <span class="hljs-keyword">this</span>.discountLevel);<br>&#125;<br><br>discountedPrice(basePrice, discountLevel) &#123;<br> switch (<span class="hljs-keyword">this</span>.discountLevel) &#123;<br>  case <span class="hljs-number">1</span>: <span class="hljs-keyword">return</span> basePrice * <span class="hljs-number">0.95</span>;<br>  case <span class="hljs-number">2</span>: <span class="hljs-keyword">return</span> basePrice * <span class="hljs-number">0.9</span>;<br> &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="11-6-ä»¥å‚æ•°å–ä»£æŸ¥è¯¢ï¼ˆReplace-Query-with-Parameterï¼‰"><a href="#11-6-ä»¥å‚æ•°å–ä»£æŸ¥è¯¢ï¼ˆReplace-Query-with-Parameterï¼‰" class="headerlink" title="11.6 ä»¥å‚æ•°å–ä»£æŸ¥è¯¢ï¼ˆReplace Query with Parameterï¼‰"></a>11.6 ä»¥å‚æ•°å–ä»£æŸ¥è¯¢ï¼ˆReplace Query with Parameterï¼‰</h2><p>åå‘é‡æ„ï¼šä»¥æŸ¥è¯¢å–ä»£å‚æ•°ï¼ˆ324ï¼‰</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">  target<span class="hljs-constructor">Temperature(<span class="hljs-params">aPlan</span>)</span><br><br><span class="hljs-keyword">function</span> target<span class="hljs-constructor">Temperature(<span class="hljs-params">aPlan</span>)</span> &#123;<br>  currentTemperature = thermostat.currentTemperature;<br>  <span class="hljs-comment">// rest of function...</span><br><br><br>  target<span class="hljs-constructor">Temperature(<span class="hljs-params">aPlan</span>, <span class="hljs-params">thermostat</span>.<span class="hljs-params">currentTemperature</span>)</span><br><br><span class="hljs-keyword">function</span> target<span class="hljs-constructor">Temperature(<span class="hljs-params">aPlan</span>, <span class="hljs-params">currentTemperature</span>)</span> &#123;<br>  <span class="hljs-comment">// rest of function...</span><br></code></pre></td></tr></table></figure>

<h3 id="åŠ¨æœº-11"><a href="#åŠ¨æœº-11" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>åœ¨æµè§ˆå‡½æ•°å®ç°æ—¶ï¼Œæˆ‘æœ‰æ—¶ä¼šå‘ç°ä¸€äº›ä»¤äººä¸å¿«çš„å¼•ç”¨å…³ç³»ï¼Œä¾‹å¦‚ï¼Œå¼•ç”¨ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œæˆ–è€…å¼•ç”¨å¦ä¸€ä¸ªæˆ‘æƒ³è¦ç§»é™¤çš„å…ƒç´ ã€‚ä¸ºäº†è§£å†³è¿™äº›ä»¤äººä¸å¿«çš„å¼•ç”¨ï¼Œæˆ‘éœ€è¦å°†å…¶æ›¿æ¢ä¸ºå‡½æ•°å‚æ•°ï¼Œä»è€Œå°†å¤„ç†å¼•ç”¨å…³ç³»çš„è´£ä»»è½¬äº¤ç»™å‡½æ•°çš„è°ƒç”¨è€…ã€‚</p>
<p>éœ€è¦ä½¿ç”¨æœ¬é‡æ„çš„æƒ…å†µå¤§å¤šæºäºæˆ‘æƒ³è¦æ”¹å˜ä»£ç çš„ä¾èµ–å…³ç³»â€”â€”ä¸ºäº†è®©ç›®æ ‡å‡½æ•°ä¸å†ä¾èµ–äºæŸä¸ªå…ƒç´ ï¼Œæˆ‘æŠŠè¿™ä¸ªå…ƒç´ çš„å€¼ä»¥å‚æ•°å½¢å¼ä¼ é€’ç»™è¯¥å‡½æ•°ã€‚è¿™é‡Œéœ€è¦æ³¨æ„æƒè¡¡ï¼šå¦‚æœæŠŠæ‰€æœ‰ä¾èµ–å…³ç³»éƒ½å˜æˆå‚æ•°ï¼Œä¼šå¯¼è‡´å‚æ•°åˆ—è¡¨å†—é•¿é‡å¤ï¼›å¦‚æœä½œç”¨åŸŸä¹‹é—´çš„å…±äº«å¤ªå¤šï¼Œåˆä¼šå¯¼è‡´å‡½æ•°é—´ä¾èµ–è¿‡åº¦ã€‚æˆ‘ä¸€å‘ä¸å–„äºå¾®å¦™çš„æƒè¡¡ï¼Œæ‰€ä»¥â€œèƒ½å¤Ÿå¯é åœ°æ”¹å˜å†³å®šâ€å°±æ˜¾å¾—å°¤ä¸ºé‡è¦ï¼Œè¿™æ ·éšç€æˆ‘çš„ç†è§£åŠ æ·±ï¼Œç¨‹åºä¹Ÿèƒ½ä»ä¸­å—ç›Šã€‚</p>
<p>å¦‚æœä¸€ä¸ªå‡½æ•°ç”¨åŒæ ·çš„å‚æ•°è°ƒç”¨æ€»æ˜¯ç»™å‡ºåŒæ ·çš„ç»“æœï¼Œæˆ‘ä»¬å°±è¯´è¿™ä¸ªå‡½æ•°å…·æœ‰â€œå¼•ç”¨é€æ˜æ€§â€ï¼ˆreferential transparencyï¼‰ï¼Œè¿™æ ·çš„å‡½æ•°ç†è§£èµ·æ¥æ›´å®¹æ˜“ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°ä½¿ç”¨äº†å¦ä¸€ä¸ªå…ƒç´ ï¼Œè€Œåè€…ä¸å…·å¼•ç”¨é€æ˜æ€§ï¼Œé‚£ä¹ˆåŒ…å«è¯¥å…ƒç´ çš„å‡½æ•°ä¹Ÿå°±å¤±å»äº†å¼•ç”¨é€æ˜æ€§ã€‚åªè¦æŠŠâ€œä¸å…·å¼•ç”¨é€æ˜æ€§çš„å…ƒç´ â€å˜æˆå‚æ•°ä¼ å…¥ï¼Œå‡½æ•°å°±èƒ½é‡è·å¼•ç”¨é€æ˜æ€§ã€‚è™½ç„¶è¿™æ ·å°±æŠŠè´£ä»»è½¬ç§»ç»™äº†å‡½æ•°çš„è°ƒç”¨è€…ï¼Œä½†æ˜¯å…·æœ‰å¼•ç”¨é€æ˜æ€§çš„æ¨¡å—èƒ½å¸¦æ¥å¾ˆå¤šç›Šå¤„ã€‚æœ‰ä¸€ä¸ªå¸¸è§çš„æ¨¡å¼ï¼šåœ¨è´Ÿè´£é€»è¾‘å¤„ç†çš„æ¨¡å—ä¸­åªæœ‰çº¯å‡½æ•°ï¼Œå…¶å¤–å†åŒ…è£¹å¤„ç† I&#x2F;O å’Œå…¶ä»–å¯å˜å…ƒç´ çš„é€»è¾‘ä»£ç ã€‚å€ŸåŠ©ä»¥å‚æ•°å–ä»£æŸ¥è¯¢ï¼Œæˆ‘å¯ä»¥æçº¯ç¨‹åºçš„æŸäº›ç»„æˆéƒ¨åˆ†ï¼Œä½¿å…¶æ›´å®¹æ˜“æµ‹è¯•ã€æ›´å®¹æ˜“ç†è§£ã€‚</p>
<p>ä¸è¿‡ä»¥å‚æ•°å–ä»£æŸ¥è¯¢å¹¶éåªæœ‰å¥½å¤„ã€‚æŠŠæŸ¥è¯¢å˜æˆå‚æ•°ä»¥åï¼Œå°±è¿«ä½¿è°ƒç”¨è€…å¿…é¡»å¼„æ¸…å¦‚ä½•æä¾›æ­£ç¡®çš„å‚æ•°å€¼ï¼Œè¿™ä¼šå¢åŠ å‡½æ•°è°ƒç”¨è€…çš„å¤æ‚åº¦ï¼Œè€Œæˆ‘åœ¨è®¾è®¡æ¥å£æ—¶é€šå¸¸æ›´æ„¿æ„è®©æ¥å£çš„æ¶ˆè´¹è€…æ›´å®¹æ˜“ä½¿ç”¨ã€‚å½’æ ¹åˆ°åº•ï¼Œè¿™æ˜¯å…³äºç¨‹åºä¸­è´£ä»»åˆ†é…çš„é—®é¢˜ï¼Œè€Œè¿™æ–¹é¢çš„å†³ç­–æ—¢ä¸å®¹æ˜“ï¼Œä¹Ÿä¸ä¼šä¸€åŠ³æ°¸é€¸â€”â€”è¿™å°±æ˜¯æˆ‘éœ€è¦éå¸¸ç†Ÿæ‚‰æœ¬é‡æ„ï¼ˆåŠå…¶åå‘é‡æ„ï¼‰çš„åŸå› ã€‚</p>
<h3 id="åšæ³•-11"><a href="#åšæ³•-11" class="headerlink" title="åšæ³•"></a>åšæ³•</h3><p>å¯¹æ‰§è¡ŒæŸ¥è¯¢æ“ä½œçš„ä»£ç ä½¿ç”¨æç‚¼å˜é‡ï¼ˆ119ï¼‰ï¼Œå°†å…¶ä»å‡½æ•°ä½“ä¸­åˆ†ç¦»å‡ºæ¥ã€‚</p>
<p>ç°åœ¨å‡½æ•°ä½“ä»£ç å·²ç»ä¸å†æ‰§è¡ŒæŸ¥è¯¢æ“ä½œï¼ˆè€Œæ˜¯ä½¿ç”¨å‰ä¸€æ­¥æç‚¼å‡ºçš„å˜é‡ï¼‰ï¼Œå¯¹è¿™éƒ¨åˆ†ä»£ç ä½¿ç”¨æç‚¼å‡½æ•°ï¼ˆ106ï¼‰ã€‚</p>
<p>ç»™æç‚¼å‡ºçš„æ–°å‡½æ•°èµ·ä¸€ä¸ªå®¹æ˜“æœç´¢çš„åå­—ï¼Œä»¥ä¾¿ç¨åæ”¹åã€‚</p>
<p>ä½¿ç”¨å†…è”å˜é‡ï¼ˆ123ï¼‰ï¼Œæ¶ˆé™¤åˆšæ‰æç‚¼å‡ºæ¥çš„å˜é‡ã€‚</p>
<p>å¯¹åŸæ¥çš„å‡½æ•°ä½¿ç”¨å†…è”å‡½æ•°ï¼ˆ115ï¼‰ã€‚</p>
<p>å¯¹æ–°å‡½æ•°æ”¹åï¼Œæ”¹å›åŸæ¥å‡½æ•°çš„åå­—ã€‚</p>
<h3 id="èŒƒä¾‹-11"><a href="#èŒƒä¾‹-11" class="headerlink" title="èŒƒä¾‹"></a>èŒƒä¾‹</h3><p>æˆ‘ä»¬æƒ³è±¡ä¸€ä¸ªç®€å•å´åˆçƒ¦äººçš„æ¸©åº¦æ§åˆ¶ç³»ç»Ÿã€‚ç”¨æˆ·å¯ä»¥ä»ä¸€ä¸ªæ¸©æ§ç»ˆç«¯ï¼ˆthermostatï¼‰æŒ‡å®šæ¸©åº¦ï¼Œä½†æŒ‡å®šçš„ç›®æ ‡æ¸©åº¦å¿…é¡»åœ¨æ¸©åº¦æ§åˆ¶è®¡åˆ’ï¼ˆheating planï¼‰å…è®¸çš„èŒƒå›´å†…ã€‚</p>
<p><strong>class HeatingPlanâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">get</span> targetTemperature() &#123;<br>  <span class="hljs-keyword">if</span> (thermostat.selectedTemperature &gt; <span class="hljs-keyword">this</span>._max) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._max;<br>  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (thermostat.selectedTemperature &lt; <span class="hljs-keyword">this</span>._min) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._min;<br>  <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> thermostat.selectedTemperature;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>è°ƒç”¨æ–¹â€¦</strong></p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs scss">if (thePlan.targetTemperature &gt; thermostat.currentTemperature) <span class="hljs-built_in">setToHeat</span>();<br>else if (thePlan.targetTemperature&lt;thermostat.currentTemperature)<span class="hljs-built_in">setToCool</span>();<br>else <span class="hljs-built_in">setOff</span>();<br></code></pre></td></tr></table></figure>

<p>ç³»ç»Ÿçš„æ¸©æ§è®¡åˆ’è§„åˆ™æŠ‘åˆ¶äº†æˆ‘çš„è¦æ±‚ï¼Œä½œä¸ºè¿™æ ·ä¸€ä¸ªç³»ç»Ÿçš„ç”¨æˆ·ï¼Œæˆ‘å¯èƒ½ä¼šæ„Ÿåˆ°å¾ˆçƒ¦æ¼ã€‚ä¸è¿‡ä½œä¸ºç¨‹åºå‘˜ï¼Œæˆ‘æ›´æ‹…å¿ƒçš„æ˜¯ targetTemperature å‡½æ•°ä¾èµ–äºå…¨å±€çš„ thermostat å¯¹è±¡ã€‚æˆ‘å¯ä»¥æŠŠéœ€è¦è¿™ä¸ªå¯¹è±¡æä¾›çš„ä¿¡æ¯ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œä»è€Œæ‰“ç ´å¯¹è¯¥å¯¹è±¡çš„ä¾èµ–ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘è¦ç”¨æç‚¼å˜é‡ï¼ˆ119ï¼‰æŠŠâ€œå¸Œæœ›ä½œä¸ºå‚æ•°ä¼ å…¥çš„ä¿¡æ¯â€æç‚¼å‡ºæ¥ã€‚</p>
<p><strong>class HeatingPlanâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">get</span> targetTemperature() &#123;<br> <span class="hljs-keyword">const</span> selectedTemperature = thermostat.selectedTemperature;<br> <span class="hljs-keyword">if</span>      (selectedTemperature &gt; <span class="hljs-keyword">this</span>._max) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._max;<br> <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (selectedTemperature &lt; <span class="hljs-keyword">this</span>._min) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._min;<br> <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> selectedTemperature;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¿™æ ·å¯ä»¥æ¯”è¾ƒå®¹æ˜“åœ°ç”¨æç‚¼å‡½æ•°ï¼ˆ106ï¼‰æŠŠæ•´ä¸ªå‡½æ•°ä½“æç‚¼å‡ºæ¥ï¼Œåªå‰©â€œè®¡ç®—å‚æ•°å€¼â€çš„é€»è¾‘è¿˜åœ¨åŸåœ°ã€‚</p>
<p><strong>class HeatingPlanâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">get</span> targetTemperature() &#123;<br> <span class="hljs-keyword">const</span> selectedTemperature = thermostat.selectedTemperature;<br> <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.xxNEWtargetTemperature(selectedTemperature);<br>&#125;<br><br>xxNEWtargetTemperature(selectedTemperature) &#123;<br> <span class="hljs-keyword">if</span>      (selectedTemperature &gt; <span class="hljs-keyword">this</span>._max) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._max;<br> <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (selectedTemperature &lt; <span class="hljs-keyword">this</span>._min) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._min;<br> <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> selectedTemperature;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç„¶åæŠŠåˆšæ‰æç‚¼å‡ºæ¥çš„å˜é‡å†…è”å›å»ï¼Œäºæ˜¯æ—§å‡½æ•°å°±åªå‰©ä¸€ä¸ªç®€å•çš„è°ƒç”¨ã€‚</p>
<p><strong>class HeatingPlanâ€¦</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">get</span> <span class="hljs-title">targetTemperature</span>()</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.xxNEWtargetTemperature(thermostat.selectedTemperature);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç°åœ¨å¯ä»¥å¯¹å…¶ä½¿ç”¨å†…è”å‡½æ•°ï¼ˆ115ï¼‰ã€‚</p>
<p><strong>è°ƒç”¨æ–¹â€¦</strong></p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">if</span> (thePlan.xx<span class="hljs-constructor">NEWtargetTemperature(<span class="hljs-params">thermostat</span>.<span class="hljs-params">selectedTemperature</span>)</span> &gt;<br>   thermostat.currentTemperature)<br> set<span class="hljs-constructor">ToHeat()</span>;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (thePlan.xx<span class="hljs-constructor">NEWtargetTemperature(<span class="hljs-params">thermostat</span>.<span class="hljs-params">selectedTemperature</span>)</span> &lt;<br>     thermostat.currentTemperature)<br> set<span class="hljs-constructor">ToCool()</span>;<br><span class="hljs-keyword">else</span><br> set<span class="hljs-constructor">Off()</span>;<br></code></pre></td></tr></table></figure>

<p>å†æŠŠæ–°å‡½æ•°æ”¹åï¼Œç”¨å›æ—§å‡½æ•°çš„åå­—ã€‚å¾—ç›Šäºä¹‹å‰ç»™å®ƒèµ·äº†ä¸€ä¸ªå®¹æ˜“æœç´¢çš„åå­—ï¼Œç°åœ¨åªè¦æŠŠå‰ç¼€å»æ‰å°±è¡Œã€‚</p>
<p><strong>è°ƒç”¨æ–¹â€¦</strong></p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">if</span> (thePlan.target<span class="hljs-constructor">Temperature(<span class="hljs-params">thermostat</span>.<span class="hljs-params">selectedTemperature</span>)</span> &gt;<br>   thermostat.currentTemperature)<br> set<span class="hljs-constructor">ToHeat()</span>;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (thePlan.target<span class="hljs-constructor">Temperature(<span class="hljs-params">thermostat</span>.<span class="hljs-params">selectedTemperature</span>)</span> &lt;<br>     thermostat.currentTemperature)<br> set<span class="hljs-constructor">ToCool()</span>;<br><span class="hljs-keyword">else</span><br> set<span class="hljs-constructor">Off()</span>;<br></code></pre></td></tr></table></figure>

<p><strong>class HeatingPlanâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">targetTemperature(selectedTemperature) &#123;<br> <span class="hljs-keyword">if</span> (selectedTemperature &gt; <span class="hljs-keyword">this</span>._max) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._max;<br> <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (selectedTemperature &lt; <span class="hljs-keyword">this</span>._min) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._min;<br> <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> selectedTemperature;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è°ƒç”¨æ–¹çš„ä»£ç çœ‹èµ·æ¥æ¯”é‡æ„ä¹‹å‰æ›´ç¬¨é‡äº†ï¼Œè¿™æ˜¯ä½¿ç”¨æœ¬é‡æ„æ‰‹æ³•çš„å¸¸è§æƒ…å†µã€‚å°†ä¸€ä¸ªä¾èµ–å…³ç³»ä»ä¸€ä¸ªæ¨¡å—ä¸­ç§»å‡ºï¼Œå°±æ„å‘³ç€å°†å¤„ç†è¿™ä¸ªä¾èµ–å…³ç³»çš„è´£ä»»æ¨å›ç»™è°ƒç”¨è€…ã€‚è¿™æ˜¯ä¸ºäº†é™ä½è€¦åˆåº¦è€Œä»˜å‡ºçš„ä»£ä»·ã€‚</p>
<p>ä½†æ˜¯ï¼Œå»é™¤å¯¹ thermostat å¯¹è±¡çš„è€¦åˆï¼Œå¹¶ä¸æ˜¯æœ¬é‡æ„å¸¦æ¥çš„å”¯ä¸€æ”¶ç›Šã€‚HeatingPlan ç±»æœ¬èº«æ˜¯ä¸å¯å˜çš„â€”â€”å­—æ®µçš„å€¼éƒ½åœ¨æ„é€ å‡½æ•°ä¸­è®¾ç½®ï¼Œä»»ä½•å‡½æ•°éƒ½ä¸ä¼šä¿®æ”¹å®ƒä»¬ã€‚ï¼ˆä¸ç”¨è´¹å¿ƒå»æŸ¥çœ‹æ•´ä¸ªç±»çš„ä»£ç ï¼Œç›¸ä¿¡æˆ‘å°±å¥½ã€‚ï¼‰åœ¨ä¸å¯å˜çš„ HeatingPlan åŸºç¡€ä¸Šï¼ŒæŠŠå¯¹ thermostat çš„ä¾èµ–ç§»å‡ºå‡½æ•°ä½“ä¹‹åï¼Œæˆ‘åˆä½¿ targetTemperature å‡½æ•°å…·å¤‡äº†å¼•ç”¨é€æ˜æ€§ã€‚ä»æ­¤ä»¥åï¼Œåªè¦åœ¨åŒä¸€ä¸ª HeatingPlan å¯¹è±¡ä¸Šç”¨åŒæ ·çš„å‚æ•°è°ƒç”¨ targetTemperature å‡½æ•°ï¼Œæˆ‘ä¼šå§‹ç»ˆå¾—åˆ°åŒæ ·çš„ç»“æœã€‚å¦‚æœ HeatingPlan çš„æ‰€æœ‰å‡½æ•°éƒ½å…·æœ‰å¼•ç”¨é€æ˜æ€§ï¼Œè¿™ä¸ªç±»ä¼šæ›´å®¹æ˜“æµ‹è¯•ï¼Œå…¶è¡Œä¸ºä¹Ÿæ›´å®¹æ˜“ç†è§£ã€‚</p>
<p>JavaScript çš„ç±»æ¨¡å‹æœ‰ä¸€ä¸ªé—®é¢˜ï¼šæ— æ³•å¼ºåˆ¶è¦æ±‚ç±»çš„ä¸å¯å˜æ€§â€”â€”å§‹ç»ˆæœ‰åŠæ³•ä¿®æ”¹å¯¹è±¡çš„å†…éƒ¨æ•°æ®ã€‚å°½ç®¡å¦‚æ­¤ï¼Œåœ¨ç¼–å†™ä¸€ä¸ªç±»çš„æ—¶å€™æ˜ç¡®è¯´æ˜å¹¶é¼“åŠ±ä¸å¯å˜æ€§ï¼Œé€šå¸¸ä¹Ÿå°±è¶³å¤Ÿäº†ã€‚å°½é‡è®©ç±»ä¿æŒä¸å¯å˜é€šå¸¸æ˜¯ä¸€ä¸ªå¥½çš„ç­–ç•¥ï¼Œä»¥å‚æ•°å–ä»£æŸ¥è¯¢åˆ™æ˜¯è¾¾æˆè¿™ä¸€ç­–ç•¥çš„åˆ©å™¨ã€‚</p>
<h2 id="11-7-ç§»é™¤è®¾å€¼å‡½æ•°ï¼ˆRemove-Setting-Methodï¼‰"><a href="#11-7-ç§»é™¤è®¾å€¼å‡½æ•°ï¼ˆRemove-Setting-Methodï¼‰" class="headerlink" title="11.7 ç§»é™¤è®¾å€¼å‡½æ•°ï¼ˆRemove Setting Methodï¼‰"></a>11.7 ç§»é™¤è®¾å€¼å‡½æ•°ï¼ˆRemove Setting Methodï¼‰</h2><figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nim">class <span class="hljs-type">Person</span> &#123;<br>get name() <span class="hljs-meta">&#123;...&#125;</span><br><span class="hljs-type">set</span> name(aString) <span class="hljs-meta">&#123;...&#125;</span><br><br><br>class <span class="hljs-type">Person</span> &#123;<br>get name() <span class="hljs-meta">&#123;...&#125;</span><br></code></pre></td></tr></table></figure>

<h3 id="åŠ¨æœº-12"><a href="#åŠ¨æœº-12" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>å¦‚æœä¸ºæŸä¸ªå­—æ®µæä¾›äº†è®¾å€¼å‡½æ•°ï¼Œè¿™å°±æš—ç¤ºè¿™ä¸ªå­—æ®µå¯ä»¥è¢«æ”¹å˜ã€‚å¦‚æœä¸å¸Œæœ›åœ¨å¯¹è±¡åˆ›å»ºä¹‹åæ­¤å­—æ®µè¿˜æœ‰æœºä¼šè¢«æ”¹å˜ï¼Œé‚£å°±ä¸è¦ä¸ºå®ƒæä¾›è®¾å€¼å‡½æ•°ï¼ˆåŒæ—¶å°†è¯¥å­—æ®µå£°æ˜ä¸ºä¸å¯å˜ï¼‰ã€‚è¿™æ ·ä¸€æ¥ï¼Œè¯¥å­—æ®µå°±åªèƒ½åœ¨æ„é€ å‡½æ•°ä¸­èµ‹å€¼ï¼Œæˆ‘â€œä¸æƒ³è®©å®ƒè¢«ä¿®æ”¹â€çš„æ„å›¾ä¼šæ›´åŠ æ¸…æ™°ï¼Œå¹¶ä¸”å¯ä»¥æ’é™¤å…¶å€¼è¢«ä¿®æ”¹çš„å¯èƒ½æ€§â€”â€”è¿™ç§å¯èƒ½æ€§å¾€å¾€æ˜¯éå¸¸å¤§çš„ã€‚</p>
<p>æœ‰ä¸¤ç§å¸¸è§çš„æƒ…å†µéœ€è¦è®¨è®ºã€‚ä¸€ç§æƒ…å†µæ˜¯ï¼Œæœ‰äº›äººå–œæ¬¢å§‹ç»ˆé€šè¿‡è®¿é—®å‡½æ•°æ¥è¯»å†™å­—æ®µå€¼ï¼ŒåŒ…æ‹¬åœ¨æ„é€ å‡½æ•°å†…ä¹Ÿæ˜¯å¦‚æ­¤ã€‚è¿™ä¼šå¯¼è‡´æ„é€ å‡½æ•°æˆä¸ºè®¾å€¼å‡½æ•°çš„å”¯ä¸€ä½¿ç”¨è€…ã€‚è‹¥æœçœŸå¦‚æ­¤ï¼Œæˆ‘æ›´æ„¿æ„å»é™¤è®¾å€¼å‡½æ•°ï¼Œæ¸…æ™°åœ°è¡¨è¾¾â€œæ„é€ ä¹‹åä¸åº”è¯¥å†æ›´æ–°å­—æ®µå€¼â€çš„æ„å›¾ã€‚</p>
<p>å¦ä¸€ç§æƒ…å†µæ˜¯ï¼Œå¯¹è±¡æ˜¯ç”±å®¢æˆ·ç«¯é€šè¿‡åˆ›å»ºè„šæœ¬æ„é€ å‡ºæ¥ï¼Œè€Œä¸æ˜¯åªæœ‰ä¸€æ¬¡ç®€å•çš„æ„é€ å‡½æ•°è°ƒç”¨ã€‚æ‰€è°“â€œåˆ›å»ºè„šæœ¬â€ï¼Œé¦–å…ˆæ˜¯è°ƒç”¨æ„é€ å‡½æ•°ï¼Œç„¶åå°±æ˜¯ä¸€ç³»åˆ—è®¾å€¼å‡½æ•°çš„è°ƒç”¨ï¼Œå…±åŒå®Œæˆæ–°å¯¹è±¡çš„æ„é€ ã€‚åˆ›å»ºè„šæœ¬æ‰§è¡Œå®Œä»¥åï¼Œè¿™ä¸ªæ–°ç”Ÿå¯¹è±¡çš„éƒ¨åˆ†ï¼ˆä¹ƒè‡³å…¨éƒ¨ï¼‰å­—æ®µå°±ä¸åº”è¯¥å†è¢«ä¿®æ”¹ã€‚è®¾å€¼å‡½æ•°åªåº”è¯¥åœ¨èµ·åˆçš„å¯¹è±¡åˆ›å»ºè¿‡ç¨‹ä¸­è°ƒç”¨ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œæˆ‘ä¹Ÿä¼šæƒ³åŠæ³•å»é™¤è®¾å€¼å‡½æ•°ï¼Œæ›´æ¸…æ™°åœ°è¡¨è¾¾æˆ‘çš„æ„å›¾ã€‚</p>
<h3 id="åšæ³•-12"><a href="#åšæ³•-12" class="headerlink" title="åšæ³•"></a>åšæ³•</h3><p>å¦‚æœæ„é€ å‡½æ•°å°šæ— æ³•å¾—åˆ°æƒ³è¦è®¾å…¥å­—æ®µçš„å€¼ï¼Œå°±ä½¿ç”¨æ”¹å˜å‡½æ•°å£°æ˜ï¼ˆ124ï¼‰å°†è¿™ä¸ªå€¼ä»¥å‚æ•°çš„å½¢å¼ä¼ å…¥æ„é€ å‡½æ•°ã€‚åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨è®¾å€¼å‡½æ•°ï¼Œå¯¹å­—æ®µè®¾å€¼ã€‚</p>
<p>å¦‚æœæƒ³ç§»é™¤å¤šä¸ªè®¾å€¼å‡½æ•°ï¼Œå¯ä»¥ä¸€æ¬¡æ€§æŠŠå®ƒä»¬çš„å€¼éƒ½ä¼ å…¥æ„é€ å‡½æ•°ï¼Œè¿™èƒ½ç®€åŒ–åç»­æ­¥éª¤ã€‚</p>
<p>ç§»é™¤æ‰€æœ‰åœ¨æ„é€ å‡½æ•°ä¹‹å¤–å¯¹è®¾å€¼å‡½æ•°çš„è°ƒç”¨ï¼Œæ”¹ä¸ºä½¿ç”¨æ–°çš„æ„é€ å‡½æ•°ã€‚æ¯æ¬¡ä¿®æ”¹ä¹‹åéƒ½è¦æµ‹è¯•ã€‚</p>
<p>å¦‚æœä¸èƒ½æŠŠâ€œè°ƒç”¨è®¾å€¼å‡½æ•°â€æ›¿æ¢ä¸ºâ€œåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡â€ï¼ˆä¾‹å¦‚ä½ éœ€è¦æ›´æ–°ä¸€ä¸ªå¤šå¤„å…±äº«å¼•ç”¨çš„å¯¹è±¡ï¼‰ï¼Œè¯·æ”¾å¼ƒæœ¬é‡æ„ã€‚</p>
<p>ä½¿ç”¨å†…è”å‡½æ•°ï¼ˆ115ï¼‰æ¶ˆå»è®¾å€¼å‡½æ•°ã€‚å¦‚æœå¯èƒ½çš„è¯ï¼ŒæŠŠå­—æ®µå£°æ˜ä¸ºä¸å¯å˜ã€‚</p>
<p>æµ‹è¯•ã€‚</p>
<h3 id="èŒƒä¾‹-12"><a href="#èŒƒä¾‹-12" class="headerlink" title="èŒƒä¾‹"></a>èŒƒä¾‹</h3><p>æˆ‘æœ‰ä¸€ä¸ªå¾ˆç®€å•çš„ Person ç±»ã€‚</p>
<p><strong>class Personâ€¦</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">get</span> <span class="hljs-title">name</span>()</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._name;&#125;<br><span class="hljs-function"><span class="hljs-keyword">set</span> <span class="hljs-title">name</span>(<span class="hljs-params">arg</span>)</span> &#123;<span class="hljs-keyword">this</span>._name = arg;&#125;<br><span class="hljs-function"><span class="hljs-keyword">get</span> <span class="hljs-title">id</span>()</span> &#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._id;&#125;<br><span class="hljs-function"><span class="hljs-keyword">set</span> <span class="hljs-title">id</span>(<span class="hljs-params">arg</span>)</span> &#123;<span class="hljs-keyword">this</span>._id = arg;&#125;<br></code></pre></td></tr></table></figure>

<p>ç›®å‰æˆ‘ä¼šè¿™æ ·åˆ›å»ºæ–°å¯¹è±¡ï¼š</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const martin <span class="hljs-operator">=</span> new Person()<span class="hljs-comment">;</span><br>martin.name <span class="hljs-operator">=</span> <span class="hljs-string">&quot;martin&quot;</span><span class="hljs-comment">;</span><br>martin.id <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1234&quot;</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p>å¯¹è±¡åˆ›å»ºä¹‹åï¼Œname å­—æ®µå¯èƒ½ä¼šæ”¹å˜ï¼Œä½† id å­—æ®µä¸ä¼šã€‚ä¸ºäº†æ›´æ¸…æ™°åœ°è¡¨è¾¾è¿™ä¸ªè®¾è®¡æ„å›¾ï¼Œæˆ‘å¸Œæœ›ç§»é™¤å¯¹åº” id å­—æ®µçš„è®¾å€¼å‡½æ•°ã€‚</p>
<p>ä½† id å­—æ®µè¿˜å¾—è®¾ç½®åˆå§‹å€¼ï¼Œæ‰€ä»¥æˆ‘é¦–å…ˆç”¨æ”¹å˜å‡½æ•°å£°æ˜ï¼ˆ124ï¼‰åœ¨æ„é€ å‡½æ•°ä¸­æ·»åŠ å¯¹åº”çš„å‚æ•°ã€‚</p>
<p><strong>class Personâ€¦</strong></p>
<figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs delphi"><span class="hljs-function"><span class="hljs-keyword">constructor</span><span class="hljs-params">(id)</span> <span class="hljs-comment">&#123;</span></span><br><span class="hljs-comment"><span class="hljs-function">  this.id = id;</span></span><br><span class="hljs-comment"><span class="hljs-function">&#125;</span></span><br></code></pre></td></tr></table></figure>

<p>ç„¶åè°ƒæ•´åˆ›å»ºè„šæœ¬ï¼Œæ”¹ä¸ºä»æ„é€ å‡½æ•°è®¾å€¼ id å­—æ®µå€¼ã€‚</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const martin <span class="hljs-operator">=</span> new Person(<span class="hljs-string">&quot;1234&quot;</span>)<span class="hljs-comment">;</span><br>martin.name <span class="hljs-operator">=</span> <span class="hljs-string">&quot;martin&quot;</span><span class="hljs-comment">;</span><br>martin.id <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1234&quot;</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p>æ‰€æœ‰åˆ›å»º Person å¯¹è±¡çš„åœ°æ–¹éƒ½è¦å¦‚æ­¤ä¿®æ”¹ï¼Œæ¯æ¬¡ä¿®æ”¹ä¹‹åè¦æ‰§è¡Œæµ‹è¯•ã€‚</p>
<p>å…¨éƒ¨ä¿®æ”¹å®Œæˆåï¼Œå°±å¯ä»¥ç”¨å†…è”å‡½æ•°ï¼ˆ115ï¼‰æ¶ˆå»è®¾å€¼å‡½æ•°ã€‚</p>
<p><strong>class Personâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">constructor</span>(id) &#123;<br>  <span class="hljs-keyword">this</span>._id = id;<br>&#125;<br><span class="hljs-keyword">get</span> name() &#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._name;&#125;<br><span class="hljs-keyword">set</span> name(arg) &#123;<span class="hljs-keyword">this</span>._name = arg;&#125;<br><span class="hljs-keyword">get</span> id() &#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._id;&#125;<br><span class="hljs-keyword">set</span> id(arg) &#123;<span class="hljs-keyword">this</span>._id = arg;&#125;<br></code></pre></td></tr></table></figure>

<h2 id="11-8-ä»¥å·¥å‚å‡½æ•°å–ä»£æ„é€ å‡½æ•°ï¼ˆReplace-Constructor-with-Factory-Functionï¼‰"><a href="#11-8-ä»¥å·¥å‚å‡½æ•°å–ä»£æ„é€ å‡½æ•°ï¼ˆReplace-Constructor-with-Factory-Functionï¼‰" class="headerlink" title="11.8 ä»¥å·¥å‚å‡½æ•°å–ä»£æ„é€ å‡½æ•°ï¼ˆReplace Constructor with Factory Functionï¼‰"></a>11.8 ä»¥å·¥å‚å‡½æ•°å–ä»£æ„é€ å‡½æ•°ï¼ˆReplace Constructor with Factory Functionï¼‰</h2><p>æ›¾ç”¨åï¼šä»¥å·¥å‚å‡½æ•°å–ä»£æ„é€ å‡½æ•°ï¼ˆReplace Constructor with Factory Methodï¼‰</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">leadEngineer = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Employee(<span class="hljs-params">document</span>.<span class="hljs-params">leadEngineer</span>, <span class="hljs-string">&quot;E&quot;</span>)</span>;<br><br>leadEngineer = create<span class="hljs-constructor">Engineer(<span class="hljs-params">document</span>.<span class="hljs-params">leadEngineer</span>)</span>;<br></code></pre></td></tr></table></figure>

<h3 id="åŠ¨æœº-13"><a href="#åŠ¨æœº-13" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>å¾ˆå¤šé¢å‘å¯¹è±¡è¯­è¨€éƒ½æœ‰ç‰¹åˆ«çš„æ„é€ å‡½æ•°ï¼Œä¸“é—¨ç”¨äºå¯¹è±¡çš„åˆå§‹åŒ–ã€‚éœ€è¦æ–°å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå®¢æˆ·ç«¯é€šå¸¸ä¼šè°ƒç”¨æ„é€ å‡½æ•°ã€‚ä½†ä¸ä¸€èˆ¬çš„å‡½æ•°ç›¸æ¯”ï¼Œæ„é€ å‡½æ•°åˆå¸¸æœ‰ä¸€äº›ä¸‘é™‹çš„å±€é™æ€§ã€‚ä¾‹å¦‚ï¼ŒJava çš„æ„é€ å‡½æ•°åªèƒ½è¿”å›å½“å‰æ‰€è°ƒç”¨ç±»çš„å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘æ— æ³•æ ¹æ®ç¯å¢ƒæˆ–å‚æ•°ä¿¡æ¯è¿”å›å­ç±»å®ä¾‹æˆ–ä»£ç†å¯¹è±¡ï¼›æ„é€ å‡½æ•°çš„åå­—æ˜¯å›ºå®šçš„ï¼Œå› æ­¤æ— æ³•ä½¿ç”¨æ¯”é»˜è®¤åå­—æ›´æ¸…æ™°çš„å‡½æ•°åï¼›æ„é€ å‡½æ•°éœ€è¦é€šè¿‡ç‰¹æ®Šçš„æ“ä½œç¬¦æ¥è°ƒç”¨ï¼ˆåœ¨å¾ˆå¤šè¯­è¨€ä¸­æ˜¯ new å…³é”®å­—ï¼‰ï¼Œæ‰€ä»¥åœ¨è¦æ±‚æ™®é€šå‡½æ•°çš„åœºåˆå°±éš¾ä»¥ä½¿ç”¨ã€‚</p>
<p>å·¥å‚å‡½æ•°å°±ä¸å—è¿™äº›é™åˆ¶ã€‚å·¥å‚å‡½æ•°çš„å®ç°å†…éƒ¨å¯ä»¥è°ƒç”¨æ„é€ å‡½æ•°ï¼Œä½†ä¹Ÿå¯ä»¥æ¢æˆåˆ«çš„æ–¹å¼å®ç°ã€‚</p>
<h3 id="åšæ³•-13"><a href="#åšæ³•-13" class="headerlink" title="åšæ³•"></a>åšæ³•</h3><p>æ–°å»ºä¸€ä¸ªå·¥å‚å‡½æ•°ï¼Œè®©å®ƒè°ƒç”¨ç°æœ‰çš„æ„é€ å‡½æ•°ã€‚</p>
<p>å°†è°ƒç”¨æ„é€ å‡½æ•°çš„ä»£ç æ”¹ä¸ºè°ƒç”¨å·¥å‚å‡½æ•°ã€‚</p>
<p>æ¯ä¿®æ”¹ä¸€å¤„ï¼Œå°±æ‰§è¡Œæµ‹è¯•ã€‚</p>
<p>å°½é‡ç¼©å°æ„é€ å‡½æ•°çš„å¯è§èŒƒå›´ã€‚</p>
<h3 id="èŒƒä¾‹-13"><a href="#èŒƒä¾‹-13" class="headerlink" title="èŒƒä¾‹"></a>èŒƒä¾‹</h3><p>åˆæ˜¯é‚£ä¸ªå•è°ƒä¹å‘³çš„ä¾‹å­ï¼šå‘˜å·¥è–ªèµ„ç³»ç»Ÿã€‚æˆ‘è¿˜æ˜¯ä»¥ Employee ç±»è¡¨ç¤ºâ€œå‘˜å·¥â€ã€‚</p>
<p><strong>class Employeeâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">constructor</span> (name, typeCode) &#123;<br>  <span class="hljs-keyword">this</span>._name = name;<br>  <span class="hljs-keyword">this</span>._typeCode = typeCode;<br>&#125;<br><span class="hljs-keyword">get</span> name() &#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._name;&#125;<br><span class="hljs-keyword">get</span> type() &#123;<br>  <span class="hljs-keyword">return</span> Employee.legalTypeCodes[<span class="hljs-keyword">this</span>._typeCode];<br>&#125;<br>static <span class="hljs-keyword">get</span> legalTypeCodes() &#123;<br>  <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;E&quot;</span>: <span class="hljs-string">&quot;Engineer&quot;</span>, <span class="hljs-string">&quot;M&quot;</span>: <span class="hljs-string">&quot;Manager&quot;</span>, <span class="hljs-string">&quot;S&quot;</span>: <span class="hljs-string">&quot;Salesman&quot;</span>&#125;;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ä½¿ç”¨å®ƒçš„ä»£ç æœ‰è¿™æ ·çš„ï¼š</p>
<p><strong>è°ƒç”¨æ–¹â€¦</strong></p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">candidate = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Employee(<span class="hljs-params">document</span>.<span class="hljs-params">name</span>, <span class="hljs-params">document</span>.<span class="hljs-params">empType</span>)</span>;<br></code></pre></td></tr></table></figure>

<p>ä¹Ÿæœ‰è¿™æ ·çš„ï¼š</p>
<p><strong>è°ƒç”¨æ–¹â€¦</strong></p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">const leadEngineer = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Employee(<span class="hljs-params">document</span>.<span class="hljs-params">leadEngineer</span>, <span class="hljs-string">&quot;E&quot;</span>)</span>;<br></code></pre></td></tr></table></figure>

<p>é‡æ„çš„ç¬¬ä¸€æ­¥æ˜¯åˆ›å»ºå·¥å‚å‡½æ•°ï¼Œå…¶ä¸­æŠŠå¯¹è±¡åˆ›å»ºçš„è´£ä»»ç›´æ¥å§”æ´¾ç»™æ„é€ å‡½æ•°ã€‚</p>
<p><strong>é¡¶å±‚ä½œç”¨åŸŸâ€¦</strong></p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> create<span class="hljs-constructor">Employee(<span class="hljs-params">name</span>, <span class="hljs-params">typeCode</span>)</span> &#123;<br>  return <span class="hljs-keyword">new</span> <span class="hljs-constructor">Employee(<span class="hljs-params">name</span>, <span class="hljs-params">typeCode</span>)</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç„¶åæ‰¾åˆ°æ„é€ å‡½æ•°çš„è°ƒç”¨è€…ï¼Œå¹¶é€ä¸€ä¿®æ”¹å®ƒä»¬ï¼Œä»¤å…¶ä½¿ç”¨å·¥å‚å‡½æ•°ã€‚</p>
<p>ç¬¬ä¸€å¤„çš„ä¿®æ”¹å¾ˆç®€å•ã€‚</p>
<p><strong>è°ƒç”¨æ–¹â€¦</strong></p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">candidate = create<span class="hljs-constructor">Employee(<span class="hljs-params">document</span>.<span class="hljs-params">name</span>, <span class="hljs-params">document</span>.<span class="hljs-params">empType</span>)</span>;<br></code></pre></td></tr></table></figure>

<p>ç¬¬äºŒå¤„åˆ™å¯ä»¥è¿™æ ·ä½¿ç”¨å·¥å‚å‡½æ•°ã€‚</p>
<p><strong>è°ƒç”¨æ–¹â€¦</strong></p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">const leadEngineer = create<span class="hljs-constructor">Employee(<span class="hljs-params">document</span>.<span class="hljs-params">leadEngineer</span>, <span class="hljs-string">&quot;E&quot;</span>)</span>;<br></code></pre></td></tr></table></figure>

<p>ä½†æˆ‘ä¸å–œæ¬¢è¿™é‡Œçš„ç±»å‹ç â€”â€”ä»¥å­—ç¬¦ä¸²å­—é¢é‡çš„å½¢å¼ä¼ å…¥ç±»å‹ç ï¼Œä¸€èˆ¬æ¥è¯´éƒ½æ˜¯åå‘³é“ã€‚æ‰€ä»¥æˆ‘æ›´æ„¿æ„å†æ–°å»ºä¸€ä¸ªå·¥å‚å‡½æ•°ï¼ŒæŠŠâ€œå‘˜å·¥ç±»åˆ«â€çš„ä¿¡æ¯åµŒåœ¨å‡½æ•°åé‡Œä½“ç°ã€‚</p>
<p><strong>è°ƒç”¨æ–¹â€¦</strong></p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">const leadEngineer = create<span class="hljs-constructor">Engineer(<span class="hljs-params">document</span>.<span class="hljs-params">leadEngineer</span>)</span>;<br></code></pre></td></tr></table></figure>

<p><strong>é¡¶å±‚ä½œç”¨åŸŸâ€¦</strong></p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> create<span class="hljs-constructor">Engineer(<span class="hljs-params">name</span>)</span> &#123;<br>  return <span class="hljs-keyword">new</span> <span class="hljs-constructor">Employee(<span class="hljs-params">name</span>, <span class="hljs-string">&quot;E&quot;</span>)</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="11-9-ä»¥å‘½ä»¤å–ä»£å‡½æ•°ï¼ˆReplace-Function-with-Commandï¼‰"><a href="#11-9-ä»¥å‘½ä»¤å–ä»£å‡½æ•°ï¼ˆReplace-Function-with-Commandï¼‰" class="headerlink" title="11.9 ä»¥å‘½ä»¤å–ä»£å‡½æ•°ï¼ˆReplace Function with Commandï¼‰"></a>11.9 ä»¥å‘½ä»¤å–ä»£å‡½æ•°ï¼ˆReplace Function with Commandï¼‰</h2><p>æ›¾ç”¨åï¼šä»¥å‡½æ•°å¯¹è±¡å–ä»£å‡½æ•°ï¼ˆReplace Method with Method Objectï¼‰</p>
<p>åå‘é‡æ„ï¼šä»¥å‡½æ•°å–ä»£å‘½ä»¤ï¼ˆ344ï¼‰</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">score</span>(<span class="hljs-params">candidate, medicalExam, scoringGuide</span>) &#123;<br>  <span class="hljs-keyword">let</span> result = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> healthLevel = <span class="hljs-number">0</span>;<br>  <span class="hljs-comment">// long body code</span><br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Scorer</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">candidate, medicalExam, scoringGuide</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_candidate</span> = candidate;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_medicalExam</span> = medicalExam;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_scoringGuide</span> = scoringGuide;<br>  &#125;<br><br>  <span class="hljs-title function_">execute</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_result</span> = <span class="hljs-number">0</span>;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_healthLevel</span> = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// long body code</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="åŠ¨æœº-14"><a href="#åŠ¨æœº-14" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>å‡½æ•°ï¼Œä¸ç®¡æ˜¯ç‹¬ç«‹å‡½æ•°ï¼Œè¿˜æ˜¯ä»¥æ–¹æ³•ï¼ˆmethodï¼‰å½¢å¼é™„ç€åœ¨å¯¹è±¡ä¸Šçš„å‡½æ•°ï¼Œæ˜¯ç¨‹åºè®¾è®¡çš„åŸºæœ¬æ„é€ å—ã€‚ä¸è¿‡ï¼Œå°†å‡½æ•°å°è£…æˆè‡ªå·±çš„å¯¹è±¡ï¼Œæœ‰æ—¶ä¹Ÿæ˜¯ä¸€ç§æœ‰ç”¨çš„åŠæ³•ã€‚è¿™æ ·çš„å¯¹è±¡æˆ‘ç§°ä¹‹ä¸ºâ€œå‘½ä»¤å¯¹è±¡â€ï¼ˆcommand objectï¼‰ï¼Œæˆ–è€…ç®€ç§°â€œå‘½ä»¤â€ï¼ˆcommandï¼‰ã€‚è¿™ç§å¯¹è±¡å¤§å¤šåªæœåŠ¡äºå•ä¸€å‡½æ•°ï¼Œè·å¾—å¯¹è¯¥å‡½æ•°çš„è¯·æ±‚ï¼Œæ‰§è¡Œè¯¥å‡½æ•°ï¼Œå°±æ˜¯è¿™ç§å¯¹è±¡å­˜åœ¨çš„æ„ä¹‰ã€‚</p>
<p>ä¸æ™®é€šçš„å‡½æ•°ç›¸æ¯”ï¼Œå‘½ä»¤å¯¹è±¡æä¾›äº†æ›´å¤§çš„æ§åˆ¶çµæ´»æ€§å’Œæ›´å¼ºçš„è¡¨è¾¾èƒ½åŠ›ã€‚é™¤äº†å‡½æ•°è°ƒç”¨æœ¬èº«ï¼Œå‘½ä»¤å¯¹è±¡è¿˜å¯ä»¥æ”¯æŒé™„åŠ çš„æ“ä½œï¼Œä¾‹å¦‚æ’¤é”€æ“ä½œã€‚æˆ‘å¯ä»¥é€šè¿‡å‘½ä»¤å¯¹è±¡æä¾›çš„æ–¹æ³•æ¥è®¾å€¼å‘½ä»¤çš„å‚æ•°å€¼ï¼Œä»è€Œæ”¯æŒæ›´ä¸°å¯Œçš„ç”Ÿå‘½å‘¨æœŸç®¡ç†èƒ½åŠ›ã€‚æˆ‘å¯ä»¥å€ŸåŠ©ç»§æ‰¿å’Œé’©å­å¯¹å‡½æ•°è¡Œä¸ºåŠ ä»¥å®šåˆ¶ã€‚å¦‚æœæˆ‘æ‰€ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€æ”¯æŒå¯¹è±¡ä½†ä¸æ”¯æŒå‡½æ•°ä½œä¸ºä¸€ç­‰å…¬æ°‘ï¼Œé€šè¿‡å‘½ä»¤å¯¹è±¡å°±å¯ä»¥ç»™å‡½æ•°æä¾›å¤§éƒ¨åˆ†ç›¸å½“äºä¸€ç­‰å…¬æ°‘çš„èƒ½åŠ›ã€‚åŒæ ·ï¼Œå³ä¾¿ç¼–ç¨‹è¯­è¨€æœ¬èº«å¹¶ä¸æ”¯æŒåµŒå¥—å‡½æ•°ï¼Œæˆ‘ä¹Ÿå¯ä»¥å€ŸåŠ©å‘½ä»¤å¯¹è±¡çš„æ–¹æ³•å’Œå­—æ®µæŠŠå¤æ‚çš„å‡½æ•°æ‹†è§£å¼€ï¼Œè€Œä¸”åœ¨æµ‹è¯•å’Œè°ƒè¯•è¿‡ç¨‹ä¸­å¯ä»¥ç›´æ¥è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚</p>
<p>æ‰€æœ‰è¿™äº›éƒ½æ˜¯ä½¿ç”¨å‘½ä»¤å¯¹è±¡çš„å¥½ç†ç”±ï¼Œæ‰€ä»¥æˆ‘è¦åšå¥½å‡†å¤‡ï¼Œä¸€æ—¦æœ‰éœ€è¦ï¼Œå°±èƒ½æŠŠå‡½æ•°é‡æ„æˆå‘½ä»¤ã€‚ä¸è¿‡æˆ‘ä»¬ä¸èƒ½å¿˜è®°ï¼Œå‘½ä»¤å¯¹è±¡çš„çµæ´»æ€§ä¹Ÿæ˜¯ä»¥å¤æ‚æ€§ä½œä¸ºä»£ä»·çš„ã€‚æ‰€ä»¥ï¼Œå¦‚æœè¦åœ¨ä½œä¸ºä¸€ç­‰å…¬æ°‘çš„å‡½æ•°å’Œå‘½ä»¤å¯¹è±¡ä¹‹é—´åšä¸ªé€‰æ‹©ï¼Œ95%çš„æ—¶å€™æˆ‘éƒ½ä¼šé€‰å‡½æ•°ã€‚åªæœ‰å½“æˆ‘ç‰¹åˆ«éœ€è¦å‘½ä»¤å¯¹è±¡æä¾›çš„æŸç§èƒ½åŠ›è€Œæ™®é€šçš„å‡½æ•°æ— æ³•æä¾›è¿™ç§èƒ½åŠ›æ—¶ï¼Œæˆ‘æ‰ä¼šè€ƒè™‘ä½¿ç”¨å‘½ä»¤å¯¹è±¡ã€‚</p>
<p>è·Ÿè½¯ä»¶å¼€å‘ä¸­çš„å¾ˆå¤šè¯æ±‡ä¸€æ ·ï¼Œâ€œå‘½ä»¤â€è¿™ä¸ªè¯æ‰¿è½½äº†å¤ªå¤šå«ä¹‰ã€‚åœ¨è¿™é‡Œï¼Œâ€œå‘½ä»¤â€æ˜¯æŒ‡ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­å°è£…äº†ä¸€ä¸ªå‡½æ•°è°ƒç”¨è¯·æ±‚ã€‚è¿™æ˜¯éµå¾ªã€Šè®¾è®¡æ¨¡å¼ã€‹[gof]ä¸€ä¹¦ä¸­çš„å‘½ä»¤æ¨¡å¼ï¼ˆcommand patternï¼‰ã€‚åœ¨è¿™ä¸ªæ„ä¹‰ä¸Šï¼Œä½¿ç”¨â€œå‘½ä»¤â€ä¸€è¯æ—¶ï¼Œæˆ‘ä¼šå…ˆç”¨å®Œæ•´çš„â€œå‘½ä»¤å¯¹è±¡â€ä¸€è¯è®¾å®šä¸Šä¸‹æ–‡ï¼Œç„¶åè§†æƒ…å†µä½¿ç”¨ç®€ç•¥çš„â€œå‘½ä»¤â€ä¸€è¯ã€‚åœ¨å‘½ä»¤ä¸æŸ¥è¯¢åˆ†ç¦»åŸåˆ™ï¼ˆcommand-query separation principleï¼‰ä¸­ä¹Ÿç”¨åˆ°äº†â€œå‘½ä»¤â€ä¸€è¯ï¼Œæ­¤æ—¶â€œå‘½ä»¤â€æ˜¯ä¸€ä¸ªå¯¹è±¡æ‰€æ‹¥æœ‰çš„å‡½æ•°ï¼Œè°ƒç”¨è¯¥å‡½æ•°å¯ä»¥æ”¹å˜å¯¹è±¡å¯è§‚å¯Ÿçš„çŠ¶æ€ã€‚æˆ‘å°½é‡é¿å…ä½¿ç”¨è¿™ä¸ªæ„ä¹‰ä¸Šçš„â€œå‘½ä»¤â€ä¸€è¯ï¼Œè€Œæ›´æ„¿æ„ç§°å…¶ä¸ºâ€œä¿®æ”¹å‡½æ•°â€ï¼ˆmodifierï¼‰æˆ–è€…â€œæ”¹å˜å‡½æ•°â€ï¼ˆmutatorï¼‰ã€‚</p>
<h3 id="åšæ³•-14"><a href="#åšæ³•-14" class="headerlink" title="åšæ³•"></a>åšæ³•</h3><p>ä¸ºæƒ³è¦åŒ…è£…çš„å‡½æ•°åˆ›å»ºä¸€ä¸ªç©ºçš„ç±»ï¼Œæ ¹æ®è¯¥å‡½æ•°çš„åå­—ä¸ºå…¶å‘½åã€‚</p>
<p>ä½¿ç”¨æ¬ç§»å‡½æ•°ï¼ˆ198ï¼‰æŠŠå‡½æ•°ç§»åˆ°ç©ºçš„ç±»é‡Œã€‚</p>
<p>ä¿æŒåŸæ¥çš„å‡½æ•°ä½œä¸ºè½¬å‘å‡½æ•°ï¼Œè‡³å°‘ä¿ç•™åˆ°é‡æ„ç»“æŸä¹‹å‰æ‰åˆ é™¤ã€‚</p>
<p>éµå¾ªç¼–ç¨‹è¯­è¨€çš„å‘½åè§„èŒƒæ¥ç»™å‘½ä»¤å¯¹è±¡èµ·åã€‚å¦‚æœæ²¡æœ‰åˆé€‚çš„å‘½åè§„èŒƒï¼Œå°±ç»™å‘½ä»¤å¯¹è±¡ä¸­è´Ÿè´£å®é™…æ‰§è¡Œå‘½ä»¤çš„å‡½æ•°èµ·ä¸€ä¸ªé€šç”¨çš„åå­—ï¼Œä¾‹å¦‚â€œexecuteâ€æˆ–è€…â€œcallâ€ã€‚</p>
<p>å¯ä»¥è€ƒè™‘ç»™æ¯ä¸ªå‚æ•°åˆ›å»ºä¸€ä¸ªå­—æ®µï¼Œå¹¶åœ¨æ„é€ å‡½æ•°ä¸­æ·»åŠ å¯¹åº”çš„å‚æ•°ã€‚</p>
<h3 id="èŒƒä¾‹-14"><a href="#èŒƒä¾‹-14" class="headerlink" title="èŒƒä¾‹"></a>èŒƒä¾‹</h3><p>JavaScript è¯­è¨€æœ‰å¾ˆå¤šç¼ºç‚¹ï¼Œä½†æŠŠå‡½æ•°ä½œä¸ºä¸€ç­‰å…¬æ°‘å¯¹å¾…ï¼Œæ˜¯å®ƒæœ€æ­£ç¡®çš„è®¾è®¡å†³ç­–ä¹‹ä¸€ã€‚åœ¨ä¸å…·å¤‡è¿™ç§èƒ½åŠ›çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæˆ‘ç»å¸¸è¦è´¹åŠ›ä¸ºå¾ˆå¸¸è§çš„ä»»åŠ¡åˆ›å»ºå‘½ä»¤å¯¹è±¡ï¼ŒJavaScript åˆ™çœå»äº†è¿™äº›éº»çƒ¦ã€‚ä¸è¿‡ï¼Œå³ä¾¿åœ¨ JavaScript ä¸­ï¼Œæœ‰æ—¶ä¹Ÿéœ€è¦ç”¨åˆ°å‘½ä»¤å¯¹è±¡ã€‚</p>
<p>ä¸€ä¸ªå…¸å‹çš„åº”ç”¨åœºæ™¯å°±æ˜¯æ‹†è§£å¤æ‚çš„å‡½æ•°ï¼Œä»¥ä¾¿æˆ‘ç†è§£å’Œä¿®æ”¹ã€‚è¦æƒ³çœŸæ­£å±•ç¤ºè¿™ä¸ªé‡æ„æ‰‹æ³•çš„ä»·å€¼ï¼Œæˆ‘éœ€è¦ä¸€ä¸ªé•¿è€Œå¤æ‚çš„å‡½æ•°ï¼Œä½†è¿™å†™èµ·æ¥å¤ªè´¹äº‹ï¼Œä½ è¯»èµ·æ¥ä¹Ÿéº»çƒ¦ã€‚æ‰€ä»¥æˆ‘åœ¨è¿™é‡Œå±•ç¤ºçš„å‡½æ•°å…¶å®å¾ˆçŸ­ï¼Œå¹¶ä¸çœŸçš„éœ€è¦æœ¬é‡æ„æ‰‹æ³•ï¼Œè¿˜æœ›è¯»è€…æƒä¸”åŒ…æ¶µã€‚ä¸‹é¢çš„å‡½æ•°ç”¨äºç»™ä¸€ä»½ä¿é™©ç”³è¯·è¯„åˆ†ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">score</span>(<span class="hljs-params">candidate, medicalExam, scoringGuide</span>) &#123;<br>  <span class="hljs-keyword">let</span> result = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> healthLevel = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">let</span> highMedicalRiskFlag = <span class="hljs-literal">false</span>;<br><br>  <span class="hljs-keyword">if</span> (medicalExam.<span class="hljs-property">isSmoker</span>) &#123;<br>    healthLevel += <span class="hljs-number">10</span>;<br>    highMedicalRiskFlag = <span class="hljs-literal">true</span>;<br>  &#125;<br>  <span class="hljs-keyword">let</span> certificationGrade = <span class="hljs-string">&quot;regular&quot;</span>;<br>  <span class="hljs-keyword">if</span> (scoringGuide.<span class="hljs-title function_">stateWithLowCertification</span>(candidate.<span class="hljs-property">originState</span>)) &#123;<br>    certificationGrade = <span class="hljs-string">&quot;low&quot;</span>;<br>    result -= <span class="hljs-number">5</span>;<br>  &#125; <span class="hljs-comment">// lots more code like this</span><br>  result -= <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(healthLevel - <span class="hljs-number">5</span>, <span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æˆ‘é¦–å…ˆåˆ›å»ºä¸€ä¸ªç©ºçš„ç±»ï¼Œç”¨æ¬ç§»å‡½æ•°ï¼ˆ198ï¼‰æŠŠä¸Šè¿°å‡½æ•°æ¬åˆ°è¿™ä¸ªç±»é‡Œå»ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">score</span>(<span class="hljs-params">candidate, medicalExam, scoringGuide</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scorer</span>().<span class="hljs-title function_">execute</span>(candidate, medicalExam, scoringGuide);<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Scorer</span> &#123;<br>  <span class="hljs-title function_">execute</span>(<span class="hljs-params">candidate, medicalExam, scoringGuide</span>) &#123;<br>    <span class="hljs-keyword">let</span> result = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">let</span> healthLevel = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">let</span> highMedicalRiskFlag = <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-keyword">if</span> (medicalExam.<span class="hljs-property">isSmoker</span>) &#123;<br>      healthLevel += <span class="hljs-number">10</span>;<br>      highMedicalRiskFlag = <span class="hljs-literal">true</span>;<br>    &#125;<br>    <span class="hljs-keyword">let</span> certificationGrade = <span class="hljs-string">&quot;regular&quot;</span>;<br>    <span class="hljs-keyword">if</span> (scoringGuide.<span class="hljs-title function_">stateWithLowCertification</span>(candidate.<span class="hljs-property">originState</span>)) &#123;<br>      certificationGrade = <span class="hljs-string">&quot;low&quot;</span>;<br>      result -= <span class="hljs-number">5</span>;<br>    &#125; <span class="hljs-comment">// lots more code like this</span><br>    result -= <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(healthLevel - <span class="hljs-number">5</span>, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">return</span> result;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>å¤§å¤šæ•°æ—¶å€™ï¼Œæˆ‘æ›´æ„¿æ„åœ¨å‘½ä»¤å¯¹è±¡çš„æ„é€ å‡½æ•°ä¸­ä¼ å…¥å‚æ•°ï¼Œè€Œä¸è®© execute å‡½æ•°æ¥æ”¶å‚æ•°ã€‚åœ¨è¿™æ ·ä¸€ä¸ªç®€å•çš„æ‹†è§£åœºæ™¯ä¸­ï¼Œè¿™ä¸€ç‚¹å¸¦æ¥çš„å½±å“ä¸å¤§ï¼›ä½†å¦‚æœæˆ‘è¦å¤„ç†çš„å‘½ä»¤éœ€è¦æ›´å¤æ‚çš„å‚æ•°è®¾ç½®å‘¨æœŸæˆ–è€…å¤§é‡å®šåˆ¶ï¼Œä¸Šè¿°åšæ³•å°±ä¼šå¸¦æ¥å¾ˆå¤šä¾¿åˆ©ï¼šå¤šä¸ªå‘½ä»¤ç±»å¯ä»¥åˆ†åˆ«ä»å„è‡ªçš„æ„é€ å‡½æ•°ä¸­è·å¾—å„è‡ªä¸åŒçš„å‚æ•°ï¼Œç„¶ååˆå¯ä»¥æ’æˆé˜Ÿåˆ—æŒ¨ä¸ªæ‰§è¡Œï¼Œå› ä¸ºå®ƒä»¬çš„ execute å‡½æ•°ç­¾åéƒ½ä¸€æ ·ã€‚</p>
<p>æˆ‘å¯ä»¥æ¯æ¬¡æ¬ç§»ä¸€ä¸ªå‚æ•°åˆ°æ„é€ å‡½æ•°ã€‚</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">score</span>(candidate, medicalExam, scoringGuide) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-type">new</span> Scorer(candidate).execute(candidate, medicalExam, scoringGuide);<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>class Scorerâ€¦</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">constructor</span>(<span class="hljs-params">candidate</span>)&#123;<br> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_candidate</span> = candidate;<br>&#125;<br><br>execute (candidate, medicalExam, scoringGuide) &#123;<br> <span class="hljs-keyword">let</span> result = <span class="hljs-number">0</span>;<br> <span class="hljs-keyword">let</span> healthLevel = <span class="hljs-number">0</span>;<br> <span class="hljs-keyword">let</span> highMedicalRiskFlag = <span class="hljs-literal">false</span>;<br><br> <span class="hljs-keyword">if</span> (medicalExam.<span class="hljs-property">isSmoker</span>) &#123;<br>  healthLevel += <span class="hljs-number">10</span>;<br>  highMedicalRiskFlag = <span class="hljs-literal">true</span>;<br> &#125;<br> <span class="hljs-keyword">let</span> certificationGrade = <span class="hljs-string">&quot;regular&quot;</span>;<br> <span class="hljs-keyword">if</span> (scoringGuide.<span class="hljs-title function_">stateWithLowCertification</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_candidate</span>.<span class="hljs-property">originState</span>)) &#123;<br>  certificationGrade = <span class="hljs-string">&quot;low&quot;</span>;<br>  result -= <span class="hljs-number">5</span>;<br> &#125;<br> <span class="hljs-comment">// lots more code like this</span><br> result -= <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(healthLevel - <span class="hljs-number">5</span>, <span class="hljs-number">0</span>);<br> <span class="hljs-keyword">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç»§ç»­å¤„ç†å…¶ä»–å‚æ•°ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> score(candidate, medicalExam, scoringGuide) &#123;<br>  return <span class="hljs-keyword">new</span> <span class="hljs-constructor">Scorer(<span class="hljs-params">candidate</span>, <span class="hljs-params">medicalExam</span>, <span class="hljs-params">scoringGuide</span>)</span>.execute<span class="hljs-literal">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>class Scorerâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">constructor</span>(candidate, medicalExam, scoringGuide)&#123;<br> <span class="hljs-keyword">this</span>._candidate = candidate;<br> <span class="hljs-keyword">this</span>._medicalExam = medicalExam;<br> <span class="hljs-keyword">this</span>._scoringGuide = scoringGuide;<br>&#125;<br>execute () &#123;<br> let result = <span class="hljs-number">0</span>;<br> let healthLevel = <span class="hljs-number">0</span>;<br> let highMedicalRiskFlag = <span class="hljs-literal">false</span>;<br><br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._medicalExam.isSmoker) &#123;<br>  healthLevel += <span class="hljs-number">10</span>;<br>  highMedicalRiskFlag = <span class="hljs-literal">true</span>;<br> &#125;<br> let certificationGrade = <span class="hljs-string">&quot;regular&quot;</span>;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._scoringGuide.stateWithLowCertification(<span class="hljs-keyword">this</span>._candidate.originState)) &#123;<br>  certificationGrade = <span class="hljs-string">&quot;low&quot;</span>;<br>  result -= <span class="hljs-number">5</span>;<br> &#125;<br> <span class="hljs-comment">// lots more code like this</span><br> result -= Math.max(healthLevel - <span class="hljs-number">5</span>, <span class="hljs-number">0</span>);<br> <span class="hljs-keyword">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ä»¥å‘½ä»¤å–ä»£å‡½æ•°çš„é‡æ„åˆ°æ­¤å°±ç»“æŸäº†ï¼Œä¸è¿‡ä¹‹æ‰€ä»¥è¦åšè¿™ä¸ªé‡æ„ï¼Œæ˜¯ä¸ºäº†æ‹†è§£å¤æ‚çš„å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘è¿˜æ˜¯å¤§è‡´å±•ç¤ºä¸€ä¸‹å¦‚ä½•æ‹†è§£ã€‚ä¸‹ä¸€æ­¥æ˜¯æŠŠæ‰€æœ‰å±€éƒ¨å˜é‡éƒ½å˜æˆå­—æ®µï¼Œæˆ‘è¿˜æ˜¯æ¯æ¬¡ä¿®æ”¹ä¸€å¤„ã€‚</p>
<p><strong>class Scorerâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">constructor</span>(candidate, medicalExam, scoringGuide)&#123;<br> <span class="hljs-keyword">this</span>._candidate = candidate;<br> <span class="hljs-keyword">this</span>._medicalExam = medicalExam;<br> <span class="hljs-keyword">this</span>._scoringGuide = scoringGuide;<br>&#125;<br><br>execute () &#123;<br> <span class="hljs-keyword">this</span>._result = <span class="hljs-number">0</span>;<br> let healthLevel = <span class="hljs-number">0</span>;<br> let highMedicalRiskFlag = <span class="hljs-literal">false</span>;<br><br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._medicalExam.isSmoker) &#123;<br>  healthLevel += <span class="hljs-number">10</span>;<br>  highMedicalRiskFlag = <span class="hljs-literal">true</span>;<br> &#125;<br> let certificationGrade = <span class="hljs-string">&quot;regular&quot;</span>;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._scoringGuide.stateWithLowCertification(<span class="hljs-keyword">this</span>._candidate.originState)) &#123;<br>  certificationGrade = <span class="hljs-string">&quot;low&quot;</span>;<br>  <span class="hljs-keyword">this</span>._result -= <span class="hljs-number">5</span>;<br> &#125;<br> <span class="hljs-comment">// lots more code like this</span><br> <span class="hljs-keyword">this</span>._result -= Math.max(healthLevel - <span class="hljs-number">5</span>, <span class="hljs-number">0</span>);<br> <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._result;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°æ‰€æœ‰å±€éƒ¨å˜é‡éƒ½å˜æˆå­—æ®µã€‚ï¼ˆâ€œæŠŠå±€éƒ¨å˜é‡å˜æˆå­—æ®µâ€è¿™ä¸ªé‡æ„æ‰‹æ³•æ˜¯å¦‚æ­¤ç®€å•ï¼Œä»¥è‡³äºæˆ‘éƒ½æ²¡æœ‰åœ¨é‡æ„åå½•ä¸­ç»™å®ƒä¸€å¸­ä¹‹åœ°ã€‚å¯¹æ­¤æˆ‘ç•¥æ„Ÿæ„§ç–šã€‚ï¼‰</p>
<p><strong>class Scorerâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">constructor</span>(candidate, medicalExam, scoringGuide)&#123;<br> <span class="hljs-keyword">this</span>._candidate = candidate;<br> <span class="hljs-keyword">this</span>._medicalExam = medicalExam;<br> <span class="hljs-keyword">this</span>._scoringGuide = scoringGuide;<br>&#125;<br><br>execute () &#123;<br> <span class="hljs-keyword">this</span>._result = <span class="hljs-number">0</span>;<br> <span class="hljs-keyword">this</span>._healthLevel = <span class="hljs-number">0</span>;<br> <span class="hljs-keyword">this</span>._highMedicalRiskFlag = <span class="hljs-literal">false</span>;<br><br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._medicalExam.isSmoker) &#123;<br>  <span class="hljs-keyword">this</span>._healthLevel += <span class="hljs-number">10</span>;<br>  <span class="hljs-keyword">this</span>._highMedicalRiskFlag = <span class="hljs-literal">true</span>;<br> &#125;<br> <span class="hljs-keyword">this</span>._certificationGrade = <span class="hljs-string">&quot;regular&quot;</span>;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._scoringGuide.stateWithLowCertification(<span class="hljs-keyword">this</span>._candidate.originState)) &#123;<br>  <span class="hljs-keyword">this</span>._certificationGrade = <span class="hljs-string">&quot;low&quot;</span>;<br>  <span class="hljs-keyword">this</span>._result -= <span class="hljs-number">5</span>;<br> &#125;<br> <span class="hljs-comment">// lots more code like this</span><br> <span class="hljs-keyword">this</span>._result -= Math.max(<span class="hljs-keyword">this</span>._healthLevel - <span class="hljs-number">5</span>, <span class="hljs-number">0</span>);<br> <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._result;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç°åœ¨å‡½æ•°çš„æ‰€æœ‰çŠ¶æ€éƒ½å·²ç»ç§»åˆ°äº†å‘½ä»¤å¯¹è±¡ä¸­ï¼Œæˆ‘å¯ä»¥æ”¾å¿ƒä½¿ç”¨æç‚¼å‡½æ•°ï¼ˆ106ï¼‰ç­‰é‡æ„æ‰‹æ³•ï¼Œè€Œä¸ç”¨çº ç»“äºå±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸä¹‹ç±»é—®é¢˜ã€‚</p>
<p><strong>class Scorerâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">execute () &#123;<br> <span class="hljs-keyword">this</span>._result = <span class="hljs-number">0</span>;<br> <span class="hljs-keyword">this</span>._healthLevel = <span class="hljs-number">0</span>;<br> <span class="hljs-keyword">this</span>._highMedicalRiskFlag = <span class="hljs-literal">false</span>;<br><br> <span class="hljs-keyword">this</span>.scoreSmoking();<br> <span class="hljs-keyword">this</span>._certificationGrade = <span class="hljs-string">&quot;regular&quot;</span>;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._scoringGuide.stateWithLowCertification(<span class="hljs-keyword">this</span>._candidate.originState)) &#123;<br>  <span class="hljs-keyword">this</span>._certificationGrade = <span class="hljs-string">&quot;low&quot;</span>;<br>  <span class="hljs-keyword">this</span>._result -= <span class="hljs-number">5</span>;<br> &#125;<br> <span class="hljs-comment">// lots more code like this</span><br> <span class="hljs-keyword">this</span>._result -= Math.max(<span class="hljs-keyword">this</span>._healthLevel - <span class="hljs-number">5</span>, <span class="hljs-number">0</span>);<br> <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._result;<br> &#125;<br>scoreSmoking() &#123;<br> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._medicalExam.isSmoker) &#123;<br>  <span class="hljs-keyword">this</span>._healthLevel += <span class="hljs-number">10</span>;<br>  <span class="hljs-keyword">this</span>._highMedicalRiskFlag = <span class="hljs-literal">true</span>;<br> &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¿™æ ·æˆ‘å°±å¯ä»¥åƒå¤„ç†åµŒå¥—å‡½æ•°ä¸€æ ·å¤„ç†å‘½ä»¤å¯¹è±¡ã€‚å®é™…ä¸Šï¼Œåœ¨ JavaScript ä¸­è¿ç”¨æ­¤é‡æ„æ‰‹æ³•æ—¶ï¼Œçš„ç¡®å¯ä»¥è€ƒè™‘ç”¨åµŒå¥—å‡½æ•°æ¥ä»£æ›¿å‘½ä»¤å¯¹è±¡ã€‚ä¸è¿‡æˆ‘è¿˜æ˜¯ä¼šä½¿ç”¨å‘½ä»¤å¯¹è±¡ï¼Œä¸ä»…å› ä¸ºæˆ‘å¯¹å‘½ä»¤å¯¹è±¡æ›´ç†Ÿæ‚‰ï¼Œè€Œä¸”è¿˜å› ä¸ºæˆ‘å¯ä»¥é’ˆå¯¹å‘½ä»¤å¯¹è±¡ä¸­ä»»ä½•ä¸€ä¸ªå‡½æ•°è¿›è¡Œæµ‹è¯•å’Œè°ƒè¯•ã€‚</p>
<h2 id="11-10-ä»¥å‡½æ•°å–ä»£å‘½ä»¤ï¼ˆReplace-Command-with-Functionï¼‰"><a href="#11-10-ä»¥å‡½æ•°å–ä»£å‘½ä»¤ï¼ˆReplace-Command-with-Functionï¼‰" class="headerlink" title="11.10 ä»¥å‡½æ•°å–ä»£å‘½ä»¤ï¼ˆReplace Command with Functionï¼‰"></a>11.10 ä»¥å‡½æ•°å–ä»£å‘½ä»¤ï¼ˆReplace Command with Functionï¼‰</h2><p>åå‘é‡æ„ï¼šä»¥å‘½ä»¤å–ä»£å‡½æ•°ï¼ˆ337ï¼‰</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ChargeCalculator</span> &#123;<br>  <span class="hljs-keyword">constructor</span>(customer, usage) &#123;<br>    <span class="hljs-keyword">this</span>._customer = customer;<br>    <span class="hljs-keyword">this</span>._usage = usage;<br>  &#125;<br>  execute() &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._customer.rate * <span class="hljs-keyword">this</span>._usage;<br>  &#125;<br>&#125;<br><br>function charge(customer, usage) &#123;<br>  <span class="hljs-keyword">return</span> customer.rate * usage;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="åŠ¨æœº-15"><a href="#åŠ¨æœº-15" class="headerlink" title="åŠ¨æœº"></a>åŠ¨æœº</h3><p>å‘½ä»¤å¯¹è±¡ä¸ºå¤„ç†å¤æ‚è®¡ç®—æä¾›äº†å¼ºå¤§çš„æœºåˆ¶ã€‚å€ŸåŠ©å‘½ä»¤å¯¹è±¡ï¼Œå¯ä»¥è½»æ¾åœ°å°†åŸæœ¬å¤æ‚çš„å‡½æ•°æ‹†è§£ä¸ºå¤šä¸ªæ–¹æ³•ï¼Œå½¼æ­¤ä¹‹é—´é€šè¿‡å­—æ®µå…±äº«çŠ¶æ€ï¼›æ‹†è§£åçš„æ–¹æ³•å¯ä»¥åˆ†åˆ«è°ƒç”¨ï¼›å¼€å§‹è°ƒç”¨ä¹‹å‰çš„æ•°æ®çŠ¶æ€ä¹Ÿå¯ä»¥é€æ­¥æ„å»ºã€‚ä½†è¿™ç§å¼ºå¤§æ˜¯æœ‰ä»£ä»·çš„ã€‚å¤§å¤šæ•°æ—¶å€™ï¼Œæˆ‘åªæ˜¯æƒ³è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œè®©å®ƒå®Œæˆè‡ªå·±çš„å·¥ä½œå°±å¥½ã€‚å¦‚æœè¿™ä¸ªå‡½æ•°ä¸æ˜¯å¤ªå¤æ‚ï¼Œé‚£ä¹ˆå‘½ä»¤å¯¹è±¡å¯èƒ½æ˜¾å¾—è´¹è€Œä¸æƒ ï¼Œæˆ‘å°±åº”è¯¥è€ƒè™‘å°†å…¶å˜å›æ™®é€šçš„å‡½æ•°ã€‚</p>
<h3 id="åšæ³•-15"><a href="#åšæ³•-15" class="headerlink" title="åšæ³•"></a>åšæ³•</h3><p>è¿ç”¨æç‚¼å‡½æ•°ï¼ˆ106ï¼‰ï¼ŒæŠŠâ€œåˆ›å»ºå¹¶æ‰§è¡Œå‘½ä»¤å¯¹è±¡â€çš„ä»£ç å•ç‹¬æç‚¼åˆ°ä¸€ä¸ªå‡½æ•°ä¸­ã€‚</p>
<p>è¿™ä¸€æ­¥ä¼šæ–°å»ºä¸€ä¸ªå‡½æ•°ï¼Œæœ€ç»ˆè¿™ä¸ªå‡½æ•°ä¼šå–ä»£ç°åœ¨çš„å‘½ä»¤å¯¹è±¡ã€‚</p>
<p>å¯¹å‘½ä»¤å¯¹è±¡åœ¨æ‰§è¡Œé˜¶æ®µç”¨åˆ°çš„å‡½æ•°ï¼Œé€ä¸€ä½¿ç”¨å†…è”å‡½æ•°ï¼ˆ115ï¼‰ã€‚</p>
<p>å¦‚æœè¢«è°ƒç”¨çš„å‡½æ•°æœ‰è¿”å›å€¼ï¼Œè¯·å…ˆå¯¹è°ƒç”¨å¤„ä½¿ç”¨æç‚¼å˜é‡ï¼ˆ119ï¼‰ï¼Œç„¶åå†ä½¿ç”¨å†…è”å‡½æ•°ï¼ˆ115ï¼‰ã€‚</p>
<p>ä½¿ç”¨æ”¹å˜å‡½æ•°å£°æ˜ï¼ˆ124ï¼‰ï¼ŒæŠŠæ„é€ å‡½æ•°çš„å‚æ•°è½¬ç§»åˆ°æ‰§è¡Œå‡½æ•°ã€‚</p>
<p>å¯¹äºæ‰€æœ‰çš„å­—æ®µï¼Œåœ¨æ‰§è¡Œå‡½æ•°ä¸­æ‰¾åˆ°å¼•ç”¨å®ƒä»¬çš„åœ°æ–¹ï¼Œå¹¶æ”¹ä¸ºä½¿ç”¨å‚æ•°ã€‚æ¯æ¬¡ä¿®æ”¹åéƒ½è¦æµ‹è¯•ã€‚</p>
<p>æŠŠâ€œè°ƒç”¨æ„é€ å‡½æ•°â€å’Œâ€œè°ƒç”¨æ‰§è¡Œå‡½æ•°â€ä¸¤æ­¥éƒ½å†…è”åˆ°è°ƒç”¨æ–¹ï¼ˆä¹Ÿå°±æ˜¯æœ€ç»ˆè¦æ›¿æ¢å‘½ä»¤å¯¹è±¡çš„é‚£ä¸ªå‡½æ•°ï¼‰ã€‚</p>
<p>æµ‹è¯•ã€‚</p>
<p>ç”¨ç§»é™¤æ­»ä»£ç ï¼ˆ237ï¼‰æŠŠå‘½ä»¤ç±»æ¶ˆå»ã€‚</p>
<h3 id="èŒƒä¾‹-15"><a href="#èŒƒä¾‹-15" class="headerlink" title="èŒƒä¾‹"></a>èŒƒä¾‹</h3><p>å‡è®¾æˆ‘æœ‰ä¸€ä¸ªå¾ˆå°çš„å‘½ä»¤å¯¹è±¡ã€‚</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ChargeCalculator</span> &#123;<br>  <span class="hljs-keyword">constructor</span>(customer, usage, provider) &#123;<br>    <span class="hljs-keyword">this</span>._customer = customer;<br>    <span class="hljs-keyword">this</span>._usage = usage;<br>    <span class="hljs-keyword">this</span>._provider = provider;<br>  &#125;<br>  <span class="hljs-keyword">get</span> baseCharge() &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._customer.baseRate * <span class="hljs-keyword">this</span>._usage;<br>  &#125;<br>  <span class="hljs-keyword">get</span> charge() &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.baseCharge + <span class="hljs-keyword">this</span>._provider.connectionCharge;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ–¹çš„ä»£ç å¦‚ä¸‹ã€‚</p>
<p><strong>è°ƒç”¨æ–¹â€¦</strong></p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">monthCharge = <span class="hljs-keyword">new</span> <span class="hljs-constructor">ChargeCalculator(<span class="hljs-params">customer</span>, <span class="hljs-params">usage</span>, <span class="hljs-params">provider</span>)</span>.charge;<br></code></pre></td></tr></table></figure>

<p>å‘½ä»¤ç±»è¶³å¤Ÿå°ã€è¶³å¤Ÿç®€å•ï¼Œå˜æˆå‡½æ•°æ›´åˆé€‚ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ç”¨æç‚¼å‡½æ•°ï¼ˆ106ï¼‰æŠŠå‘½ä»¤å¯¹è±¡çš„åˆ›å»ºä¸è°ƒç”¨è¿‡ç¨‹åŒ…è£…åˆ°ä¸€ä¸ªå‡½æ•°ä¸­ã€‚</p>
<p><strong>è°ƒç”¨æ–¹â€¦</strong></p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">monthCharge</span> = charge(customer, usage, provider)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<p><strong>é¡¶å±‚ä½œç”¨åŸŸâ€¦</strong></p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> charge(customer, usage, provider) &#123;<br>  return <span class="hljs-keyword">new</span> <span class="hljs-constructor">ChargeCalculator(<span class="hljs-params">customer</span>, <span class="hljs-params">usage</span>, <span class="hljs-params">provider</span>)</span>.charge;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥è¦è€ƒè™‘å¦‚ä½•å¤„ç†æ”¯æŒå‡½æ•°ï¼ˆä¹Ÿå°±æ˜¯è¿™é‡Œçš„ baseCharge å‡½æ•°ï¼‰ã€‚å¯¹äºæœ‰è¿”å›å€¼çš„å‡½æ•°ï¼Œæˆ‘ä¸€èˆ¬ä¼šå…ˆç”¨æç‚¼å˜é‡ï¼ˆ119ï¼‰æŠŠè¿”å›å€¼æç‚¼å‡ºæ¥ã€‚</p>
<p><strong>class ChargeCalculatorâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">get</span> baseCharge() &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._customer.baseRate * <span class="hljs-keyword">this</span>._usage;<br>&#125;<br><span class="hljs-keyword">get</span> charge() &#123;<br>  <span class="hljs-keyword">const</span> baseCharge = <span class="hljs-keyword">this</span>.baseCharge;<br>  <span class="hljs-keyword">return</span> baseCharge + <span class="hljs-keyword">this</span>._provider.connectionCharge;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç„¶åå¯¹æ”¯æŒå‡½æ•°ä½¿ç”¨å†…è”å‡½æ•°ï¼ˆ115ï¼‰ã€‚</p>
<p><strong>class ChargeCalculatorâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">get</span> charge() &#123;<br>  <span class="hljs-keyword">const</span> baseCharge = <span class="hljs-keyword">this</span>._customer.baseRate * <span class="hljs-keyword">this</span>._usage;<br>  <span class="hljs-keyword">return</span> baseCharge + <span class="hljs-keyword">this</span>._provider.connectionCharge;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç°åœ¨æ‰€æœ‰é€»è¾‘å¤„ç†éƒ½é›†ä¸­åˆ°ä¸€ä¸ªå‡½æ•°äº†ï¼Œä¸‹ä¸€æ­¥æ˜¯æŠŠæ„é€ å‡½æ•°ä¼ å…¥çš„æ•°æ®ç§»åˆ°ä¸»å‡½æ•°ã€‚é¦–å…ˆç”¨æ”¹å˜å‡½æ•°å£°æ˜ï¼ˆ124ï¼‰æŠŠæ„é€ å‡½æ•°çš„å‚æ•°é€ä¸€æ·»åŠ åˆ° charge å‡½æ•°ä¸Šã€‚</p>
<p><strong>class ChargeCalculatorâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">constructor</span> (customer, usage, provider)&#123;<br> <span class="hljs-keyword">this</span>._customer = customer;<br> <span class="hljs-keyword">this</span>._usage = usage;<br> <span class="hljs-keyword">this</span>._provider = provider;<br>&#125;<br><br>charge(customer, usage, provider) &#123;<br> <span class="hljs-keyword">const</span> baseCharge = <span class="hljs-keyword">this</span>._customer.baseRate * <span class="hljs-keyword">this</span>._usage;<br> <span class="hljs-keyword">return</span> baseCharge + <span class="hljs-keyword">this</span>._provider.connectionCharge;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>é¡¶å±‚ä½œç”¨åŸŸâ€¦</strong></p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">function</span> charge(customer, <span class="hljs-keyword">usage</span>, provider) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">new</span> ChargeCalculator(customer, <span class="hljs-keyword">usage</span>, provider).charge(<br>    customer,<br>    <span class="hljs-keyword">usage</span>,<br>    provider<br>  );<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç„¶åä¿®æ”¹ charge å‡½æ•°çš„å®ç°ï¼Œæ”¹ä¸ºä½¿ç”¨ä¼ å…¥çš„å‚æ•°ã€‚è¿™ä¸ªä¿®æ”¹å¯ä»¥å°æ­¥è¿›è¡Œï¼Œæ¯æ¬¡ä½¿ç”¨ä¸€ä¸ªå‚æ•°ã€‚</p>
<p><strong>class ChargeCalculatorâ€¦</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">constructor</span> (customer, usage, provider)&#123;<br> <span class="hljs-keyword">this</span>._customer = customer;<br> <span class="hljs-keyword">this</span>._usage = usage;<br> <span class="hljs-keyword">this</span>._provider = provider;<br>&#125;<br><br>charge(customer, usage, provider) &#123;<br> <span class="hljs-keyword">const</span> baseCharge = customer.baseRate * <span class="hljs-keyword">this</span>._usage;<br> <span class="hljs-keyword">return</span> baseCharge + <span class="hljs-keyword">this</span>._provider.connectionCharge;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æ„é€ å‡½æ•°ä¸­å¯¹Â <code>this._customer</code>Â å­—æ®µçš„èµ‹å€¼ä¸åˆ é™¤ä¹Ÿæ²¡å…³ç³»ï¼Œå› ä¸ºåæ­£æ²¡äººä½¿ç”¨è¿™ä¸ªå­—æ®µã€‚ä½†æˆ‘æ›´æ„¿æ„å»æ‰è¿™æ¡èµ‹å€¼è¯­å¥ï¼Œå› ä¸ºå»æ‰å®ƒä»¥åï¼Œå¦‚æœåœ¨å‡½æ•°å®ç°ä¸­æ¼æ‰äº†ä¸€å¤„å¯¹å­—æ®µçš„ä½¿ç”¨æ²¡æœ‰ä¿®æ”¹ï¼Œæµ‹è¯•å°±ä¼šå¤±è´¥ã€‚ï¼ˆå¦‚æœæˆ‘çœŸçš„çŠ¯äº†è¿™ä¸ªé”™è¯¯è€Œæµ‹è¯•æ²¡æœ‰å¤±è´¥ï¼Œæˆ‘å°±åº”è¯¥è€ƒè™‘å¢åŠ æµ‹è¯•äº†ã€‚ï¼‰</p>
<p>å…¶ä»–å‚æ•°ä¹Ÿå¦‚æ³•ç‚®åˆ¶ï¼Œç›´åˆ° charge å‡½æ•°ä¸å†ä½¿ç”¨ä»»ä½•å­—æ®µï¼š</p>
<p><strong>class ChargeCalculatorâ€¦</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">charge</span>(<span class="hljs-params">customer, usage, provider</span>) &#123;<br>  <span class="hljs-keyword">const</span> baseCharge = customer.<span class="hljs-property">baseRate</span> * usage;<br>  <span class="hljs-keyword">return</span> baseCharge + provider.<span class="hljs-property">connectionCharge</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç°åœ¨æˆ‘å°±å¯ä»¥æŠŠæ‰€æœ‰é€»è¾‘éƒ½å†…è”åˆ°é¡¶å±‚çš„ charge å‡½æ•°ä¸­ã€‚è¿™æ˜¯å†…è”å‡½æ•°ï¼ˆ115ï¼‰çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œæˆ‘éœ€è¦æŠŠæ„é€ å‡½æ•°å’Œæ‰§è¡Œå‡½æ•°ä¸€å¹¶å†…è”ã€‚</p>
<p><strong>é¡¶å±‚ä½œç”¨åŸŸâ€¦</strong></p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">charge</span>(customer, usage, provider) &#123;<br>  const baseCharge = customer.baseRate * usage;<br>  <span class="hljs-keyword">return</span> <span class="hljs-type">baseCharge</span> + provider.connectionCharge;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç°åœ¨å‘½ä»¤ç±»å·²ç»æ˜¯æ­»ä»£ç äº†ï¼Œå¯ä»¥ç”¨ç§»é™¤æ­»ä»£ç ï¼ˆ237ï¼‰ç»™å®ƒä¸€ä¸ªä½“é¢çš„è‘¬ç¤¼ã€‚</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E9%87%8D%E6%9E%84/" class="category-chain-item">é‡æ„</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E9%87%8D%E6%9E%84/">#é‡æ„</a>
      
        <a href="/tags/%E6%9E%B6%E6%9E%84/">#æ¶æ„</a>
      
        <a href="/tags/%E8%AE%BE%E8%AE%A1/">#è®¾è®¡</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>é‡æ„æ³•åˆ™èŠ‚é€‰(ä¸‹)</div>
      <div>https://blog.13space.cn/posts/915cdc75/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>æ‹¾å</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>July 15, 2020</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/posts/888f2d51/" title="vue&amp;elementUIä½¿ç”¨æ€»ç»“">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">vue&amp;elementUIä½¿ç”¨æ€»ç»“</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/posts/8847ed34/" title="é‡æ„æ³•åˆ™èŠ‚é€‰(ä¸Š)">
                        <span class="hidden-mobile">é‡æ„æ³•åˆ™èŠ‚é€‰(ä¸Š)</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="twikoo"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#comments', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/twikoo/1.6.8/twikoo.all.min.js', function() {
        var options = Object.assign(
          {"envId":"https://hexo-blog-twikoo-flame.vercel.app/","region":"ap-shanghai","path":"window.location.pathname"},
          {
            el: '#twikoo',
            path: 'window.location.pathname',
            onCommentLoaded: function() {
              var imgSelector = '#twikoo .tk-content img:not(.tk-owo-emotion)';
              Fluid.plugins.imageCaption(imgSelector);
              Fluid.plugins.fancyBox(imgSelector);
            }
          }
        )
        twikoo.init(options)
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> </br>æ‹¾åçš„å°ç ´ç«™ï¼Œæ¬¢è¿æµè§ˆå•Š~</br> <div style="font-size: 0.85rem"> <span id="timeDate">è½½å…¥å¤©æ•°...</span> <span id="times">è½½å…¥æ—¶åˆ†ç§’...</span> <script src="/js/duration.js"></script> </div> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        Views: 
        <span id="busuanzi_value_site_pv"></span>
        
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        Visitors: 
        <span id="busuanzi_value_site_uv"></span>
        
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
